<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>pcilib: datacpy.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">pcilib
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_0b5c8f32f3013e7b96dc99509907414c.html">pcilib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">datacpy.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;<a class="el" href="pcilib_8h_source.html">pcilib.h</a>&gt;</code><br />
</div>
<p><a href="datacpy_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac89f5fb7be582e206c0a9a19586113b0"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="datacpy_8h.html#ac89f5fb7be582e206c0a9a19586113b0">pcilib_datacpy</a> (void *dst, void const *src, uint8_t access, size_t n, <a class="el" href="pcilib_8h.html#abb840dae94c39a085b0625bdd7a49d4e">pcilib_endianess_t</a> endianess)</td></tr>
<tr class="memdesc:ac89f5fb7be582e206c0a9a19586113b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">The collection of slow memcpy functions to move the data between BAR and system memory.  <a href="datacpy_8h.html#ac89f5fb7be582e206c0a9a19586113b0">More...</a><br /></td></tr>
<tr class="separator:ac89f5fb7be582e206c0a9a19586113b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47a0fcc200fb4c9fcd07f50f09ef329e"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="datacpy_8h.html#a47a0fcc200fb4c9fcd07f50f09ef329e">pcilib_datacpy32</a> (void *dst, void const *src, size_t n, <a class="el" href="pcilib_8h.html#abb840dae94c39a085b0625bdd7a49d4e">pcilib_endianess_t</a> endianess)</td></tr>
<tr class="memdesc:a47a0fcc200fb4c9fcd07f50f09ef329e"><td class="mdescLeft">&#160;</td><td class="mdescRight">The collection of slow memcpy functions to move the data between BAR and system memory.  <a href="datacpy_8h.html#a47a0fcc200fb4c9fcd07f50f09ef329e">More...</a><br /></td></tr>
<tr class="separator:a47a0fcc200fb4c9fcd07f50f09ef329e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab844e00563f0be2c4a5ab14de0f25f39"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="datacpy_8h.html#ab844e00563f0be2c4a5ab14de0f25f39">pcilib_datacpy64</a> (void *dst, void const *src, size_t n, <a class="el" href="pcilib_8h.html#abb840dae94c39a085b0625bdd7a49d4e">pcilib_endianess_t</a> endianess)</td></tr>
<tr class="memdesc:ab844e00563f0be2c4a5ab14de0f25f39"><td class="mdescLeft">&#160;</td><td class="mdescRight">The collection of slow memcpy functions to move the data between BAR and system memory.  <a href="datacpy_8h.html#ab844e00563f0be2c4a5ab14de0f25f39">More...</a><br /></td></tr>
<tr class="separator:ab844e00563f0be2c4a5ab14de0f25f39"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ac89f5fb7be582e206c0a9a19586113b0" name="ac89f5fb7be582e206c0a9a19586113b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac89f5fb7be582e206c0a9a19586113b0">&#9670;&#160;</a></span>pcilib_datacpy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * pcilib_datacpy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void const *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>access</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pcilib_8h.html#abb840dae94c39a085b0625bdd7a49d4e">pcilib_endianess_t</a>&#160;</td>
          <td class="paramname"><em>endianess</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The collection of slow memcpy functions to move the data between BAR and system memory. </p>
<p >If necessary the endianess conversion is performed to ensure that the data is encoded using the specified endianess in the BAR memory and using the native host order in the system memory. Since endianess conversion is symmetric, it is irrelevant if we are copying from system memory to BAR memory or vice-versa.</p>
<p >The hardware may restrict access width or expose different behavior depending on the access width. These functions access memory using the specified word width only. 8-, 16-, 32-, and 64-bit wide access is supported.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">dst</td><td>- the destination memory region </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">src</td><td>- the source memory region </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">access</td><td>- the size of word (a single memory access) in bytes </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>- the number of words to copy (<code>n</code> * <code>access</code> bytes are copied). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">endianess</td><td>- the endianess of the data words in the BAR memory </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- <code>dst</code> or NULL on error </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">   80</span>                                                                                                         {</div>
<div class="line"><span class="lineno">   81</span>    <span class="keywordtype">size_t</span> pos = 0;</div>
<div class="line"><span class="lineno">   82</span>    <a class="code hl_typedef" href="datacpy_8c.html#a87e207d50dd08d69acb928a000eff2b0">pcilib_datacpy_routine_t</a> routine;</div>
<div class="line"><span class="lineno">   83</span> </div>
<div class="line"><span class="lineno">   84</span>    assert((size)&amp;&amp;(size &lt;= 8));</div>
<div class="line"><span class="lineno">   85</span> </div>
<div class="line"><span class="lineno">   86</span>    <span class="keywordflow">while</span> (size &gt;&gt;= 1) ++pos;</div>
<div class="line"><span class="lineno">   87</span>    routine = pcilib_datacpy_routines[pos];</div>
<div class="line"><span class="lineno">   88</span> </div>
<div class="line"><span class="lineno">   89</span>    <span class="keywordflow">return</span> routine(dst, src, n, endianess);</div>
<div class="line"><span class="lineno">   90</span>}</div>
<div class="ttc" id="adatacpy_8c_html_a87e207d50dd08d69acb928a000eff2b0"><div class="ttname"><a href="datacpy_8c.html#a87e207d50dd08d69acb928a000eff2b0">pcilib_datacpy_routine_t</a></div><div class="ttdeci">void *(* pcilib_datacpy_routine_t)(void *dst, void const *src, size_t n, pcilib_endianess_t endianess)</div><div class="ttdef"><b>Definition:</b> datacpy.c:75</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a47a0fcc200fb4c9fcd07f50f09ef329e" name="a47a0fcc200fb4c9fcd07f50f09ef329e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47a0fcc200fb4c9fcd07f50f09ef329e">&#9670;&#160;</a></span>pcilib_datacpy32()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * pcilib_datacpy32 </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void const *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pcilib_8h.html#abb840dae94c39a085b0625bdd7a49d4e">pcilib_endianess_t</a>&#160;</td>
          <td class="paramname"><em>endianess</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The collection of slow memcpy functions to move the data between BAR and system memory. </p>
<p >If necessary the endianess conversion is performed to ensure that the data is encoded using the specified endianess in the BAR memory and using the native host order in the system memory. Since endianess conversion is symmetric, it is irrelevant if we are copying from system memory to BAR memory or vice-versa.</p>
<p >The hardware may restrict access width or expose different behavior depending on the access width. This function only perform 32-bit memory accesses.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">dst</td><td>- the destination memory region </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">src</td><td>- the source memory region </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>- the number of 32-bit words to copy (4 * <code>n</code> bytes are copied) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">endianess</td><td>- the endianess of the data words in the BAR memory </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- <code>dst</code> or NULL on error </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">   19</span>                                                                                             {</div>
<div class="line"><span class="lineno">   20</span>    uint32_t * plDst = (uint32_t *) dst;</div>
<div class="line"><span class="lineno">   21</span>    uint32_t <span class="keyword">const</span> * plSrc = (uint32_t <span class="keyword">const</span> *) src;</div>
<div class="line"><span class="lineno">   22</span> </div>
<div class="line"><span class="lineno">   23</span>    <span class="keywordtype">int</span> swap = 0;</div>
<div class="line"><span class="lineno">   24</span> </div>
<div class="line"><span class="lineno">   25</span>    <span class="keywordflow">if</span> (endianess) </div>
<div class="line"><span class="lineno">   26</span>        swap = (endianess == <a class="code hl_enumvalue" href="pcilib_8h.html#abb840dae94c39a085b0625bdd7a49d4ea6df89f0b83be042da424b33149a9b8fa">PCILIB_BIG_ENDIAN</a>)?(ntohs(1)!=1):(ntohs(1)==1);</div>
<div class="line"><span class="lineno">   27</span> </div>
<div class="line"><span class="lineno">   28</span>    <span class="keywordflow">if</span> (swap) {</div>
<div class="line"><span class="lineno">   29</span>        <span class="keywordflow">while</span> (n &gt; 0) {</div>
<div class="line"><span class="lineno">   30</span>            *plDst = ntohl(*plSrc);</div>
<div class="line"><span class="lineno">   31</span>            ++plSrc;</div>
<div class="line"><span class="lineno">   32</span>            ++plDst;</div>
<div class="line"><span class="lineno">   33</span>            --n;</div>
<div class="line"><span class="lineno">   34</span>        }</div>
<div class="line"><span class="lineno">   35</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   36</span>        <span class="keywordflow">while</span> (n &gt; 0) {</div>
<div class="line"><span class="lineno">   37</span>            *plDst = *plSrc;</div>
<div class="line"><span class="lineno">   38</span>            ++plSrc;</div>
<div class="line"><span class="lineno">   39</span>            ++plDst;</div>
<div class="line"><span class="lineno">   40</span>            --n;</div>
<div class="line"><span class="lineno">   41</span>        }</div>
<div class="line"><span class="lineno">   42</span>    }</div>
<div class="line"><span class="lineno">   43</span> </div>
<div class="line"><span class="lineno">   44</span>    <span class="keywordflow">return</span> dst;</div>
<div class="line"><span class="lineno">   45</span>} </div>
<div class="ttc" id="apcilib_8h_html_abb840dae94c39a085b0625bdd7a49d4ea6df89f0b83be042da424b33149a9b8fa"><div class="ttname"><a href="pcilib_8h.html#abb840dae94c39a085b0625bdd7a49d4ea6df89f0b83be042da424b33149a9b8fa">PCILIB_BIG_ENDIAN</a></div><div class="ttdeci">@ PCILIB_BIG_ENDIAN</div><div class="ttdoc">Old mainframes and network byte order, most significant bytes are at the lower addresses.</div><div class="ttdef"><b>Definition:</b> pcilib.h:40</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="pcilib_8h.html#abb840dae94c39a085b0625bdd7a49d4ea6df89f0b83be042da424b33149a9b8fa">PCILIB_BIG_ENDIAN</a>.</p>

</div>
</div>
<a id="ab844e00563f0be2c4a5ab14de0f25f39" name="ab844e00563f0be2c4a5ab14de0f25f39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab844e00563f0be2c4a5ab14de0f25f39">&#9670;&#160;</a></span>pcilib_datacpy64()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * pcilib_datacpy64 </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void const *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pcilib_8h.html#abb840dae94c39a085b0625bdd7a49d4e">pcilib_endianess_t</a>&#160;</td>
          <td class="paramname"><em>endianess</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The collection of slow memcpy functions to move the data between BAR and system memory. </p>
<p >If necessary the endianess conversion is performed to ensure that the data is encoded using the specified endianess in the BAR memory and using the native host order in the system memory. Since endianess conversion is symmetric, it is irrelevant if we are copying from system memory to BAR memory or vice-versa.</p>
<p >The hardware may restrict access width or expose different behavior depending on the access width. This function only perform 64-bit memory accesses.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">dst</td><td>- the destination memory region </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">src</td><td>- the source memory region </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>- the number of 64-bit words to copy (8 * <code>n</code> bytes are copied) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">endianess</td><td>- the endianess of the data words in the BAR memory </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- <code>dst</code> or NULL on error </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">   47</span>                                                                                             {</div>
<div class="line"><span class="lineno">   48</span>    uint64_t * plDst = (uint64_t *) dst;</div>
<div class="line"><span class="lineno">   49</span>    uint64_t <span class="keyword">const</span> * plSrc = (uint64_t <span class="keyword">const</span> *) src;</div>
<div class="line"><span class="lineno">   50</span> </div>
<div class="line"><span class="lineno">   51</span>    <span class="keywordtype">int</span> swap = 0;</div>
<div class="line"><span class="lineno">   52</span> </div>
<div class="line"><span class="lineno">   53</span>    <span class="keywordflow">if</span> (endianess) </div>
<div class="line"><span class="lineno">   54</span>        swap = (endianess == <a class="code hl_enumvalue" href="pcilib_8h.html#abb840dae94c39a085b0625bdd7a49d4ea6df89f0b83be042da424b33149a9b8fa">PCILIB_BIG_ENDIAN</a>)?(be64toh(1)!=1):(be64toh(1)==1);</div>
<div class="line"><span class="lineno">   55</span> </div>
<div class="line"><span class="lineno">   56</span>    <span class="keywordflow">if</span> (swap) {</div>
<div class="line"><span class="lineno">   57</span>        <span class="keywordflow">while</span> (n &gt; 0) {</div>
<div class="line"><span class="lineno">   58</span>            *plDst = ntohl(*plSrc);</div>
<div class="line"><span class="lineno">   59</span>            ++plSrc;</div>
<div class="line"><span class="lineno">   60</span>            ++plDst;</div>
<div class="line"><span class="lineno">   61</span>            --n;</div>
<div class="line"><span class="lineno">   62</span>        }</div>
<div class="line"><span class="lineno">   63</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">   64</span>        <span class="keywordflow">while</span> (n &gt; 0) {</div>
<div class="line"><span class="lineno">   65</span>            *plDst = *plSrc;</div>
<div class="line"><span class="lineno">   66</span>            ++plSrc;</div>
<div class="line"><span class="lineno">   67</span>            ++plDst;</div>
<div class="line"><span class="lineno">   68</span>            --n;</div>
<div class="line"><span class="lineno">   69</span>        }</div>
<div class="line"><span class="lineno">   70</span>    }</div>
<div class="line"><span class="lineno">   71</span> </div>
<div class="line"><span class="lineno">   72</span>    <span class="keywordflow">return</span> dst;</div>
<div class="line"><span class="lineno">   73</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="pcilib_8h.html#abb840dae94c39a085b0625bdd7a49d4ea6df89f0b83be042da424b33149a9b8fa">PCILIB_BIG_ENDIAN</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jun 18 2024 22:02:47 for pcilib by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
