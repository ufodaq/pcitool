<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>pcilib: Public API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">pcilib
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Public API</div></div>
</div><!--header-->
<div class="contents">

<p>Base pcilib functions which does not belong to the specific APIs.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaa6d33dcd1de77fa87c66276653c164a0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__public__api.html#gaa6d33dcd1de77fa87c66276653c164a0">pcilib_open</a> (const char *device, const char *model)</td></tr>
<tr class="memdesc:gaa6d33dcd1de77fa87c66276653c164a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes pcilib context, detects model configuration, and populates model-specific registers.  <a href="group__public__api.html#gaa6d33dcd1de77fa87c66276653c164a0">More...</a><br /></td></tr>
<tr class="separator:gaa6d33dcd1de77fa87c66276653c164a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga809b61586ed9c56a7510c607859e75e3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__public__api.html#ga809b61586ed9c56a7510c607859e75e3">pcilib_close</a> (<a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *ctx)</td></tr>
<tr class="memdesc:ga809b61586ed9c56a7510c607859e75e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy pcilib context and all memory associated with it.  <a href="group__public__api.html#ga809b61586ed9c56a7510c607859e75e3">More...</a><br /></td></tr>
<tr class="separator:ga809b61586ed9c56a7510c607859e75e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4d813c29e5b968da34126908d8a019f4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__public__api.html#ga4d813c29e5b968da34126908d8a019f4">pcilib_reset</a> (<a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *ctx)</td></tr>
<tr class="memdesc:ga4d813c29e5b968da34126908d8a019f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Should reset the hardware and software in default state.  <a href="group__public__api.html#ga4d813c29e5b968da34126908d8a019f4">More...</a><br /></td></tr>
<tr class="separator:ga4d813c29e5b968da34126908d8a019f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >Base pcilib functions which does not belong to the specific APIs. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga809b61586ed9c56a7510c607859e75e3" name="ga809b61586ed9c56a7510c607859e75e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga809b61586ed9c56a7510c607859e75e3">&#9670;&#160;</a></span>pcilib_close()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pcilib_close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *&#160;</td>
          <td class="paramname"><em>ctx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroy pcilib context and all memory associated with it. </p>
<p >The function will stop event engine if necessary, but DMA engine stay running if it was already running before <a class="el" href="group__public__api.html#gaa6d33dcd1de77fa87c66276653c164a0" title="Initializes pcilib context, detects model configuration, and populates model-specific registers.">pcilib_open()</a> was called </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ctx</td><td>- pcilib context </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno">  294</span>                                 {</div>
<div class="line"><span class="lineno">  295</span>    <a class="code hl_typedef" href="pcilib_8h.html#ad5e21847906003557a26779731243927">pcilib_bar_t</a> bar;</div>
<div class="line"><span class="lineno">  296</span> </div>
<div class="line"><span class="lineno">  297</span>    <span class="keywordflow">if</span> (ctx) {</div>
<div class="line"><span class="lineno">  298</span>        <a class="code hl_typedef" href="pcilib_8h.html#a3e2e6c8a87c030ef9d5b1d9907231f8e">pcilib_dma_engine_t</a> dma;</div>
<div class="line"><span class="lineno">  299</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structpcilib__model__description__t.html">pcilib_model_description_t</a> *model_info = <a class="code hl_function" href="model_8c.html#ae7954738bb4b923ee87520c4538ba873">pcilib_get_model_description</a>(ctx);</div>
<div class="line"><span class="lineno">  300</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structpcilib__event__api__description__t.html">pcilib_event_api_description_t</a> *eapi = model_info-&gt;<a class="code hl_variable" href="structpcilib__model__description__t.html#a621b57704843da1a23291324398b9cd5">api</a>;</div>
<div class="line"><span class="lineno">  301</span>        <span class="keyword">const</span> <a class="code hl_struct" href="structpcilib__dma__api__description__t.html">pcilib_dma_api_description_t</a> *dapi = ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a7ca0cb31d5012ca14369c8af6caa25d6">dma</a>.<a class="code hl_variable" href="structpcilib__dma__description__t.html#a65df2efa3f37b7c5cf8acdbe8d23283b">api</a>;</div>
<div class="line"><span class="lineno">  302</span>        </div>
<div class="line"><span class="lineno">  303</span>        <span class="keywordflow">if</span> ((eapi)&amp;&amp;(eapi-&gt;<a class="code hl_variable" href="structpcilib__event__api__description__t.html#a9e92d79edfc0d657a58c94404e7f3199">free</a>)) eapi-&gt;<a class="code hl_variable" href="structpcilib__event__api__description__t.html#a9e92d79edfc0d657a58c94404e7f3199">free</a>(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a887deef86e2af6248df3326302bbce00">event_ctx</a>);</div>
<div class="line"><span class="lineno">  304</span>        <span class="keywordflow">if</span> ((dapi)&amp;&amp;(dapi-&gt;<a class="code hl_variable" href="structpcilib__dma__api__description__t.html#a803e1038fa9528ceca72d736332a6a12">free</a>)) dapi-&gt;<a class="code hl_variable" href="structpcilib__dma__api__description__t.html#a803e1038fa9528ceca72d736332a6a12">free</a>(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a81fc504bd03023f6d2a2f22fd2ee58ca">dma_ctx</a>);</div>
<div class="line"><span class="lineno">  305</span> </div>
<div class="line"><span class="lineno">  306</span>        <span class="keywordflow">for</span>  (dma = 0; dma &lt; <a class="code hl_define" href="pci_8h.html#a73d2542cb527e29bda21cbe267a18a0a">PCILIB_MAX_DMA_ENGINES</a>; dma++) {</div>
<div class="line"><span class="lineno">  307</span>            <span class="keywordflow">if</span> (ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#afd7b157b8796cfbb55404c2912e793f3">dma_rlock</a>[dma])</div>
<div class="line"><span class="lineno">  308</span>                <a class="code hl_function" href="locking_8c.html#aa74086b52f341fbc7807824a6bacf5e7">pcilib_return_lock</a>(ctx, <a class="code hl_enumvalue" href="lock_8h.html#aac523db17d247c418fb56dbc279113d0adc99e7d1690b7856bc3459cdaa9a3ebe">PCILIB_LOCK_FLAGS_DEFAULT</a>, ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#afd7b157b8796cfbb55404c2912e793f3">dma_rlock</a>[dma]);</div>
<div class="line"><span class="lineno">  309</span>            <span class="keywordflow">if</span> (ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a41aa83dedb03a1021ea2e23604da3aaa">dma_wlock</a>[dma])</div>
<div class="line"><span class="lineno">  310</span>                <a class="code hl_function" href="locking_8c.html#aa74086b52f341fbc7807824a6bacf5e7">pcilib_return_lock</a>(ctx, <a class="code hl_enumvalue" href="lock_8h.html#aac523db17d247c418fb56dbc279113d0adc99e7d1690b7856bc3459cdaa9a3ebe">PCILIB_LOCK_FLAGS_DEFAULT</a>, ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a41aa83dedb03a1021ea2e23604da3aaa">dma_wlock</a>[dma]);</div>
<div class="line"><span class="lineno">  311</span>        }</div>
<div class="line"><span class="lineno">  312</span> </div>
<div class="line"><span class="lineno">  313</span>        <a class="code hl_function" href="bank_8c.html#a6aaad6dc76ed23efacb455438be5c27a">pcilib_free_register_banks</a>(ctx, 0);</div>
<div class="line"><span class="lineno">  314</span> </div>
<div class="line"><span class="lineno">  315</span>        <span class="keywordflow">if</span> (ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#adc051b44d856035c537395e413bd907a">event_plugin</a>)</div>
<div class="line"><span class="lineno">  316</span>            <a class="code hl_function" href="plugin_8c.html#ab422ef9bcc665787bf78d2a8cf4facc4">pcilib_plugin_close</a>(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#adc051b44d856035c537395e413bd907a">event_plugin</a>);</div>
<div class="line"><span class="lineno">  317</span> </div>
<div class="line"><span class="lineno">  318</span>        <span class="keywordflow">if</span> (ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a7f86351902a0aa153ac9019099f0e30f">locks</a>.<a class="code hl_variable" href="structpcilib__locking__s.html#a52775864cf84b5663e1e8c0f9b9738da">kmem</a>)</div>
<div class="line"><span class="lineno">  319</span>            <a class="code hl_function" href="locking_8c.html#a0cc8f6c273bcc2fffce974f686dffee0">pcilib_free_locking</a>(ctx);</div>
<div class="line"><span class="lineno">  320</span> </div>
<div class="line"><span class="lineno">  321</span>        <span class="keywordflow">if</span> (ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a90b4d45dc1e79a725ca1478bbe753b17">kmem_list</a>) {</div>
<div class="line"><span class="lineno">  322</span>            <a class="code hl_define" href="error_8h.html#a62fff84bc7941d1a39700b931716bbe9">pcilib_warning</a>(<span class="stringliteral">&quot;Not all kernel buffers are properly cleaned&quot;</span>);</div>
<div class="line"><span class="lineno">  323</span>        </div>
<div class="line"><span class="lineno">  324</span>            <span class="keywordflow">while</span> (ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a90b4d45dc1e79a725ca1478bbe753b17">kmem_list</a>) {</div>
<div class="line"><span class="lineno">  325</span>                <a class="code hl_function" href="kmem_8c.html#a77eed4dcaa5a719b767ed275c332148e">pcilib_free_kernel_memory</a>(ctx, ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a90b4d45dc1e79a725ca1478bbe753b17">kmem_list</a>, 0);</div>
<div class="line"><span class="lineno">  326</span>            }</div>
<div class="line"><span class="lineno">  327</span>        }</div>
<div class="line"><span class="lineno">  328</span>        </div>
<div class="line"><span class="lineno">  329</span>        <span class="keywordflow">for</span> (bar = 0; bar &lt; <a class="code hl_define" href="pci_8h.html#afba0cbe7c423100d1d6dc2a1475507f4">PCILIB_MAX_BARS</a>; bar++) {</div>
<div class="line"><span class="lineno">  330</span>            <span class="keywordflow">if</span> (ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#aaee187fc94e8ce9d8666582e95b68d65">bar_space</a>[bar]) {</div>
<div class="line"><span class="lineno">  331</span>                <span class="keywordtype">char</span> *ptr = ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#aaee187fc94e8ce9d8666582e95b68d65">bar_space</a>[bar];</div>
<div class="line"><span class="lineno">  332</span>                ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#aaee187fc94e8ce9d8666582e95b68d65">bar_space</a>[bar] = NULL;</div>
<div class="line"><span class="lineno">  333</span>                <a class="code hl_function" href="bar_8c.html#a4ce1cd3017c15f543dc5b6bce5d5081f">pcilib_unmap_bar</a>(ctx, bar, ptr);</div>
<div class="line"><span class="lineno">  334</span>            }</div>
<div class="line"><span class="lineno">  335</span>        }</div>
<div class="line"><span class="lineno">  336</span>        </div>
<div class="line"><span class="lineno">  337</span>        <span class="keywordflow">if</span> (ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a26546c777c20e8f6cf63687ff16631f6">pci_cfg_space_fd</a> &gt;= 0)</div>
<div class="line"><span class="lineno">  338</span>            close(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a26546c777c20e8f6cf63687ff16631f6">pci_cfg_space_fd</a>);</div>
<div class="line"><span class="lineno">  339</span> </div>
<div class="line"><span class="lineno">  340</span> </div>
<div class="line"><span class="lineno">  341</span>        <span class="keywordflow">if</span> (ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a05d5ea2f170c18f320ae1ce7d05e378f">units</a>) {</div>
<div class="line"><span class="lineno">  342</span>            <a class="code hl_function" href="unit_8c.html#ac6d4f7a96df89f7a429e64886754e2cc">pcilib_clean_units</a>(ctx, 0);</div>
<div class="line"><span class="lineno">  343</span>            free(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a05d5ea2f170c18f320ae1ce7d05e378f">units</a>);</div>
<div class="line"><span class="lineno">  344</span>        }</div>
<div class="line"><span class="lineno">  345</span> </div>
<div class="line"><span class="lineno">  346</span>        <span class="keywordflow">if</span> (ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#af0bbd1334a8cb708cfa331d833be25e3">views</a>) {</div>
<div class="line"><span class="lineno">  347</span>            <a class="code hl_function" href="view_8c.html#a2fba2a8319859f6c23ecda7bef263936">pcilib_clean_views</a>(ctx, 0);</div>
<div class="line"><span class="lineno">  348</span>            free(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#af0bbd1334a8cb708cfa331d833be25e3">views</a>);</div>
<div class="line"><span class="lineno">  349</span>        }</div>
<div class="line"><span class="lineno">  350</span> </div>
<div class="line"><span class="lineno">  351</span>        <a class="code hl_function" href="register_8c.html#a4fadb52b2487bc1196be90a9bcf09fdc">pcilib_clean_registers</a>(ctx, 0);</div>
<div class="line"><span class="lineno">  352</span> </div>
<div class="line"><span class="lineno">  353</span>        <span class="keywordflow">if</span> (ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a4b24f857efec07c254d2fa2226b59fda">register_ctx</a>)</div>
<div class="line"><span class="lineno">  354</span>            free(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a4b24f857efec07c254d2fa2226b59fda">register_ctx</a>);</div>
<div class="line"><span class="lineno">  355</span> </div>
<div class="line"><span class="lineno">  356</span>        <span class="keywordflow">if</span> (ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a9f6bc50561128b6e7f78296f23db134a">registers</a>)</div>
<div class="line"><span class="lineno">  357</span>            free(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a9f6bc50561128b6e7f78296f23db134a">registers</a>);</div>
<div class="line"><span class="lineno">  358</span>            </div>
<div class="line"><span class="lineno">  359</span>        <span class="keywordflow">if</span> (ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a124451df7bcbe85a2d9b7e8cb19814f9">model</a>)</div>
<div class="line"><span class="lineno">  360</span>            free(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a124451df7bcbe85a2d9b7e8cb19814f9">model</a>);</div>
<div class="line"><span class="lineno">  361</span> </div>
<div class="line"><span class="lineno">  362</span>        <a class="code hl_function" href="xml_8c.html#a6ac489fe7cc07c6b9d890394faea96fa">pcilib_free_xml</a>(ctx);</div>
<div class="line"><span class="lineno">  363</span>        <a class="code hl_function" href="py_8c.html#a67b23abbb0fa81e33525e8fd34ea28fd">pcilib_free_py</a>(ctx);</div>
<div class="line"><span class="lineno">  364</span> </div>
<div class="line"><span class="lineno">  365</span>        <span class="keywordflow">if</span> (ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a97959ae9b1ab77309f0afec2b62d283c">handle</a> &gt;= 0)</div>
<div class="line"><span class="lineno">  366</span>            close(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a97959ae9b1ab77309f0afec2b62d283c">handle</a>);</div>
<div class="line"><span class="lineno">  367</span>        </div>
<div class="line"><span class="lineno">  368</span>        free(ctx);</div>
<div class="line"><span class="lineno">  369</span>    }</div>
<div class="line"><span class="lineno">  370</span>}</div>
<div class="ttc" id="abank_8c_html_a6aaad6dc76ed23efacb455438be5c27a"><div class="ttname"><a href="bank_8c.html#a6aaad6dc76ed23efacb455438be5c27a">pcilib_free_register_banks</a></div><div class="ttdeci">void pcilib_free_register_banks(pcilib_t *ctx, pcilib_register_bank_t start)</div><div class="ttdoc">Destroys contexts of register banks.</div><div class="ttdef"><b>Definition:</b> bank.c:65</div></div>
<div class="ttc" id="abar_8c_html_a4ce1cd3017c15f543dc5b6bce5d5081f"><div class="ttname"><a href="bar_8c.html#a4ce1cd3017c15f543dc5b6bce5d5081f">pcilib_unmap_bar</a></div><div class="ttdeci">void pcilib_unmap_bar(pcilib_t *ctx, pcilib_bar_t bar, void *data)</div><div class="ttdoc">Unmaps the specified bar from the address space of the process.</div><div class="ttdef"><b>Definition:</b> bar.c:126</div></div>
<div class="ttc" id="aerror_8h_html_a62fff84bc7941d1a39700b931716bbe9"><div class="ttname"><a href="error_8h.html#a62fff84bc7941d1a39700b931716bbe9">pcilib_warning</a></div><div class="ttdeci">#define pcilib_warning(...)</div><div class="ttdef"><b>Definition:</b> error.h:69</div></div>
<div class="ttc" id="akmem_8c_html_a77eed4dcaa5a719b767ed275c332148e"><div class="ttname"><a href="kmem_8c.html#a77eed4dcaa5a719b767ed275c332148e">pcilib_free_kernel_memory</a></div><div class="ttdeci">void pcilib_free_kernel_memory(pcilib_t *ctx, pcilib_kmem_handle_t *k, pcilib_kmem_flags_t flags)</div><div class="ttdoc">This function either frees the allocated kernel memory or just releases some of the references.</div><div class="ttdef"><b>Definition:</b> kmem.c:297</div></div>
<div class="ttc" id="alock_8h_html_aac523db17d247c418fb56dbc279113d0adc99e7d1690b7856bc3459cdaa9a3ebe"><div class="ttname"><a href="lock_8h.html#aac523db17d247c418fb56dbc279113d0adc99e7d1690b7856bc3459cdaa9a3ebe">PCILIB_LOCK_FLAGS_DEFAULT</a></div><div class="ttdeci">@ PCILIB_LOCK_FLAGS_DEFAULT</div><div class="ttdoc">Default flags.</div><div class="ttdef"><b>Definition:</b> lock.h:23</div></div>
<div class="ttc" id="alocking_8c_html_a0cc8f6c273bcc2fffce974f686dffee0"><div class="ttname"><a href="locking_8c.html#a0cc8f6c273bcc2fffce974f686dffee0">pcilib_free_locking</a></div><div class="ttdeci">void pcilib_free_locking(pcilib_t *ctx)</div><div class="ttdoc">this function cleans the memory from all locks : the kernel space is freed, and locks references in p...</div><div class="ttdef"><b>Definition:</b> locking.c:67</div></div>
<div class="ttc" id="alocking_8c_html_aa74086b52f341fbc7807824a6bacf5e7"><div class="ttname"><a href="locking_8c.html#aa74086b52f341fbc7807824a6bacf5e7">pcilib_return_lock</a></div><div class="ttdeci">void pcilib_return_lock(pcilib_t *ctx, pcilib_lock_flags_t flags, pcilib_lock_t *lock)</div><div class="ttdoc">this function is to decrement the variable in a lock containing the number of processes that may acce...</div><div class="ttdef"><b>Definition:</b> locking.c:219</div></div>
<div class="ttc" id="amodel_8c_html_ae7954738bb4b923ee87520c4538ba873"><div class="ttname"><a href="model_8c.html#ae7954738bb4b923ee87520c4538ba873">pcilib_get_model_description</a></div><div class="ttdeci">const pcilib_model_description_t * pcilib_get_model_description(pcilib_t *ctx)</div><div class="ttdef"><b>Definition:</b> model.c:20</div></div>
<div class="ttc" id="apci_8h_html_a73d2542cb527e29bda21cbe267a18a0a"><div class="ttname"><a href="pci_8h.html#a73d2542cb527e29bda21cbe267a18a0a">PCILIB_MAX_DMA_ENGINES</a></div><div class="ttdeci">#define PCILIB_MAX_DMA_ENGINES</div><div class="ttdoc">maximum number of supported DMA engines</div><div class="ttdef"><b>Definition:</b> pci.h:16</div></div>
<div class="ttc" id="apci_8h_html_afba0cbe7c423100d1d6dc2a1475507f4"><div class="ttname"><a href="pci_8h.html#afba0cbe7c423100d1d6dc2a1475507f4">PCILIB_MAX_BARS</a></div><div class="ttdeci">#define PCILIB_MAX_BARS</div><div class="ttdoc">this is defined by PCI specification</div><div class="ttdef"><b>Definition:</b> pci.h:9</div></div>
<div class="ttc" id="apcilib_8h_html_a3e2e6c8a87c030ef9d5b1d9907231f8e"><div class="ttname"><a href="pcilib_8h.html#a3e2e6c8a87c030ef9d5b1d9907231f8e">pcilib_dma_engine_t</a></div><div class="ttdeci">uint8_t pcilib_dma_engine_t</div><div class="ttdef"><b>Definition:</b> pcilib.h:22</div></div>
<div class="ttc" id="apcilib_8h_html_ad5e21847906003557a26779731243927"><div class="ttname"><a href="pcilib_8h.html#ad5e21847906003557a26779731243927">pcilib_bar_t</a></div><div class="ttdeci">uint8_t pcilib_bar_t</div><div class="ttdoc">Type holding the PCI Bar number.</div><div class="ttdef"><b>Definition:</b> pcilib.h:14</div></div>
<div class="ttc" id="aplugin_8c_html_ab422ef9bcc665787bf78d2a8cf4facc4"><div class="ttname"><a href="plugin_8c.html#ab422ef9bcc665787bf78d2a8cf4facc4">pcilib_plugin_close</a></div><div class="ttdeci">void pcilib_plugin_close(void *plug)</div><div class="ttdoc">Cleans up the loaded plugin.</div><div class="ttdef"><b>Definition:</b> plugin.c:33</div></div>
<div class="ttc" id="apy_8c_html_a67b23abbb0fa81e33525e8fd34ea28fd"><div class="ttname"><a href="py_8c.html#a67b23abbb0fa81e33525e8fd34ea28fd">pcilib_free_py</a></div><div class="ttdeci">void pcilib_free_py(pcilib_t *ctx)</div><div class="ttdoc">Cleans up memory used by various python structures and finalyzes python environment if pcilib is not ...</div><div class="ttdef"><b>Definition:</b> py.c:322</div></div>
<div class="ttc" id="aregister_8c_html_a4fadb52b2487bc1196be90a9bcf09fdc"><div class="ttname"><a href="register_8c.html#a4fadb52b2487bc1196be90a9bcf09fdc">pcilib_clean_registers</a></div><div class="ttdeci">void pcilib_clean_registers(pcilib_t *ctx, pcilib_register_t start)</div><div class="ttdoc">Destroys data associated with registers.</div><div class="ttdef"><b>Definition:</b> register.c:131</div></div>
<div class="ttc" id="astructpcilib__dma__api__description__t_html"><div class="ttname"><a href="structpcilib__dma__api__description__t.html">pcilib_dma_api_description_t</a></div><div class="ttdef"><b>Definition:</b> dma.h:52</div></div>
<div class="ttc" id="astructpcilib__dma__api__description__t_html_a803e1038fa9528ceca72d736332a6a12"><div class="ttname"><a href="structpcilib__dma__api__description__t.html#a803e1038fa9528ceca72d736332a6a12">pcilib_dma_api_description_t::free</a></div><div class="ttdeci">void(* free)(pcilib_dma_context_t *ctx)</div><div class="ttdef"><b>Definition:</b> dma.h:56</div></div>
<div class="ttc" id="astructpcilib__dma__description__t_html_a65df2efa3f37b7c5cf8acdbe8d23283b"><div class="ttname"><a href="structpcilib__dma__description__t.html#a65df2efa3f37b7c5cf8acdbe8d23283b">pcilib_dma_description_t::api</a></div><div class="ttdeci">const pcilib_dma_api_description_t * api</div><div class="ttdoc">Defines all API functions for DMA operation.</div><div class="ttdef"><b>Definition:</b> dma.h:75</div></div>
<div class="ttc" id="astructpcilib__event__api__description__t_html"><div class="ttname"><a href="structpcilib__event__api__description__t.html">pcilib_event_api_description_t</a></div><div class="ttdef"><b>Definition:</b> event.h:60</div></div>
<div class="ttc" id="astructpcilib__event__api__description__t_html_a9e92d79edfc0d657a58c94404e7f3199"><div class="ttname"><a href="structpcilib__event__api__description__t.html#a9e92d79edfc0d657a58c94404e7f3199">pcilib_event_api_description_t::free</a></div><div class="ttdeci">void(* free)(pcilib_context_t *ctx)</div><div class="ttdef"><b>Definition:</b> event.h:64</div></div>
<div class="ttc" id="astructpcilib__locking__s_html_a52775864cf84b5663e1e8c0f9b9738da"><div class="ttname"><a href="structpcilib__locking__s.html#a52775864cf84b5663e1e8c0f9b9738da">pcilib_locking_s::kmem</a></div><div class="ttdeci">pcilib_kmem_handle_t * kmem</div><div class="ttdoc">kmem used to store mutexes</div><div class="ttdef"><b>Definition:</b> locking.h:25</div></div>
<div class="ttc" id="astructpcilib__model__description__t_html"><div class="ttname"><a href="structpcilib__model__description__t.html">pcilib_model_description_t</a></div><div class="ttdef"><b>Definition:</b> model.h:12</div></div>
<div class="ttc" id="astructpcilib__model__description__t_html_a621b57704843da1a23291324398b9cd5"><div class="ttname"><a href="structpcilib__model__description__t.html#a621b57704843da1a23291324398b9cd5">pcilib_model_description_t::api</a></div><div class="ttdeci">const pcilib_event_api_description_t * api</div><div class="ttdef"><b>Definition:</b> model.h:15</div></div>
<div class="ttc" id="astructpcilib__s_html_a05d5ea2f170c18f320ae1ce7d05e378f"><div class="ttname"><a href="structpcilib__s.html#a05d5ea2f170c18f320ae1ce7d05e378f">pcilib_s::units</a></div><div class="ttdeci">pcilib_unit_description_t * units</div><div class="ttdoc">list of currently defined units</div><div class="ttdef"><b>Definition:</b> pci.h:95</div></div>
<div class="ttc" id="astructpcilib__s_html_a124451df7bcbe85a2d9b7e8cb19814f9"><div class="ttname"><a href="structpcilib__s.html#a124451df7bcbe85a2d9b7e8cb19814f9">pcilib_s::model</a></div><div class="ttdeci">char * model</div><div class="ttdoc">Requested model.</div><div class="ttdef"><b>Definition:</b> pci.h:71</div></div>
<div class="ttc" id="astructpcilib__s_html_a26546c777c20e8f6cf63687ff16631f6"><div class="ttname"><a href="structpcilib__s.html#a26546c777c20e8f6cf63687ff16631f6">pcilib_s::pci_cfg_space_fd</a></div><div class="ttdeci">int pci_cfg_space_fd</div><div class="ttdoc">File descriptor linking to PCI configuration space in sysfs.</div><div class="ttdef"><b>Definition:</b> pci.h:59</div></div>
<div class="ttc" id="astructpcilib__s_html_a41aa83dedb03a1021ea2e23604da3aaa"><div class="ttname"><a href="structpcilib__s.html#a41aa83dedb03a1021ea2e23604da3aaa">pcilib_s::dma_wlock</a></div><div class="ttdeci">pcilib_lock_t * dma_wlock[PCILIB_MAX_DMA_ENGINES]</div><div class="ttdoc">Per-engine locks to serialize write operations.</div><div class="ttdef"><b>Definition:</b> pci.h:102</div></div>
<div class="ttc" id="astructpcilib__s_html_a4b24f857efec07c254d2fa2226b59fda"><div class="ttname"><a href="structpcilib__s.html#a4b24f857efec07c254d2fa2226b59fda">pcilib_s::register_ctx</a></div><div class="ttdeci">pcilib_register_context_t * register_ctx</div><div class="ttdoc">Contexts for registers.</div><div class="ttdef"><b>Definition:</b> pci.h:87</div></div>
<div class="ttc" id="astructpcilib__s_html_a7ca0cb31d5012ca14369c8af6caa25d6"><div class="ttname"><a href="structpcilib__s.html#a7ca0cb31d5012ca14369c8af6caa25d6">pcilib_s::dma</a></div><div class="ttdeci">pcilib_dma_description_t dma</div><div class="ttdoc">Configuration of used DMA implementation.</div><div class="ttdef"><b>Definition:</b> pci.h:84</div></div>
<div class="ttc" id="astructpcilib__s_html_a7f86351902a0aa153ac9019099f0e30f"><div class="ttname"><a href="structpcilib__s.html#a7f86351902a0aa153ac9019099f0e30f">pcilib_s::locks</a></div><div class="ttdeci">struct pcilib_locking_s locks</div><div class="ttdoc">Context of locking subsystem.</div><div class="ttdef"><b>Definition:</b> pci.h:104</div></div>
<div class="ttc" id="astructpcilib__s_html_a81fc504bd03023f6d2a2f22fd2ee58ca"><div class="ttname"><a href="structpcilib__s.html#a81fc504bd03023f6d2a2f22fd2ee58ca">pcilib_s::dma_ctx</a></div><div class="ttdeci">pcilib_dma_context_t * dma_ctx</div><div class="ttdoc">DMA context.</div><div class="ttdef"><b>Definition:</b> pci.h:89</div></div>
<div class="ttc" id="astructpcilib__s_html_a887deef86e2af6248df3326302bbce00"><div class="ttname"><a href="structpcilib__s.html#a887deef86e2af6248df3326302bbce00">pcilib_s::event_ctx</a></div><div class="ttdeci">pcilib_context_t * event_ctx</div><div class="ttdoc">Implmentation context.</div><div class="ttdef"><b>Definition:</b> pci.h:90</div></div>
<div class="ttc" id="astructpcilib__s_html_a90b4d45dc1e79a725ca1478bbe753b17"><div class="ttname"><a href="structpcilib__s.html#a90b4d45dc1e79a725ca1478bbe753b17">pcilib_s::kmem_list</a></div><div class="ttdeci">pcilib_kmem_list_t * kmem_list</div><div class="ttdoc">List of currently allocated kernel memory.</div><div class="ttdef"><b>Definition:</b> pci.h:69</div></div>
<div class="ttc" id="astructpcilib__s_html_a97959ae9b1ab77309f0afec2b62d283c"><div class="ttname"><a href="structpcilib__s.html#a97959ae9b1ab77309f0afec2b62d283c">pcilib_s::handle</a></div><div class="ttdeci">int handle</div><div class="ttdoc">file handle of device</div><div class="ttdef"><b>Definition:</b> pci.h:48</div></div>
<div class="ttc" id="astructpcilib__s_html_a9f6bc50561128b6e7f78296f23db134a"><div class="ttname"><a href="structpcilib__s.html#a9f6bc50561128b6e7f78296f23db134a">pcilib_s::registers</a></div><div class="ttdeci">pcilib_register_description_t * registers</div><div class="ttdoc">List of currently defined registers (from all sources)</div><div class="ttdef"><b>Definition:</b> pci.h:80</div></div>
<div class="ttc" id="astructpcilib__s_html_aaee187fc94e8ce9d8666582e95b68d65"><div class="ttname"><a href="structpcilib__s.html#aaee187fc94e8ce9d8666582e95b68d65">pcilib_s::bar_space</a></div><div class="ttdeci">char * bar_space[PCILIB_MAX_BARS]</div><div class="ttdoc">Pointers to the mapped BARs in virtual address space.</div><div class="ttdef"><b>Definition:</b> pci.h:56</div></div>
<div class="ttc" id="astructpcilib__s_html_adc051b44d856035c537395e413bd907a"><div class="ttname"><a href="structpcilib__s.html#adc051b44d856035c537395e413bd907a">pcilib_s::event_plugin</a></div><div class="ttdeci">void * event_plugin</div><div class="ttdoc">Currently loaded event engine.</div><div class="ttdef"><b>Definition:</b> pci.h:72</div></div>
<div class="ttc" id="astructpcilib__s_html_af0bbd1334a8cb708cfa331d833be25e3"><div class="ttname"><a href="structpcilib__s.html#af0bbd1334a8cb708cfa331d833be25e3">pcilib_s::views</a></div><div class="ttdeci">pcilib_view_description_t ** views</div><div class="ttdoc">list of currently defined views</div><div class="ttdef"><b>Definition:</b> pci.h:94</div></div>
<div class="ttc" id="astructpcilib__s_html_afd7b157b8796cfbb55404c2912e793f3"><div class="ttname"><a href="structpcilib__s.html#afd7b157b8796cfbb55404c2912e793f3">pcilib_s::dma_rlock</a></div><div class="ttdeci">pcilib_lock_t * dma_rlock[PCILIB_MAX_DMA_ENGINES]</div><div class="ttdoc">Per-engine locks to serialize streaming and read operations.</div><div class="ttdef"><b>Definition:</b> pci.h:101</div></div>
<div class="ttc" id="aunit_8c_html_ac6d4f7a96df89f7a429e64886754e2cc"><div class="ttname"><a href="unit_8c.html#ac6d4f7a96df89f7a429e64886754e2cc">pcilib_clean_units</a></div><div class="ttdeci">void pcilib_clean_units(pcilib_t *ctx, pcilib_unit_t start)</div><div class="ttdoc">Destroys data associated with units.</div><div class="ttdef"><b>Definition:</b> unit.c:65</div></div>
<div class="ttc" id="aview_8c_html_a2fba2a8319859f6c23ecda7bef263936"><div class="ttname"><a href="view_8c.html#a2fba2a8319859f6c23ecda7bef263936">pcilib_clean_views</a></div><div class="ttdeci">void pcilib_clean_views(pcilib_t *ctx, pcilib_view_t start)</div><div class="ttdoc">Destroys data associated with views.</div><div class="ttdef"><b>Definition:</b> view.c:117</div></div>
<div class="ttc" id="axml_8c_html_a6ac489fe7cc07c6b9d890394faea96fa"><div class="ttname"><a href="xml_8c.html#a6ac489fe7cc07c6b9d890394faea96fa">pcilib_free_xml</a></div><div class="ttdeci">void pcilib_free_xml(pcilib_t *ctx)</div><div class="ttdoc">Cleans up memory used by various XML structures.</div><div class="ttdef"><b>Definition:</b> xml.c:1223</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="structpcilib__dma__description__t.html#a65df2efa3f37b7c5cf8acdbe8d23283b">pcilib_dma_description_t::api</a>, <a class="el" href="structpcilib__model__description__t.html#a621b57704843da1a23291324398b9cd5">pcilib_model_description_t::api</a>, <a class="el" href="structpcilib__s.html#aaee187fc94e8ce9d8666582e95b68d65">pcilib_s::bar_space</a>, <a class="el" href="structpcilib__s.html#a7ca0cb31d5012ca14369c8af6caa25d6">pcilib_s::dma</a>, <a class="el" href="structpcilib__s.html#a81fc504bd03023f6d2a2f22fd2ee58ca">pcilib_s::dma_ctx</a>, <a class="el" href="structpcilib__s.html#afd7b157b8796cfbb55404c2912e793f3">pcilib_s::dma_rlock</a>, <a class="el" href="structpcilib__s.html#a41aa83dedb03a1021ea2e23604da3aaa">pcilib_s::dma_wlock</a>, <a class="el" href="structpcilib__s.html#a887deef86e2af6248df3326302bbce00">pcilib_s::event_ctx</a>, <a class="el" href="structpcilib__s.html#adc051b44d856035c537395e413bd907a">pcilib_s::event_plugin</a>, <a class="el" href="structpcilib__event__api__description__t.html#a9e92d79edfc0d657a58c94404e7f3199">pcilib_event_api_description_t::free</a>, <a class="el" href="structpcilib__dma__api__description__t.html#a803e1038fa9528ceca72d736332a6a12">pcilib_dma_api_description_t::free</a>, <a class="el" href="structpcilib__s.html#a97959ae9b1ab77309f0afec2b62d283c">pcilib_s::handle</a>, <a class="el" href="structpcilib__locking__s.html#a52775864cf84b5663e1e8c0f9b9738da">pcilib_locking_s::kmem</a>, <a class="el" href="structpcilib__s.html#a90b4d45dc1e79a725ca1478bbe753b17">pcilib_s::kmem_list</a>, <a class="el" href="structpcilib__s.html#a7f86351902a0aa153ac9019099f0e30f">pcilib_s::locks</a>, <a class="el" href="structpcilib__s.html#a124451df7bcbe85a2d9b7e8cb19814f9">pcilib_s::model</a>, <a class="el" href="structpcilib__s.html#a26546c777c20e8f6cf63687ff16631f6">pcilib_s::pci_cfg_space_fd</a>, <a class="el" href="register_8c.html#a4fadb52b2487bc1196be90a9bcf09fdc">pcilib_clean_registers()</a>, <a class="el" href="unit_8c.html#ac6d4f7a96df89f7a429e64886754e2cc">pcilib_clean_units()</a>, <a class="el" href="view_8c.html#a2fba2a8319859f6c23ecda7bef263936">pcilib_clean_views()</a>, <a class="el" href="kmem_8c.html#a77eed4dcaa5a719b767ed275c332148e">pcilib_free_kernel_memory()</a>, <a class="el" href="locking_8c.html#a0cc8f6c273bcc2fffce974f686dffee0">pcilib_free_locking()</a>, <a class="el" href="py_8c.html#a67b23abbb0fa81e33525e8fd34ea28fd">pcilib_free_py()</a>, <a class="el" href="bank_8c.html#a6aaad6dc76ed23efacb455438be5c27a">pcilib_free_register_banks()</a>, <a class="el" href="xml_8c.html#a6ac489fe7cc07c6b9d890394faea96fa">pcilib_free_xml()</a>, <a class="el" href="model_8c.html#ae7954738bb4b923ee87520c4538ba873">pcilib_get_model_description()</a>, <a class="el" href="lock_8h.html#aac523db17d247c418fb56dbc279113d0adc99e7d1690b7856bc3459cdaa9a3ebe">PCILIB_LOCK_FLAGS_DEFAULT</a>, <a class="el" href="pci_8h.html#afba0cbe7c423100d1d6dc2a1475507f4">PCILIB_MAX_BARS</a>, <a class="el" href="pci_8h.html#a73d2542cb527e29bda21cbe267a18a0a">PCILIB_MAX_DMA_ENGINES</a>, <a class="el" href="plugin_8c.html#ab422ef9bcc665787bf78d2a8cf4facc4">pcilib_plugin_close()</a>, <a class="el" href="locking_8c.html#aa74086b52f341fbc7807824a6bacf5e7">pcilib_return_lock()</a>, <a class="el" href="bar_8c.html#a4ce1cd3017c15f543dc5b6bce5d5081f">pcilib_unmap_bar()</a>, <a class="el" href="error_8h.html#a62fff84bc7941d1a39700b931716bbe9">pcilib_warning</a>, <a class="el" href="structpcilib__s.html#a4b24f857efec07c254d2fa2226b59fda">pcilib_s::register_ctx</a>, <a class="el" href="structpcilib__s.html#a9f6bc50561128b6e7f78296f23db134a">pcilib_s::registers</a>, <a class="el" href="structpcilib__s.html#a05d5ea2f170c18f320ae1ce7d05e378f">pcilib_s::units</a>, and <a class="el" href="structpcilib__s.html#af0bbd1334a8cb708cfa331d833be25e3">pcilib_s::views</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__public__api.html#gaa6d33dcd1de77fa87c66276653c164a0">pcilib_open()</a>.</p>

</div>
</div>
<a id="gaa6d33dcd1de77fa87c66276653c164a0" name="gaa6d33dcd1de77fa87c66276653c164a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa6d33dcd1de77fa87c66276653c164a0">&#9670;&#160;</a></span>pcilib_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> * pcilib_open </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>device</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>model</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes pcilib context, detects model configuration, and populates model-specific registers. </p>
<p >Event and DMA engines will not be started automatically, but calls to <a class="el" href="group__public__api__event.html#gac332a0187e8005d876393bb7332a6284" title="Analyzes current configuration, allocates necessary buffers and spawns required data processing threa...">pcilib_start()</a> / <a class="el" href="group__public__api__dma.html#ga3acfaf4ab317d091c72c85bfd9bdde3d" title="Starts DMA engine.">pcilib_start_dma()</a> are provided for this purpose. In the end, the context should be cleaned using <a class="el" href="group__public__api__event.html#gaabe07187e09967ce6d825d60beeabc9c" title="Stops event grabbing and optionally cleans up the used memory.">pcilib_stop()</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">device</td><td>- path to the device file [/dev/fpga0] </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">model</td><td>- specifies the model of hardware, autodetected if NULL is passed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- initialized context or NULL in the case of error </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  101</span>                                                             {</div>
<div class="line"><span class="lineno">  102</span>    <span class="keywordtype">int</span> err, xmlerr;</div>
<div class="line"><span class="lineno">  103</span>    <a class="code hl_struct" href="structpcilib__s.html">pcilib_t</a> *ctx = malloc(<span class="keyword">sizeof</span>(<a class="code hl_struct" href="structpcilib__s.html">pcilib_t</a>));</div>
<div class="line"><span class="lineno">  104</span>    <span class="keyword">const</span> pcilib_board_info_t *board_info;</div>
<div class="line"><span class="lineno">  105</span>    <span class="keyword">const</span> pcilib_driver_version_t *drv_version;</div>
<div class="line"><span class="lineno">  106</span>        </div>
<div class="line"><span class="lineno">  107</span>    <span class="keywordflow">if</span> (!model)</div>
<div class="line"><span class="lineno">  108</span>        model = getenv(<span class="stringliteral">&quot;PCILIB_MODEL&quot;</span>);</div>
<div class="line"><span class="lineno">  109</span> </div>
<div class="line"><span class="lineno">  110</span>    <span class="keywordflow">if</span> (ctx) {</div>
<div class="line"><span class="lineno">  111</span>        memset(ctx, 0, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structpcilib__s.html">pcilib_t</a>));</div>
<div class="line"><span class="lineno">  112</span>        ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a26546c777c20e8f6cf63687ff16631f6">pci_cfg_space_fd</a> = -1;</div>
<div class="line"><span class="lineno">  113</span>        </div>
<div class="line"><span class="lineno">  114</span>        ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a97959ae9b1ab77309f0afec2b62d283c">handle</a> = open(device, O_RDWR);</div>
<div class="line"><span class="lineno">  115</span>        <span class="keywordflow">if</span> (ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a97959ae9b1ab77309f0afec2b62d283c">handle</a> &lt; 0) {</div>
<div class="line"><span class="lineno">  116</span>            <a class="code hl_define" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>(<span class="stringliteral">&quot;Error opening device (%s)&quot;</span>, device);</div>
<div class="line"><span class="lineno">  117</span>            free(ctx);</div>
<div class="line"><span class="lineno">  118</span>            <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  119</span>        }</div>
<div class="line"><span class="lineno">  120</span>        </div>
<div class="line"><span class="lineno">  121</span>        drv_version = <a class="code hl_function" href="pci_8c.html#a0a9b10b6ffc6cc39a50d166be7a30d1a">pcilib_get_driver_version</a>(ctx);</div>
<div class="line"><span class="lineno">  122</span>        <span class="keywordflow">if</span> (!drv_version) {</div>
<div class="line"><span class="lineno">  123</span>            <a class="code hl_define" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>(<span class="stringliteral">&quot;Driver verification has failed (%s)&quot;</span>, device);</div>
<div class="line"><span class="lineno">  124</span>            free(ctx);</div>
<div class="line"><span class="lineno">  125</span>            <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  126</span>        }</div>
<div class="line"><span class="lineno">  127</span>        </div>
<div class="line"><span class="lineno">  128</span>        ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a3b8d32830b2e29cb8dadcd73bb5fd063">page_mask</a> = <a class="code hl_function" href="cpu_8c.html#a4306761bf732dce22b630e026943d5cb">pcilib_get_page_mask</a>();</div>
<div class="line"><span class="lineno">  129</span>        </div>
<div class="line"><span class="lineno">  130</span>        <span class="keywordflow">if</span> ((model)&amp;&amp;(!strcasecmp(model, <span class="stringliteral">&quot;maintenance&quot;</span>))) {</div>
<div class="line"><span class="lineno">  131</span>            ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a124451df7bcbe85a2d9b7e8cb19814f9">model</a> = strdup(<span class="stringliteral">&quot;maintenance&quot;</span>);</div>
<div class="line"><span class="lineno">  132</span>            <span class="keywordflow">return</span> ctx;</div>
<div class="line"><span class="lineno">  133</span>        }</div>
<div class="line"><span class="lineno">  134</span> </div>
<div class="line"><span class="lineno">  135</span>        board_info = <a class="code hl_function" href="pci_8c.html#a74c205347b831faad18ebe3322d715a7">pcilib_get_board_info</a>(ctx);</div>
<div class="line"><span class="lineno">  136</span>        <span class="keywordflow">if</span> (!board_info) {</div>
<div class="line"><span class="lineno">  137</span>            <a class="code hl_define" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>(<span class="stringliteral">&quot;Failed to enumerate PCI device&quot;</span>);</div>
<div class="line"><span class="lineno">  138</span>            <a class="code hl_function" href="group__public__api.html#ga809b61586ed9c56a7510c607859e75e3">pcilib_close</a>(ctx);</div>
<div class="line"><span class="lineno">  139</span>            <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  140</span>        }</div>
<div class="line"><span class="lineno">  141</span> </div>
<div class="line"><span class="lineno">  142</span>            <span class="comment">// Check if model is specified in the XML configuration</span></div>
<div class="line"><span class="lineno">  143</span>        <span class="keywordflow">if</span> (!model)</div>
<div class="line"><span class="lineno">  144</span>            model = <a class="code hl_function" href="xml_8c.html#a3e414d1784f22fa9a026b424dbe0cf71">pcilib_detect_xml_model</a>(ctx, board_info-&gt;vendor_id, board_info-&gt;device_id);</div>
<div class="line"><span class="lineno">  145</span> </div>
<div class="line"><span class="lineno">  146</span>        err = <a class="code hl_function" href="locking_8c.html#af688eeaa5170de223b3af7e4e7c211e0">pcilib_init_locking</a>(ctx);</div>
<div class="line"><span class="lineno">  147</span>        <span class="keywordflow">if</span> (err) {</div>
<div class="line"><span class="lineno">  148</span>            <a class="code hl_define" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>(<span class="stringliteral">&quot;Error (%i) initializing locking subsystem&quot;</span>, err);</div>
<div class="line"><span class="lineno">  149</span>            <a class="code hl_function" href="group__public__api.html#ga809b61586ed9c56a7510c607859e75e3">pcilib_close</a>(ctx);</div>
<div class="line"><span class="lineno">  150</span>            <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  151</span>        }</div>
<div class="line"><span class="lineno">  152</span>        </div>
<div class="line"><span class="lineno">  153</span>        err = <a class="code hl_function" href="py_8c.html#a3e58b4a87c12b0e76ccd6e3b09035d23">pcilib_init_py</a>(ctx);</div>
<div class="line"><span class="lineno">  154</span>        <span class="keywordflow">if</span> (err) {</div>
<div class="line"><span class="lineno">  155</span>            <a class="code hl_define" href="error_8h.html#a62fff84bc7941d1a39700b931716bbe9">pcilib_warning</a>(<span class="stringliteral">&quot;Error (%i) initializing python subsystem&quot;</span>, err);</div>
<div class="line"><span class="lineno">  156</span>            <a class="code hl_function" href="py_8c.html#a67b23abbb0fa81e33525e8fd34ea28fd">pcilib_free_py</a>(ctx);</div>
<div class="line"><span class="lineno">  157</span>        }</div>
<div class="line"><span class="lineno">  158</span> </div>
<div class="line"><span class="lineno">  159</span> </div>
<div class="line"><span class="lineno">  160</span>        ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a8c3ebd9b2e22105970a21d4f8b7564db">alloc_reg</a> = <a class="code hl_define" href="pci_8h.html#a5d23615582dd63a38451f57cbe1b4d06">PCILIB_DEFAULT_REGISTER_SPACE</a>;</div>
<div class="line"><span class="lineno">  161</span>        ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#af97bbf6079a97d4490377dc92310f1f5">alloc_views</a> = <a class="code hl_define" href="pci_8h.html#ad91ab6d54425bdd3f0459e054e40935f">PCILIB_DEFAULT_VIEW_SPACE</a>;</div>
<div class="line"><span class="lineno">  162</span>        ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a30e41f6841c2ed17baa317311a5765d5">alloc_units</a> = <a class="code hl_define" href="pci_8h.html#a07c3da3f8efe072251e55f6293594127">PCILIB_DEFAULT_UNIT_SPACE</a>;</div>
<div class="line"><span class="lineno">  163</span>        ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a9f6bc50561128b6e7f78296f23db134a">registers</a> = (<a class="code hl_struct" href="structpcilib__register__description__t.html">pcilib_register_description_t</a> *)malloc(<a class="code hl_define" href="pci_8h.html#a5d23615582dd63a38451f57cbe1b4d06">PCILIB_DEFAULT_REGISTER_SPACE</a> * <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structpcilib__register__description__t.html">pcilib_register_description_t</a>));</div>
<div class="line"><span class="lineno">  164</span>        ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a4b24f857efec07c254d2fa2226b59fda">register_ctx</a> = (<a class="code hl_struct" href="structpcilib__register__context__t.html">pcilib_register_context_t</a> *)malloc(<a class="code hl_define" href="pci_8h.html#a5d23615582dd63a38451f57cbe1b4d06">PCILIB_DEFAULT_REGISTER_SPACE</a> * <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structpcilib__register__context__t.html">pcilib_register_context_t</a>));</div>
<div class="line"><span class="lineno">  165</span>        ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#af0bbd1334a8cb708cfa331d833be25e3">views</a> = (<a class="code hl_struct" href="structpcilib__view__description__s.html">pcilib_view_description_t</a>**)malloc(<a class="code hl_define" href="pci_8h.html#ad91ab6d54425bdd3f0459e054e40935f">PCILIB_DEFAULT_VIEW_SPACE</a> * <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structpcilib__view__description__s.html">pcilib_view_description_t</a>*));</div>
<div class="line"><span class="lineno">  166</span>        ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a05d5ea2f170c18f320ae1ce7d05e378f">units</a> = (<a class="code hl_struct" href="structpcilib__unit__description__t.html">pcilib_unit_description_t</a>*)malloc(<a class="code hl_define" href="pci_8h.html#a07c3da3f8efe072251e55f6293594127">PCILIB_DEFAULT_UNIT_SPACE</a> * <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structpcilib__unit__description__t.html">pcilib_unit_description_t</a>));</div>
<div class="line"><span class="lineno">  167</span>        </div>
<div class="line"><span class="lineno">  168</span>        <span class="keywordflow">if</span> ((!ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a9f6bc50561128b6e7f78296f23db134a">registers</a>)||(!ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a4b24f857efec07c254d2fa2226b59fda">register_ctx</a>)||(!ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#af0bbd1334a8cb708cfa331d833be25e3">views</a>)||(!ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a05d5ea2f170c18f320ae1ce7d05e378f">units</a>)) {</div>
<div class="line"><span class="lineno">  169</span>            <a class="code hl_define" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>(<span class="stringliteral">&quot;Error allocating memory for register model&quot;</span>);</div>
<div class="line"><span class="lineno">  170</span>            <a class="code hl_function" href="group__public__api.html#ga809b61586ed9c56a7510c607859e75e3">pcilib_close</a>(ctx);</div>
<div class="line"><span class="lineno">  171</span>            <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  172</span>        }</div>
<div class="line"><span class="lineno">  173</span>        </div>
<div class="line"><span class="lineno">  174</span>        memset(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a9f6bc50561128b6e7f78296f23db134a">registers</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structpcilib__register__description__t.html">pcilib_register_description_t</a>));</div>
<div class="line"><span class="lineno">  175</span>        memset(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a05d5ea2f170c18f320ae1ce7d05e378f">units</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="pcilib_8h.html#ad969fce8a73484aa5f74ba8c125427b8">pcilib_unit_t</a>));</div>
<div class="line"><span class="lineno">  176</span>        memset(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#af0bbd1334a8cb708cfa331d833be25e3">views</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_typedef" href="pcilib_8h.html#aaecd82ed7c5a8c92b8e08c06c21b8c25">pcilib_view_t</a>*));</div>
<div class="line"><span class="lineno">  177</span>        memset(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a7f2f82869f7b6acd3a0cfba9dc4a00ed">banks</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structpcilib__register__bank__description__t.html">pcilib_register_bank_description_t</a>));</div>
<div class="line"><span class="lineno">  178</span>        memset(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a204e280481f826289ca05b2c588f30d2">ranges</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structpcilib__register__range__t.html">pcilib_register_range_t</a>));</div>
<div class="line"><span class="lineno">  179</span> </div>
<div class="line"><span class="lineno">  180</span>        memset(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a4b24f857efec07c254d2fa2226b59fda">register_ctx</a>, 0, <a class="code hl_define" href="pci_8h.html#a5d23615582dd63a38451f57cbe1b4d06">PCILIB_DEFAULT_REGISTER_SPACE</a> * <span class="keyword">sizeof</span>(<a class="code hl_struct" href="structpcilib__register__context__t.html">pcilib_register_context_t</a>));</div>
<div class="line"><span class="lineno">  181</span> </div>
<div class="line"><span class="lineno">  182</span>        <a class="code hl_function" href="bank_8c.html#a98831e48d2e98f52418b1cfff7d66ee6">pcilib_add_register_protocols</a>(ctx, <a class="code hl_enumvalue" href="bank_8h.html#ab2b604364494c4bb061e3c8ff75b3565afa2f073b46b5612ad6f1376df9c099f1">PCILIB_MODEL_MODIFICATON_FLAGS_DEFAULT</a>, 0, <a class="code hl_variable" href="export_8c.html#aec82fd51fdb3e51284c013fa860dac75">pcilib_standard_register_protocols</a>, NULL);</div>
<div class="line"><span class="lineno">  183</span>        <a class="code hl_function" href="bank_8c.html#a1222fd326a61501597298c3e7e18ae5c">pcilib_add_register_banks</a>(ctx, <a class="code hl_enumvalue" href="bank_8h.html#ab2b604364494c4bb061e3c8ff75b3565afa2f073b46b5612ad6f1376df9c099f1">PCILIB_MODEL_MODIFICATON_FLAGS_DEFAULT</a>, 0, <a class="code hl_variable" href="export_8c.html#a7e213c0db82acec7467fb8c0c6621c51">pcilib_standard_register_banks</a>, NULL);</div>
<div class="line"><span class="lineno">  184</span>        <a class="code hl_function" href="register_8c.html#aec9a0672eddac26362760345cea77508">pcilib_add_registers</a>(ctx, <a class="code hl_enumvalue" href="bank_8h.html#ab2b604364494c4bb061e3c8ff75b3565afa2f073b46b5612ad6f1376df9c099f1">PCILIB_MODEL_MODIFICATON_FLAGS_DEFAULT</a>, 0, <a class="code hl_variable" href="export_8c.html#a3ed52ebd14260696c1818b5a2e8e0119">pcilib_standard_registers</a>, NULL);</div>
<div class="line"><span class="lineno">  185</span> </div>
<div class="line"><span class="lineno">  186</span>        err = pcilib_detect_model(ctx, model);</div>
<div class="line"><span class="lineno">  187</span>        <span class="keywordflow">if</span> ((err)&amp;&amp;(err != <a class="code hl_enumvalue" href="error_8h.html#a0c59f7091fd2446121868635aca9e60cad21a896d5d5aaee0682c410b9bed283c">PCILIB_ERROR_NOTFOUND</a>)) {</div>
<div class="line"><span class="lineno">  188</span>            <a class="code hl_define" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>(<span class="stringliteral">&quot;Error (%i) configuring model %s (%x:%x)&quot;</span>, err, (model?model:<span class="stringliteral">&quot;&quot;</span>), board_info-&gt;vendor_id, board_info-&gt;device_id);</div>
<div class="line"><span class="lineno">  189</span>            <a class="code hl_function" href="group__public__api.html#ga809b61586ed9c56a7510c607859e75e3">pcilib_close</a>(ctx);</div>
<div class="line"><span class="lineno">  190</span>            <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  191</span>        }</div>
<div class="line"><span class="lineno">  192</span> </div>
<div class="line"><span class="lineno">  193</span>        <span class="keywordflow">if</span> (!ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a124451df7bcbe85a2d9b7e8cb19814f9">model</a>)</div>
<div class="line"><span class="lineno">  194</span>            ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a124451df7bcbe85a2d9b7e8cb19814f9">model</a> = strdup(model?model:<span class="stringliteral">&quot;pci&quot;</span>);</div>
<div class="line"><span class="lineno">  195</span> </div>
<div class="line"><span class="lineno">  196</span>        err = <a class="code hl_function" href="py_8c.html#a6b826f5624bd3198cf2f966ab73bf284">pcilib_py_add_script_dir</a>(ctx, NULL);</div>
<div class="line"><span class="lineno">  197</span>        <span class="keywordflow">if</span> (err) {</div>
<div class="line"><span class="lineno">  198</span>            <a class="code hl_define" href="error_8h.html#a62fff84bc7941d1a39700b931716bbe9">pcilib_warning</a>(<span class="stringliteral">&quot;Error (%i) add script path to python path&quot;</span>, err);</div>
<div class="line"><span class="lineno">  199</span>            <a class="code hl_function" href="py_8c.html#a67b23abbb0fa81e33525e8fd34ea28fd">pcilib_free_py</a>(ctx);</div>
<div class="line"><span class="lineno">  200</span>            err = 0;</div>
<div class="line"><span class="lineno">  201</span>        }</div>
<div class="line"><span class="lineno">  202</span> </div>
<div class="line"><span class="lineno">  203</span> </div>
<div class="line"><span class="lineno">  204</span>        xmlerr = <a class="code hl_function" href="xml_8c.html#a57b7c7b9b4dd3df0d201888b7b50ae79">pcilib_init_xml</a>(ctx, ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a124451df7bcbe85a2d9b7e8cb19814f9">model</a>);</div>
<div class="line"><span class="lineno">  205</span>        <span class="keywordflow">if</span> ((xmlerr)&amp;&amp;(xmlerr != <a class="code hl_enumvalue" href="error_8h.html#a0c59f7091fd2446121868635aca9e60cad21a896d5d5aaee0682c410b9bed283c">PCILIB_ERROR_NOTFOUND</a>)) {</div>
<div class="line"><span class="lineno">  206</span>            <a class="code hl_define" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>(<span class="stringliteral">&quot;Error (%i) initializing XML subsystem for model %s&quot;</span>, xmlerr, ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a124451df7bcbe85a2d9b7e8cb19814f9">model</a>);</div>
<div class="line"><span class="lineno">  207</span>            <a class="code hl_function" href="group__public__api.html#ga809b61586ed9c56a7510c607859e75e3">pcilib_close</a>(ctx);</div>
<div class="line"><span class="lineno">  208</span>            <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  209</span>        }</div>
<div class="line"><span class="lineno">  210</span> </div>
<div class="line"><span class="lineno">  211</span> </div>
<div class="line"><span class="lineno">  212</span>            <span class="comment">// We have found neither standard model nor XML</span></div>
<div class="line"><span class="lineno">  213</span>        <span class="keywordflow">if</span> ((err)&amp;&amp;(xmlerr)) {</div>
<div class="line"><span class="lineno">  214</span>            <a class="code hl_define" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>(<span class="stringliteral">&quot;The specified model (%s) is not available&quot;</span>, model);</div>
<div class="line"><span class="lineno">  215</span>            <a class="code hl_function" href="group__public__api.html#ga809b61586ed9c56a7510c607859e75e3">pcilib_close</a>(ctx);</div>
<div class="line"><span class="lineno">  216</span>            <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  217</span>        }</div>
<div class="line"><span class="lineno">  218</span>        </div>
<div class="line"><span class="lineno">  219</span>        ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#ab08f82dd5bf659b498f798b1078fdf98">model_info</a>.<a class="code hl_variable" href="structpcilib__model__description__t.html#ab11f8776e3e8bb3e0a1fc50a5abf3a70">registers</a> = ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a9f6bc50561128b6e7f78296f23db134a">registers</a>;</div>
<div class="line"><span class="lineno">  220</span>        ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#ab08f82dd5bf659b498f798b1078fdf98">model_info</a>.<a class="code hl_variable" href="structpcilib__model__description__t.html#a6fddbe5370638b080c33d1907791d8a7">banks</a> = ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a7f2f82869f7b6acd3a0cfba9dc4a00ed">banks</a>;</div>
<div class="line"><span class="lineno">  221</span>        ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#ab08f82dd5bf659b498f798b1078fdf98">model_info</a>.<a class="code hl_variable" href="structpcilib__model__description__t.html#a5bd73383177aed43de8605026133c56e">protocols</a> = ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#ad167ccf9fea54556af78d95e1813f685">protocols</a>;</div>
<div class="line"><span class="lineno">  222</span>        ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#ab08f82dd5bf659b498f798b1078fdf98">model_info</a>.<a class="code hl_variable" href="structpcilib__model__description__t.html#a707be95ac3ce023f602a3a8ef6120a77">ranges</a> = ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a204e280481f826289ca05b2c588f30d2">ranges</a>;</div>
<div class="line"><span class="lineno">  223</span>        ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#ab08f82dd5bf659b498f798b1078fdf98">model_info</a>.<a class="code hl_variable" href="structpcilib__model__description__t.html#a99fd6d461bd26ac1407dec52f4ea217c">views</a> = (<span class="keyword">const</span> <a class="code hl_struct" href="structpcilib__view__description__s.html">pcilib_view_description_t</a>**)ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#af0bbd1334a8cb708cfa331d833be25e3">views</a>;</div>
<div class="line"><span class="lineno">  224</span>        ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#ab08f82dd5bf659b498f798b1078fdf98">model_info</a>.<a class="code hl_variable" href="structpcilib__model__description__t.html#a068c972a2e8dcc0294f195dbe5b6c7c3">units</a> = ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a05d5ea2f170c18f320ae1ce7d05e378f">units</a>;</div>
<div class="line"><span class="lineno">  225</span> </div>
<div class="line"><span class="lineno">  226</span>        err = <a class="code hl_function" href="bank_8c.html#a95ea0518e5c86b9ca1bbea948b5869bd">pcilib_init_register_banks</a>(ctx);</div>
<div class="line"><span class="lineno">  227</span>        <span class="keywordflow">if</span> (err) {</div>
<div class="line"><span class="lineno">  228</span>            <a class="code hl_define" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>(<span class="stringliteral">&quot;Error (%i) initializing regiser banks\n&quot;</span>, err);</div>
<div class="line"><span class="lineno">  229</span>            <a class="code hl_function" href="group__public__api.html#ga809b61586ed9c56a7510c607859e75e3">pcilib_close</a>(ctx);</div>
<div class="line"><span class="lineno">  230</span>            <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  231</span>        }</div>
<div class="line"><span class="lineno">  232</span>        err = <a class="code hl_function" href="event_8c.html#a1f922320e0edf453175b3a490075fdd8">pcilib_init_event_engine</a>(ctx);</div>
<div class="line"><span class="lineno">  233</span>        <span class="keywordflow">if</span> (err) {</div>
<div class="line"><span class="lineno">  234</span>            <a class="code hl_define" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>(<span class="stringliteral">&quot;Error (%i) initializing event engine\n&quot;</span>, err);</div>
<div class="line"><span class="lineno">  235</span>            <a class="code hl_function" href="group__public__api.html#ga809b61586ed9c56a7510c607859e75e3">pcilib_close</a>(ctx);</div>
<div class="line"><span class="lineno">  236</span>            <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno">  237</span>        }</div>
<div class="line"><span class="lineno">  238</span>    }</div>
<div class="line"><span class="lineno">  239</span> </div>
<div class="line"><span class="lineno">  240</span>    <span class="keywordflow">return</span> ctx;</div>
<div class="line"><span class="lineno">  241</span>}</div>
<div class="ttc" id="abank_8c_html_a1222fd326a61501597298c3e7e18ae5c"><div class="ttname"><a href="bank_8c.html#a1222fd326a61501597298c3e7e18ae5c">pcilib_add_register_banks</a></div><div class="ttdeci">int pcilib_add_register_banks(pcilib_t *ctx, pcilib_model_modification_flags_t flags, size_t n, const pcilib_register_bank_description_t *banks, pcilib_register_bank_t *ids)</div><div class="ttdoc">Use this function to add new register banks into the model or override configuration of the existing ...</div><div class="ttdef"><b>Definition:</b> bank.c:84</div></div>
<div class="ttc" id="abank_8c_html_a95ea0518e5c86b9ca1bbea948b5869bd"><div class="ttname"><a href="bank_8c.html#a95ea0518e5c86b9ca1bbea948b5869bd">pcilib_init_register_banks</a></div><div class="ttdeci">int pcilib_init_register_banks(pcilib_t *ctx)</div><div class="ttdoc">Initalizes context of register banks.</div><div class="ttdef"><b>Definition:</b> bank.c:20</div></div>
<div class="ttc" id="abank_8c_html_a98831e48d2e98f52418b1cfff7d66ee6"><div class="ttname"><a href="bank_8c.html#a98831e48d2e98f52418b1cfff7d66ee6">pcilib_add_register_protocols</a></div><div class="ttdeci">int pcilib_add_register_protocols(pcilib_t *ctx, pcilib_model_modification_flags_t flags, size_t n, const pcilib_register_protocol_description_t *protocols, pcilib_register_protocol_t *ids)</div><div class="ttdoc">Use this function to add new register protocols into the model.</div><div class="ttdef"><b>Definition:</b> bank.c:146</div></div>
<div class="ttc" id="abank_8h_html_ab2b604364494c4bb061e3c8ff75b3565afa2f073b46b5612ad6f1376df9c099f1"><div class="ttname"><a href="bank_8h.html#ab2b604364494c4bb061e3c8ff75b3565afa2f073b46b5612ad6f1376df9c099f1">PCILIB_MODEL_MODIFICATON_FLAGS_DEFAULT</a></div><div class="ttdeci">@ PCILIB_MODEL_MODIFICATON_FLAGS_DEFAULT</div><div class="ttdef"><b>Definition:</b> bank.h:36</div></div>
<div class="ttc" id="acpu_8c_html_a4306761bf732dce22b630e026943d5cb"><div class="ttname"><a href="cpu_8c.html#a4306761bf732dce22b630e026943d5cb">pcilib_get_page_mask</a></div><div class="ttdeci">int pcilib_get_page_mask()</div><div class="ttdoc">Return the mask of system memory page.</div><div class="ttdef"><b>Definition:</b> cpu.c:83</div></div>
<div class="ttc" id="aerror_8h_html_a0c59f7091fd2446121868635aca9e60cad21a896d5d5aaee0682c410b9bed283c"><div class="ttname"><a href="error_8h.html#a0c59f7091fd2446121868635aca9e60cad21a896d5d5aaee0682c410b9bed283c">PCILIB_ERROR_NOTFOUND</a></div><div class="ttdeci">@ PCILIB_ERROR_NOTFOUND</div><div class="ttdef"><b>Definition:</b> error.h:25</div></div>
<div class="ttc" id="aerror_8h_html_a2b06064fecffd095efabb752f7b50021"><div class="ttname"><a href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a></div><div class="ttdeci">#define pcilib_error(...)</div><div class="ttdef"><b>Definition:</b> error.h:68</div></div>
<div class="ttc" id="aevent_8c_html_a1f922320e0edf453175b3a490075fdd8"><div class="ttname"><a href="event_8c.html#a1f922320e0edf453175b3a490075fdd8">pcilib_init_event_engine</a></div><div class="ttdeci">int pcilib_init_event_engine(pcilib_t *ctx)</div><div class="ttdef"><b>Definition:</b> event.c:66</div></div>
<div class="ttc" id="aexport_8c_html_a3ed52ebd14260696c1818b5a2e8e0119"><div class="ttname"><a href="export_8c.html#a3ed52ebd14260696c1818b5a2e8e0119">pcilib_standard_registers</a></div><div class="ttdeci">const pcilib_register_description_t pcilib_standard_registers[]</div><div class="ttdef"><b>Definition:</b> export.c:27</div></div>
<div class="ttc" id="aexport_8c_html_a7e213c0db82acec7467fb8c0c6621c51"><div class="ttname"><a href="export_8c.html#a7e213c0db82acec7467fb8c0c6621c51">pcilib_standard_register_banks</a></div><div class="ttdeci">const pcilib_register_bank_description_t pcilib_standard_register_banks[]</div><div class="ttdef"><b>Definition:</b> export.c:22</div></div>
<div class="ttc" id="aexport_8c_html_aec82fd51fdb3e51284c013fa860dac75"><div class="ttname"><a href="export_8c.html#aec82fd51fdb3e51284c013fa860dac75">pcilib_standard_register_protocols</a></div><div class="ttdeci">const pcilib_register_protocol_description_t pcilib_standard_register_protocols[]</div><div class="ttdef"><b>Definition:</b> export.c:15</div></div>
<div class="ttc" id="agroup__public__api_html_ga809b61586ed9c56a7510c607859e75e3"><div class="ttname"><a href="group__public__api.html#ga809b61586ed9c56a7510c607859e75e3">pcilib_close</a></div><div class="ttdeci">void pcilib_close(pcilib_t *ctx)</div><div class="ttdoc">Destroy pcilib context and all memory associated with it.</div><div class="ttdef"><b>Definition:</b> pci.c:294</div></div>
<div class="ttc" id="alocking_8c_html_af688eeaa5170de223b3af7e4e7c211e0"><div class="ttname"><a href="locking_8c.html#af688eeaa5170de223b3af7e4e7c211e0">pcilib_init_locking</a></div><div class="ttdeci">int pcilib_init_locking(pcilib_t *ctx)</div><div class="ttdoc">this function gets the kernel space for the locks : if this space have been already initialized,...</div><div class="ttdef"><b>Definition:</b> locking.c:18</div></div>
<div class="ttc" id="apci_8c_html_a0a9b10b6ffc6cc39a50d166be7a30d1a"><div class="ttname"><a href="pci_8c.html#a0a9b10b6ffc6cc39a50d166be7a30d1a">pcilib_get_driver_version</a></div><div class="ttdeci">const pcilib_driver_version_t * pcilib_get_driver_version(pcilib_t *ctx)</div><div class="ttdef"><b>Definition:</b> pci.c:244</div></div>
<div class="ttc" id="apci_8c_html_a74c205347b831faad18ebe3322d715a7"><div class="ttname"><a href="pci_8c.html#a74c205347b831faad18ebe3322d715a7">pcilib_get_board_info</a></div><div class="ttdeci">const pcilib_board_info_t * pcilib_get_board_info(pcilib_t *ctx)</div><div class="ttdef"><b>Definition:</b> pci.c:272</div></div>
<div class="ttc" id="apci_8h_html_a07c3da3f8efe072251e55f6293594127"><div class="ttname"><a href="pci_8h.html#a07c3da3f8efe072251e55f6293594127">PCILIB_DEFAULT_UNIT_SPACE</a></div><div class="ttdeci">#define PCILIB_DEFAULT_UNIT_SPACE</div><div class="ttdoc">number of units to allocate on init</div><div class="ttdef"><b>Definition:</b> pci.h:12</div></div>
<div class="ttc" id="apci_8h_html_a5d23615582dd63a38451f57cbe1b4d06"><div class="ttname"><a href="pci_8h.html#a5d23615582dd63a38451f57cbe1b4d06">PCILIB_DEFAULT_REGISTER_SPACE</a></div><div class="ttdeci">#define PCILIB_DEFAULT_REGISTER_SPACE</div><div class="ttdoc">number of registers to allocate on init</div><div class="ttdef"><b>Definition:</b> pci.h:10</div></div>
<div class="ttc" id="apci_8h_html_ad91ab6d54425bdd3f0459e054e40935f"><div class="ttname"><a href="pci_8h.html#ad91ab6d54425bdd3f0459e054e40935f">PCILIB_DEFAULT_VIEW_SPACE</a></div><div class="ttdeci">#define PCILIB_DEFAULT_VIEW_SPACE</div><div class="ttdoc">number of views to allocate on init</div><div class="ttdef"><b>Definition:</b> pci.h:11</div></div>
<div class="ttc" id="apcilib_8h_html_aaecd82ed7c5a8c92b8e08c06c21b8c25"><div class="ttname"><a href="pcilib_8h.html#aaecd82ed7c5a8c92b8e08c06c21b8c25">pcilib_view_t</a></div><div class="ttdeci">uint16_t pcilib_view_t</div><div class="ttdoc">Type holding the register view position within view listing in the model.</div><div class="ttdef"><b>Definition:</b> pcilib.h:16</div></div>
<div class="ttc" id="apcilib_8h_html_ad969fce8a73484aa5f74ba8c125427b8"><div class="ttname"><a href="pcilib_8h.html#ad969fce8a73484aa5f74ba8c125427b8">pcilib_unit_t</a></div><div class="ttdeci">uint16_t pcilib_unit_t</div><div class="ttdoc">Type holding the value unit position within unit listing in the model.</div><div class="ttdef"><b>Definition:</b> pcilib.h:17</div></div>
<div class="ttc" id="apy_8c_html_a3e58b4a87c12b0e76ccd6e3b09035d23"><div class="ttname"><a href="py_8c.html#a3e58b4a87c12b0e76ccd6e3b09035d23">pcilib_init_py</a></div><div class="ttdeci">int pcilib_init_py(pcilib_t *ctx)</div><div class="ttdoc">Initializes Python engine.</div><div class="ttdef"><b>Definition:</b> py.c:260</div></div>
<div class="ttc" id="apy_8c_html_a6b826f5624bd3198cf2f966ab73bf284"><div class="ttname"><a href="py_8c.html#a6b826f5624bd3198cf2f966ab73bf284">pcilib_py_add_script_dir</a></div><div class="ttdeci">int pcilib_py_add_script_dir(pcilib_t *ctx, const char *dir)</div><div class="ttdoc">Add an additional path to look for python scripts.</div><div class="ttdef"><b>Definition:</b> py.c:366</div></div>
<div class="ttc" id="aregister_8c_html_aec9a0672eddac26362760345cea77508"><div class="ttname"><a href="register_8c.html#aec9a0672eddac26362760345cea77508">pcilib_add_registers</a></div><div class="ttdeci">int pcilib_add_registers(pcilib_t *ctx, pcilib_model_modification_flags_t flags, size_t n, const pcilib_register_description_t *registers, pcilib_register_t *ids)</div><div class="ttdoc">Use this function to add new registers into the model.</div><div class="ttdef"><b>Definition:</b> register.c:25</div></div>
<div class="ttc" id="astructpcilib__model__description__t_html_a068c972a2e8dcc0294f195dbe5b6c7c3"><div class="ttname"><a href="structpcilib__model__description__t.html#a068c972a2e8dcc0294f195dbe5b6c7c3">pcilib_model_description_t::units</a></div><div class="ttdeci">const pcilib_unit_description_t * units</div><div class="ttdef"><b>Definition:</b> model.h:23</div></div>
<div class="ttc" id="astructpcilib__model__description__t_html_a5bd73383177aed43de8605026133c56e"><div class="ttname"><a href="structpcilib__model__description__t.html#a5bd73383177aed43de8605026133c56e">pcilib_model_description_t::protocols</a></div><div class="ttdeci">const pcilib_register_protocol_description_t * protocols</div><div class="ttdef"><b>Definition:</b> model.h:20</div></div>
<div class="ttc" id="astructpcilib__model__description__t_html_a6fddbe5370638b080c33d1907791d8a7"><div class="ttname"><a href="structpcilib__model__description__t.html#a6fddbe5370638b080c33d1907791d8a7">pcilib_model_description_t::banks</a></div><div class="ttdeci">const pcilib_register_bank_description_t * banks</div><div class="ttdef"><b>Definition:</b> model.h:19</div></div>
<div class="ttc" id="astructpcilib__model__description__t_html_a707be95ac3ce023f602a3a8ef6120a77"><div class="ttname"><a href="structpcilib__model__description__t.html#a707be95ac3ce023f602a3a8ef6120a77">pcilib_model_description_t::ranges</a></div><div class="ttdeci">const pcilib_register_range_t * ranges</div><div class="ttdef"><b>Definition:</b> model.h:21</div></div>
<div class="ttc" id="astructpcilib__model__description__t_html_a99fd6d461bd26ac1407dec52f4ea217c"><div class="ttname"><a href="structpcilib__model__description__t.html#a99fd6d461bd26ac1407dec52f4ea217c">pcilib_model_description_t::views</a></div><div class="ttdeci">const pcilib_view_description_t ** views</div><div class="ttdef"><b>Definition:</b> model.h:22</div></div>
<div class="ttc" id="astructpcilib__model__description__t_html_ab11f8776e3e8bb3e0a1fc50a5abf3a70"><div class="ttname"><a href="structpcilib__model__description__t.html#ab11f8776e3e8bb3e0a1fc50a5abf3a70">pcilib_model_description_t::registers</a></div><div class="ttdeci">const pcilib_register_description_t * registers</div><div class="ttdef"><b>Definition:</b> model.h:18</div></div>
<div class="ttc" id="astructpcilib__register__bank__description__t_html"><div class="ttname"><a href="structpcilib__register__bank__description__t.html">pcilib_register_bank_description_t</a></div><div class="ttdef"><b>Definition:</b> bank.h:70</div></div>
<div class="ttc" id="astructpcilib__register__context__t_html"><div class="ttname"><a href="structpcilib__register__context__t.html">pcilib_register_context_t</a></div><div class="ttdef"><b>Definition:</b> register.h:46</div></div>
<div class="ttc" id="astructpcilib__register__description__t_html"><div class="ttname"><a href="structpcilib__register__description__t.html">pcilib_register_description_t</a></div><div class="ttdef"><b>Definition:</b> register.h:25</div></div>
<div class="ttc" id="astructpcilib__register__range__t_html"><div class="ttname"><a href="structpcilib__register__range__t.html">pcilib_register_range_t</a></div><div class="ttdoc">Default mappings: defines virtual address to register mappings, i.e.</div><div class="ttdef"><b>Definition:</b> bank.h:98</div></div>
<div class="ttc" id="astructpcilib__s_html"><div class="ttname"><a href="structpcilib__s.html">pcilib_s</a></div><div class="ttdef"><b>Definition:</b> pci.h:47</div></div>
<div class="ttc" id="astructpcilib__s_html_a204e280481f826289ca05b2c588f30d2"><div class="ttname"><a href="structpcilib__s.html#a204e280481f826289ca05b2c588f30d2">pcilib_s::ranges</a></div><div class="ttdeci">pcilib_register_range_t ranges[PCILIB_MAX_REGISTER_RANGES+1]</div><div class="ttdoc">List of currently defined register ranges (from all sources)</div><div class="ttdef"><b>Definition:</b> pci.h:82</div></div>
<div class="ttc" id="astructpcilib__s_html_a30e41f6841c2ed17baa317311a5765d5"><div class="ttname"><a href="structpcilib__s.html#a30e41f6841c2ed17baa317311a5765d5">pcilib_s::alloc_units</a></div><div class="ttdeci">size_t alloc_units</div><div class="ttdoc">Number of configured and allocated units.</div><div class="ttdef"><b>Definition:</b> pci.h:93</div></div>
<div class="ttc" id="astructpcilib__s_html_a3b8d32830b2e29cb8dadcd73bb5fd063"><div class="ttname"><a href="structpcilib__s.html#a3b8d32830b2e29cb8dadcd73bb5fd063">pcilib_s::page_mask</a></div><div class="ttdeci">uintptr_t page_mask</div><div class="ttdoc">Selects bits which define offset within the page.</div><div class="ttdef"><b>Definition:</b> pci.h:52</div></div>
<div class="ttc" id="astructpcilib__s_html_a7f2f82869f7b6acd3a0cfba9dc4a00ed"><div class="ttname"><a href="structpcilib__s.html#a7f2f82869f7b6acd3a0cfba9dc4a00ed">pcilib_s::banks</a></div><div class="ttdeci">pcilib_register_bank_description_t banks[PCILIB_MAX_REGISTER_BANKS+1]</div><div class="ttdoc">List of currently defined register banks (from all sources)</div><div class="ttdef"><b>Definition:</b> pci.h:81</div></div>
<div class="ttc" id="astructpcilib__s_html_a8c3ebd9b2e22105970a21d4f8b7564db"><div class="ttname"><a href="structpcilib__s.html#a8c3ebd9b2e22105970a21d4f8b7564db">pcilib_s::alloc_reg</a></div><div class="ttdeci">size_t alloc_reg</div><div class="ttdoc">Number of registered and allocated registers.</div><div class="ttdef"><b>Definition:</b> pci.h:76</div></div>
<div class="ttc" id="astructpcilib__s_html_ab08f82dd5bf659b498f798b1078fdf98"><div class="ttname"><a href="structpcilib__s.html#ab08f82dd5bf659b498f798b1078fdf98">pcilib_s::model_info</a></div><div class="ttdeci">pcilib_model_description_t model_info</div><div class="ttdoc">Current model description combined from the information returned by the event plugin and all dynamic ...</div><div class="ttdef"><b>Definition:</b> pci.h:73</div></div>
<div class="ttc" id="astructpcilib__s_html_ad167ccf9fea54556af78d95e1813f685"><div class="ttname"><a href="structpcilib__s.html#ad167ccf9fea54556af78d95e1813f685">pcilib_s::protocols</a></div><div class="ttdeci">pcilib_register_protocol_description_t protocols[PCILIB_MAX_REGISTER_PROTOCOLS+1]</div><div class="ttdoc">List of currently defined register protocols (from all sources)</div><div class="ttdef"><b>Definition:</b> pci.h:83</div></div>
<div class="ttc" id="astructpcilib__s_html_af97bbf6079a97d4490377dc92310f1f5"><div class="ttname"><a href="structpcilib__s.html#af97bbf6079a97d4490377dc92310f1f5">pcilib_s::alloc_views</a></div><div class="ttdeci">size_t alloc_views</div><div class="ttdoc">Number of configured and allocated views.</div><div class="ttdef"><b>Definition:</b> pci.h:92</div></div>
<div class="ttc" id="astructpcilib__unit__description__t_html"><div class="ttname"><a href="structpcilib__unit__description__t.html">pcilib_unit_description_t</a></div><div class="ttdef"><b>Definition:</b> unit.h:23</div></div>
<div class="ttc" id="astructpcilib__view__description__s_html"><div class="ttname"><a href="structpcilib__view__description__s.html">pcilib_view_description_s</a></div><div class="ttdef"><b>Definition:</b> view.h:29</div></div>
<div class="ttc" id="axml_8c_html_a3e414d1784f22fa9a026b424dbe0cf71"><div class="ttname"><a href="xml_8c.html#a3e414d1784f22fa9a026b424dbe0cf71">pcilib_detect_xml_model</a></div><div class="ttdeci">char * pcilib_detect_xml_model(pcilib_t *ctx, unsigned int vendor_id, unsigned int device_id)</div><div class="ttdoc">Resolves device model from vendor and device ids using XML configuration The association of vendor/de...</div><div class="ttdef"><b>Definition:</b> xml.c:1281</div></div>
<div class="ttc" id="axml_8c_html_a57b7c7b9b4dd3df0d201888b7b50ae79"><div class="ttname"><a href="xml_8c.html#a57b7c7b9b4dd3df0d201888b7b50ae79">pcilib_init_xml</a></div><div class="ttdeci">int pcilib_init_xml(pcilib_t *ctx, const char *model)</div><div class="ttdoc">Initializes XML stack and loads a default set of XML files.</div><div class="ttdef"><b>Definition:</b> xml.c:1201</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="structpcilib__s.html#a8c3ebd9b2e22105970a21d4f8b7564db">pcilib_s::alloc_reg</a>, <a class="el" href="structpcilib__s.html#a30e41f6841c2ed17baa317311a5765d5">pcilib_s::alloc_units</a>, <a class="el" href="structpcilib__s.html#af97bbf6079a97d4490377dc92310f1f5">pcilib_s::alloc_views</a>, <a class="el" href="structpcilib__model__description__t.html#a6fddbe5370638b080c33d1907791d8a7">pcilib_model_description_t::banks</a>, <a class="el" href="structpcilib__s.html#a7f2f82869f7b6acd3a0cfba9dc4a00ed">pcilib_s::banks</a>, <a class="el" href="structpcilib__s.html#a97959ae9b1ab77309f0afec2b62d283c">pcilib_s::handle</a>, <a class="el" href="structpcilib__s.html#a124451df7bcbe85a2d9b7e8cb19814f9">pcilib_s::model</a>, <a class="el" href="structpcilib__s.html#ab08f82dd5bf659b498f798b1078fdf98">pcilib_s::model_info</a>, <a class="el" href="structpcilib__s.html#a3b8d32830b2e29cb8dadcd73bb5fd063">pcilib_s::page_mask</a>, <a class="el" href="structpcilib__s.html#a26546c777c20e8f6cf63687ff16631f6">pcilib_s::pci_cfg_space_fd</a>, <a class="el" href="bank_8c.html#a1222fd326a61501597298c3e7e18ae5c">pcilib_add_register_banks()</a>, <a class="el" href="bank_8c.html#a98831e48d2e98f52418b1cfff7d66ee6">pcilib_add_register_protocols()</a>, <a class="el" href="register_8c.html#aec9a0672eddac26362760345cea77508">pcilib_add_registers()</a>, <a class="el" href="group__public__api.html#ga809b61586ed9c56a7510c607859e75e3">pcilib_close()</a>, <a class="el" href="pci_8h.html#a5d23615582dd63a38451f57cbe1b4d06">PCILIB_DEFAULT_REGISTER_SPACE</a>, <a class="el" href="pci_8h.html#a07c3da3f8efe072251e55f6293594127">PCILIB_DEFAULT_UNIT_SPACE</a>, <a class="el" href="pci_8h.html#ad91ab6d54425bdd3f0459e054e40935f">PCILIB_DEFAULT_VIEW_SPACE</a>, <a class="el" href="xml_8c.html#a3e414d1784f22fa9a026b424dbe0cf71">pcilib_detect_xml_model()</a>, <a class="el" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>, <a class="el" href="error_8h.html#a0c59f7091fd2446121868635aca9e60cad21a896d5d5aaee0682c410b9bed283c">PCILIB_ERROR_NOTFOUND</a>, <a class="el" href="py_8c.html#a67b23abbb0fa81e33525e8fd34ea28fd">pcilib_free_py()</a>, <a class="el" href="pci_8c.html#a74c205347b831faad18ebe3322d715a7">pcilib_get_board_info()</a>, <a class="el" href="pci_8c.html#a0a9b10b6ffc6cc39a50d166be7a30d1a">pcilib_get_driver_version()</a>, <a class="el" href="cpu_8c.html#a4306761bf732dce22b630e026943d5cb">pcilib_get_page_mask()</a>, <a class="el" href="event_8c.html#a1f922320e0edf453175b3a490075fdd8">pcilib_init_event_engine()</a>, <a class="el" href="locking_8c.html#af688eeaa5170de223b3af7e4e7c211e0">pcilib_init_locking()</a>, <a class="el" href="py_8c.html#a3e58b4a87c12b0e76ccd6e3b09035d23">pcilib_init_py()</a>, <a class="el" href="bank_8c.html#a95ea0518e5c86b9ca1bbea948b5869bd">pcilib_init_register_banks()</a>, <a class="el" href="xml_8c.html#a57b7c7b9b4dd3df0d201888b7b50ae79">pcilib_init_xml()</a>, <a class="el" href="bank_8h.html#ab2b604364494c4bb061e3c8ff75b3565afa2f073b46b5612ad6f1376df9c099f1">PCILIB_MODEL_MODIFICATON_FLAGS_DEFAULT</a>, <a class="el" href="py_8c.html#a6b826f5624bd3198cf2f966ab73bf284">pcilib_py_add_script_dir()</a>, <a class="el" href="export_8c.html#a7e213c0db82acec7467fb8c0c6621c51">pcilib_standard_register_banks</a>, <a class="el" href="export_8c.html#aec82fd51fdb3e51284c013fa860dac75">pcilib_standard_register_protocols</a>, <a class="el" href="export_8c.html#a3ed52ebd14260696c1818b5a2e8e0119">pcilib_standard_registers</a>, <a class="el" href="error_8h.html#a62fff84bc7941d1a39700b931716bbe9">pcilib_warning</a>, <a class="el" href="structpcilib__model__description__t.html#a5bd73383177aed43de8605026133c56e">pcilib_model_description_t::protocols</a>, <a class="el" href="structpcilib__s.html#ad167ccf9fea54556af78d95e1813f685">pcilib_s::protocols</a>, <a class="el" href="structpcilib__model__description__t.html#a707be95ac3ce023f602a3a8ef6120a77">pcilib_model_description_t::ranges</a>, <a class="el" href="structpcilib__s.html#a204e280481f826289ca05b2c588f30d2">pcilib_s::ranges</a>, <a class="el" href="structpcilib__s.html#a4b24f857efec07c254d2fa2226b59fda">pcilib_s::register_ctx</a>, <a class="el" href="structpcilib__model__description__t.html#ab11f8776e3e8bb3e0a1fc50a5abf3a70">pcilib_model_description_t::registers</a>, <a class="el" href="structpcilib__s.html#a9f6bc50561128b6e7f78296f23db134a">pcilib_s::registers</a>, <a class="el" href="structpcilib__model__description__t.html#a068c972a2e8dcc0294f195dbe5b6c7c3">pcilib_model_description_t::units</a>, <a class="el" href="structpcilib__s.html#a05d5ea2f170c18f320ae1ce7d05e378f">pcilib_s::units</a>, <a class="el" href="structpcilib__model__description__t.html#a99fd6d461bd26ac1407dec52f4ea217c">pcilib_model_description_t::views</a>, and <a class="el" href="structpcilib__s.html#af0bbd1334a8cb708cfa331d833be25e3">pcilib_s::views</a>.</p>

</div>
</div>
<a id="ga4d813c29e5b968da34126908d8a019f4" name="ga4d813c29e5b968da34126908d8a019f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4d813c29e5b968da34126908d8a019f4">&#9670;&#160;</a></span>pcilib_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pcilib_reset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *&#160;</td>
          <td class="paramname"><em>ctx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Should reset the hardware and software in default state. </p>
<p >It is implementation-specific, but is not actively used in existing implementations because the hardware is initialized from bash scripts which are often changed by Michele and his band. On the software side, it probably should reset all software registers to default value and may be additionaly re-start and clear DMA. However, this is not implemented yet. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ctx</td><td>- pcilib context </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- error code or 0 on success </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">   86</span>                                {</div>
<div class="line"><span class="lineno">   87</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structpcilib__event__api__description__t.html">pcilib_event_api_description_t</a> *api;</div>
<div class="line"><span class="lineno">   88</span>    </div>
<div class="line"><span class="lineno">   89</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structpcilib__model__description__t.html">pcilib_model_description_t</a> *model_info = <a class="code hl_function" href="model_8c.html#ae7954738bb4b923ee87520c4538ba873">pcilib_get_model_description</a>(ctx);</div>
<div class="line"><span class="lineno">   90</span> </div>
<div class="line"><span class="lineno">   91</span>    api = model_info-&gt;<a class="code hl_variable" href="structpcilib__model__description__t.html#a621b57704843da1a23291324398b9cd5">api</a>;</div>
<div class="line"><span class="lineno">   92</span>    <span class="keywordflow">if</span> (!api) {</div>
<div class="line"><span class="lineno">   93</span>        <a class="code hl_define" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>(<span class="stringliteral">&quot;Event API is not supported by the selected model&quot;</span>);</div>
<div class="line"><span class="lineno">   94</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="error_8h.html#a0c59f7091fd2446121868635aca9e60caf5392ef1a23835f44ebfe662e3d2988c">PCILIB_ERROR_NOTSUPPORTED</a>;</div>
<div class="line"><span class="lineno">   95</span>    }</div>
<div class="line"><span class="lineno">   96</span>    </div>
<div class="line"><span class="lineno">   97</span>    <span class="keywordflow">if</span> (api-&gt;<a class="code hl_variable" href="structpcilib__event__api__description__t.html#a211b13c9f4de77b46dc8687a4e752379">reset</a>) </div>
<div class="line"><span class="lineno">   98</span>        <span class="keywordflow">return</span> api-&gt;<a class="code hl_variable" href="structpcilib__event__api__description__t.html#a211b13c9f4de77b46dc8687a4e752379">reset</a>(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a887deef86e2af6248df3326302bbce00">event_ctx</a>);</div>
<div class="line"><span class="lineno">   99</span>        </div>
<div class="line"><span class="lineno">  100</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  101</span>}</div>
<div class="ttc" id="aerror_8h_html_a0c59f7091fd2446121868635aca9e60caf5392ef1a23835f44ebfe662e3d2988c"><div class="ttname"><a href="error_8h.html#a0c59f7091fd2446121868635aca9e60caf5392ef1a23835f44ebfe662e3d2988c">PCILIB_ERROR_NOTSUPPORTED</a></div><div class="ttdeci">@ PCILIB_ERROR_NOTSUPPORTED</div><div class="ttdef"><b>Definition:</b> error.h:24</div></div>
<div class="ttc" id="astructpcilib__event__api__description__t_html_a211b13c9f4de77b46dc8687a4e752379"><div class="ttname"><a href="structpcilib__event__api__description__t.html#a211b13c9f4de77b46dc8687a4e752379">pcilib_event_api_description_t::reset</a></div><div class="ttdeci">int(* reset)(pcilib_context_t *ctx)</div><div class="ttdef"><b>Definition:</b> event.h:68</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="structpcilib__model__description__t.html#a621b57704843da1a23291324398b9cd5">pcilib_model_description_t::api</a>, <a class="el" href="structpcilib__s.html#a887deef86e2af6248df3326302bbce00">pcilib_s::event_ctx</a>, <a class="el" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>, <a class="el" href="error_8h.html#a0c59f7091fd2446121868635aca9e60caf5392ef1a23835f44ebfe662e3d2988c">PCILIB_ERROR_NOTSUPPORTED</a>, <a class="el" href="model_8c.html#ae7954738bb4b923ee87520c4538ba873">pcilib_get_model_description()</a>, and <a class="el" href="structpcilib__event__api__description__t.html#a211b13c9f4de77b46dc8687a4e752379">pcilib_event_api_description_t::reset</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jun 18 2024 22:02:48 for pcilib by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
