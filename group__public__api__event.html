<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>pcilib: Public Event API</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">pcilib
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Public Event API</div></div>
</div><!--header-->
<div class="contents">

<p>High level API for reading the structured data from hardware.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga33e1436a3237d90051fee288e4d5cc32"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pcilib_8h.html#a3a20e91b3938bbd38c670f6dcbdc2ab2">pcilib_context_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__public__api__event.html#ga33e1436a3237d90051fee288e4d5cc32">pcilib_get_event_engine</a> (<a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *ctx)</td></tr>
<tr class="memdesc:ga33e1436a3237d90051fee288e4d5cc32"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provides access to the context of event engine.  <a href="group__public__api__event.html#ga33e1436a3237d90051fee288e4d5cc32">More...</a><br /></td></tr>
<tr class="separator:ga33e1436a3237d90051fee288e4d5cc32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga62d0088c2c598040d6dd835bd81be036"><td class="memItemLeft" align="right" valign="top"><a class="el" href="pcilib_8h.html#ab1b73a64ee45f84b279b5353f38e6167">pcilib_event_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__public__api__event.html#ga62d0088c2c598040d6dd835bd81be036">pcilib_find_event</a> (<a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *ctx, const char *event)</td></tr>
<tr class="memdesc:ga62d0088c2c598040d6dd835bd81be036"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resolves the event ID based on its name.  <a href="group__public__api__event.html#ga62d0088c2c598040d6dd835bd81be036">More...</a><br /></td></tr>
<tr class="separator:ga62d0088c2c598040d6dd835bd81be036"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac332a0187e8005d876393bb7332a6284"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__public__api__event.html#gac332a0187e8005d876393bb7332a6284">pcilib_start</a> (<a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *ctx, <a class="el" href="pcilib_8h.html#ab1b73a64ee45f84b279b5353f38e6167">pcilib_event_t</a> ev_mask, <a class="el" href="pcilib_8h.html#a3648d1d610b76a30083daf3556964d56">pcilib_event_flags_t</a> flags)</td></tr>
<tr class="memdesc:gac332a0187e8005d876393bb7332a6284"><td class="mdescLeft">&#160;</td><td class="mdescRight">Analyzes current configuration, allocates necessary buffers and spawns required data processing threads.  <a href="group__public__api__event.html#gac332a0187e8005d876393bb7332a6284">More...</a><br /></td></tr>
<tr class="separator:gac332a0187e8005d876393bb7332a6284"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaabe07187e09967ce6d825d60beeabc9c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__public__api__event.html#gaabe07187e09967ce6d825d60beeabc9c">pcilib_stop</a> (<a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *ctx, <a class="el" href="pcilib_8h.html#a3648d1d610b76a30083daf3556964d56">pcilib_event_flags_t</a> flags)</td></tr>
<tr class="memdesc:gaabe07187e09967ce6d825d60beeabc9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops event grabbing and optionally cleans up the used memory.  <a href="group__public__api__event.html#gaabe07187e09967ce6d825d60beeabc9c">More...</a><br /></td></tr>
<tr class="separator:gaabe07187e09967ce6d825d60beeabc9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf30bc783e3c29f93656623db3a0f377d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__public__api__event.html#gaf30bc783e3c29f93656623db3a0f377d">pcilib_stream</a> (<a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *ctx, <a class="el" href="pcilib_8h.html#a1992207a2a6350e743a1d7b3785fe2f6">pcilib_event_callback_t</a> callback, void *user)</td></tr>
<tr class="memdesc:gaf30bc783e3c29f93656623db3a0f377d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Streams the incomming events to the provided callback function.  <a href="group__public__api__event.html#gaf30bc783e3c29f93656623db3a0f377d">More...</a><br /></td></tr>
<tr class="separator:gaf30bc783e3c29f93656623db3a0f377d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaeda387526233181379b0bb299fc87869"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__public__api__event.html#gaeda387526233181379b0bb299fc87869">pcilib_get_next_event</a> (<a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *ctx, <a class="el" href="pcilib_8h.html#a1d84306119429755a7bfd73b953c01dc">pcilib_timeout_t</a> timeout, <a class="el" href="pcilib_8h.html#abcd8f5153b232dd18811548742390c2b">pcilib_event_id_t</a> *evid, size_t info_size, <a class="el" href="structpcilib__event__info__t.html">pcilib_event_info_t</a> *info)</td></tr>
<tr class="memdesc:gaeda387526233181379b0bb299fc87869"><td class="mdescLeft">&#160;</td><td class="mdescRight">Waits until the next event is available.  <a href="group__public__api__event.html#gaeda387526233181379b0bb299fc87869">More...</a><br /></td></tr>
<tr class="separator:gaeda387526233181379b0bb299fc87869"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafefc9d34d21fa7a971153fcbf5098917"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__public__api__event.html#gafefc9d34d21fa7a971153fcbf5098917">pcilib_configure_rawdata_callback</a> (<a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *ctx, <a class="el" href="pcilib_8h.html#a87bb6fc2bee9bd6386fa38e1a7cdbf4c">pcilib_event_rawdata_callback_t</a> callback, void *user)</td></tr>
<tr class="memdesc:gafefc9d34d21fa7a971153fcbf5098917"><td class="mdescLeft">&#160;</td><td class="mdescRight">Requests the streaming the rawdata from the event engine.  <a href="group__public__api__event.html#gafefc9d34d21fa7a971153fcbf5098917">More...</a><br /></td></tr>
<tr class="separator:gafefc9d34d21fa7a971153fcbf5098917"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga583afaaea8a17740ac292351bd802e90"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__public__api__event.html#ga583afaaea8a17740ac292351bd802e90">pcilib_configure_autostop</a> (<a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *ctx, size_t max_events, <a class="el" href="pcilib_8h.html#a1d84306119429755a7bfd73b953c01dc">pcilib_timeout_t</a> duration)</td></tr>
<tr class="memdesc:ga583afaaea8a17740ac292351bd802e90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures conditions when the grabbing will be stopped automatically.  <a href="group__public__api__event.html#ga583afaaea8a17740ac292351bd802e90">More...</a><br /></td></tr>
<tr class="separator:ga583afaaea8a17740ac292351bd802e90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga030e362923674088e9d8060e8c4849ce"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__public__api__event.html#ga030e362923674088e9d8060e8c4849ce">pcilib_configure_autotrigger</a> (<a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *ctx, <a class="el" href="pcilib_8h.html#a1d84306119429755a7bfd73b953c01dc">pcilib_timeout_t</a> interval, <a class="el" href="pcilib_8h.html#ab1b73a64ee45f84b279b5353f38e6167">pcilib_event_t</a> event, size_t trigger_size, void *trigger_data)</td></tr>
<tr class="memdesc:ga030e362923674088e9d8060e8c4849ce"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request the auto-triggering while grabbing.  <a href="group__public__api__event.html#ga030e362923674088e9d8060e8c4849ce">More...</a><br /></td></tr>
<tr class="separator:ga030e362923674088e9d8060e8c4849ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad105b1a2d56e98985ce6ea61db010d60"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__public__api__event.html#gad105b1a2d56e98985ce6ea61db010d60">pcilib_trigger</a> (<a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *ctx, <a class="el" href="pcilib_8h.html#ab1b73a64ee45f84b279b5353f38e6167">pcilib_event_t</a> event, size_t trigger_size, void *trigger_data)</td></tr>
<tr class="memdesc:gad105b1a2d56e98985ce6ea61db010d60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Issues a single software trigger for the specified event.  <a href="group__public__api__event.html#gad105b1a2d56e98985ce6ea61db010d60">More...</a><br /></td></tr>
<tr class="separator:gad105b1a2d56e98985ce6ea61db010d60"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p >High level API for reading the structured data from hardware. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga583afaaea8a17740ac292351bd802e90" name="ga583afaaea8a17740ac292351bd802e90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga583afaaea8a17740ac292351bd802e90">&#9670;&#160;</a></span>pcilib_configure_autostop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pcilib_configure_autostop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>max_events</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pcilib_8h.html#a1d84306119429755a7bfd73b953c01dc">pcilib_timeout_t</a>&#160;</td>
          <td class="paramname"><em>duration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures conditions when the grabbing will be stopped automatically. </p>
<p >The recording of new events may be stopped after reaching max_events records or when the specified amount of time is elapsed whatever happens first. However, the <a class="el" href="group__public__api__event.html#gaabe07187e09967ce6d825d60beeabc9c" title="Stops event grabbing and optionally cleans up the used memory.">pcilib_stop()</a> function still must be called afterwards.</p>
<p >This function should be exectued before the grabbing is started with <a class="el" href="group__public__api__event.html#gac332a0187e8005d876393bb7332a6284" title="Analyzes current configuration, allocates necessary buffers and spawns required data processing threa...">pcilib_start()</a>. NOTE that this options might not be respected if grabbing is started with the <a class="el" href="pcilib_8h.html#a3648d1d610b76a30083daf3556964d56a3f7b308f36b857b7c837c65eda1b129a" title="Do not parse data, just read raw and pass it to rawdata callback.">PCILIB_EVENT_FLAG_RAW_DATA_ONLY</a> flag specified.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ctx</td><td>- pcilib context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_events</td><td>- specifies number of events after which the grabbing is stopped </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">duration</td><td>- specifies number of microseconds to run the grabbing, special values <a class="el" href="pcilib_8h.html#a166dd3b3c2d265ec0c88cf5ed001b511">PCILIB_TIMEOUT_IMMEDIATE</a> and <a class="el" href="pcilib_8h.html#a01c9c2fd95e634fde53208e3d27ccd84">PCILIB_TIMEOUT_INFINITE</a> are supported. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- error code or 0 on success </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  119</span>                                                                                           {</div>
<div class="line"><span class="lineno">  120</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structpcilib__event__api__description__t.html">pcilib_event_api_description_t</a> *api;</div>
<div class="line"><span class="lineno">  121</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structpcilib__model__description__t.html">pcilib_model_description_t</a> *model_info = <a class="code hl_function" href="model_8c.html#ae7954738bb4b923ee87520c4538ba873">pcilib_get_model_description</a>(ctx);</div>
<div class="line"><span class="lineno">  122</span> </div>
<div class="line"><span class="lineno">  123</span>    api = model_info-&gt;<a class="code hl_variable" href="structpcilib__model__description__t.html#a621b57704843da1a23291324398b9cd5">api</a>;</div>
<div class="line"><span class="lineno">  124</span>    <span class="keywordflow">if</span> (!api) {</div>
<div class="line"><span class="lineno">  125</span>        <a class="code hl_define" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>(<span class="stringliteral">&quot;Event API is not supported by the selected model&quot;</span>);</div>
<div class="line"><span class="lineno">  126</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="error_8h.html#a0c59f7091fd2446121868635aca9e60caf5392ef1a23835f44ebfe662e3d2988c">PCILIB_ERROR_NOTSUPPORTED</a>;</div>
<div class="line"><span class="lineno">  127</span>    }</div>
<div class="line"><span class="lineno">  128</span> </div>
<div class="line"><span class="lineno">  129</span>    ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a887deef86e2af6248df3326302bbce00">event_ctx</a>-&gt;<a class="code hl_variable" href="structpcilib__event__context__s.html#af492686a20b9594363cb8536e927f725">params</a>.<a class="code hl_variable" href="structpcilib__event__parameters__t.html#a323a35750db91a2f9b28f78ccb5a3e75">autostop</a>.<a class="code hl_variable" href="structpcilib__autostop__parameters__t.html#a41e5c1535095cca7a4a0aa7ebc3ab7d5">max_events</a> = max_events;</div>
<div class="line"><span class="lineno">  130</span>    ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a887deef86e2af6248df3326302bbce00">event_ctx</a>-&gt;<a class="code hl_variable" href="structpcilib__event__context__s.html#af492686a20b9594363cb8536e927f725">params</a>.<a class="code hl_variable" href="structpcilib__event__parameters__t.html#a323a35750db91a2f9b28f78ccb5a3e75">autostop</a>.<a class="code hl_variable" href="structpcilib__autostop__parameters__t.html#a359f93fb53981bcafc90760cb4e27175">duration</a> = duration;</div>
<div class="line"><span class="lineno">  131</span>    </div>
<div class="line"><span class="lineno">  132</span>    <span class="keywordflow">return</span> 0;    </div>
<div class="line"><span class="lineno">  133</span>}</div>
<div class="ttc" id="aerror_8h_html_a0c59f7091fd2446121868635aca9e60caf5392ef1a23835f44ebfe662e3d2988c"><div class="ttname"><a href="error_8h.html#a0c59f7091fd2446121868635aca9e60caf5392ef1a23835f44ebfe662e3d2988c">PCILIB_ERROR_NOTSUPPORTED</a></div><div class="ttdeci">@ PCILIB_ERROR_NOTSUPPORTED</div><div class="ttdef"><b>Definition:</b> error.h:24</div></div>
<div class="ttc" id="aerror_8h_html_a2b06064fecffd095efabb752f7b50021"><div class="ttname"><a href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a></div><div class="ttdeci">#define pcilib_error(...)</div><div class="ttdef"><b>Definition:</b> error.h:68</div></div>
<div class="ttc" id="amodel_8c_html_ae7954738bb4b923ee87520c4538ba873"><div class="ttname"><a href="model_8c.html#ae7954738bb4b923ee87520c4538ba873">pcilib_get_model_description</a></div><div class="ttdeci">const pcilib_model_description_t * pcilib_get_model_description(pcilib_t *ctx)</div><div class="ttdef"><b>Definition:</b> model.c:20</div></div>
<div class="ttc" id="astructpcilib__autostop__parameters__t_html_a359f93fb53981bcafc90760cb4e27175"><div class="ttname"><a href="structpcilib__autostop__parameters__t.html#a359f93fb53981bcafc90760cb4e27175">pcilib_autostop_parameters_t::duration</a></div><div class="ttdeci">pcilib_timeout_t duration</div><div class="ttdef"><b>Definition:</b> event.h:12</div></div>
<div class="ttc" id="astructpcilib__autostop__parameters__t_html_a41e5c1535095cca7a4a0aa7ebc3ab7d5"><div class="ttname"><a href="structpcilib__autostop__parameters__t.html#a41e5c1535095cca7a4a0aa7ebc3ab7d5">pcilib_autostop_parameters_t::max_events</a></div><div class="ttdeci">size_t max_events</div><div class="ttdef"><b>Definition:</b> event.h:11</div></div>
<div class="ttc" id="astructpcilib__event__api__description__t_html"><div class="ttname"><a href="structpcilib__event__api__description__t.html">pcilib_event_api_description_t</a></div><div class="ttdef"><b>Definition:</b> event.h:60</div></div>
<div class="ttc" id="astructpcilib__event__context__s_html_af492686a20b9594363cb8536e927f725"><div class="ttname"><a href="structpcilib__event__context__s.html#af492686a20b9594363cb8536e927f725">pcilib_event_context_s::params</a></div><div class="ttdeci">pcilib_event_parameters_t params</div><div class="ttdef"><b>Definition:</b> event.h:31</div></div>
<div class="ttc" id="astructpcilib__event__parameters__t_html_a323a35750db91a2f9b28f78ccb5a3e75"><div class="ttname"><a href="structpcilib__event__parameters__t.html#a323a35750db91a2f9b28f78ccb5a3e75">pcilib_event_parameters_t::autostop</a></div><div class="ttdeci">pcilib_autostop_parameters_t autostop</div><div class="ttdef"><b>Definition:</b> event.h:25</div></div>
<div class="ttc" id="astructpcilib__model__description__t_html"><div class="ttname"><a href="structpcilib__model__description__t.html">pcilib_model_description_t</a></div><div class="ttdef"><b>Definition:</b> model.h:12</div></div>
<div class="ttc" id="astructpcilib__model__description__t_html_a621b57704843da1a23291324398b9cd5"><div class="ttname"><a href="structpcilib__model__description__t.html#a621b57704843da1a23291324398b9cd5">pcilib_model_description_t::api</a></div><div class="ttdeci">const pcilib_event_api_description_t * api</div><div class="ttdef"><b>Definition:</b> model.h:15</div></div>
<div class="ttc" id="astructpcilib__s_html_a887deef86e2af6248df3326302bbce00"><div class="ttname"><a href="structpcilib__s.html#a887deef86e2af6248df3326302bbce00">pcilib_s::event_ctx</a></div><div class="ttdeci">pcilib_context_t * event_ctx</div><div class="ttdoc">Implmentation context.</div><div class="ttdef"><b>Definition:</b> pci.h:90</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="structpcilib__model__description__t.html#a621b57704843da1a23291324398b9cd5">pcilib_model_description_t::api</a>, <a class="el" href="structpcilib__event__parameters__t.html#a323a35750db91a2f9b28f78ccb5a3e75">pcilib_event_parameters_t::autostop</a>, <a class="el" href="structpcilib__autostop__parameters__t.html#a359f93fb53981bcafc90760cb4e27175">pcilib_autostop_parameters_t::duration</a>, <a class="el" href="structpcilib__s.html#a887deef86e2af6248df3326302bbce00">pcilib_s::event_ctx</a>, <a class="el" href="structpcilib__autostop__parameters__t.html#a41e5c1535095cca7a4a0aa7ebc3ab7d5">pcilib_autostop_parameters_t::max_events</a>, <a class="el" href="structpcilib__event__context__s.html#af492686a20b9594363cb8536e927f725">pcilib_event_context_s::params</a>, <a class="el" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>, <a class="el" href="error_8h.html#a0c59f7091fd2446121868635aca9e60caf5392ef1a23835f44ebfe662e3d2988c">PCILIB_ERROR_NOTSUPPORTED</a>, and <a class="el" href="model_8c.html#ae7954738bb4b923ee87520c4538ba873">pcilib_get_model_description()</a>.</p>

</div>
</div>
<a id="ga030e362923674088e9d8060e8c4849ce" name="ga030e362923674088e9d8060e8c4849ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga030e362923674088e9d8060e8c4849ce">&#9670;&#160;</a></span>pcilib_configure_autotrigger()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pcilib_configure_autotrigger </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pcilib_8h.html#a1d84306119429755a7bfd73b953c01dc">pcilib_timeout_t</a>&#160;</td>
          <td class="paramname"><em>interval</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pcilib_8h.html#ab1b73a64ee45f84b279b5353f38e6167">pcilib_event_t</a>&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>trigger_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>trigger_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Request the auto-triggering while grabbing. </p>
<p >The software triggering is currently not supported (but planned). Therefore it is fully relied on hardware support. If no hardware support is available, <a class="el" href="error_8h.html#a0c59f7091fd2446121868635aca9e60caf5392ef1a23835f44ebfe662e3d2988c">PCILIB_ERROR_NOTSUPPORTED</a> will be returned.</p>
<p >This function should be exectued before the grabbing is started with <a class="el" href="group__public__api__event.html#gac332a0187e8005d876393bb7332a6284" title="Analyzes current configuration, allocates necessary buffers and spawns required data processing threa...">pcilib_start()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ctx</td><td>- pcilib context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">interval</td><td>- instructs hardware that each <code>interval</code> microseconds a new trigger should be issued </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">event</td><td>- specifies ID of the event which will be triggered </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">trigger_size</td><td>- specifies the size of <code>trigger</code> buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">trigger_data</td><td>- this implementation-specific buffer which will be passed through to the Event engine </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- error code or 0 on success </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  135</span>                                                                                                                                          {</div>
<div class="line"><span class="lineno">  136</span>        <span class="comment">/* To support hardware without autotriggering, we need to provide in event.c a code </span></div>
<div class="line"><span class="lineno">  137</span><span class="comment">        to generate multiple triggers in a thread (available in cli). The function should </span></div>
<div class="line"><span class="lineno">  138</span><span class="comment">        be re-enabled afterwards: just set parameters and let implementation decide if it </span></div>
<div class="line"><span class="lineno">  139</span><span class="comment">        can make triggering in hardware or will use our emulation */</span></div>
<div class="line"><span class="lineno">  140</span>        </div>
<div class="line"><span class="lineno">  141</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="error_8h.html#a0c59f7091fd2446121868635aca9e60caf5392ef1a23835f44ebfe662e3d2988c">PCILIB_ERROR_NOTSUPPORTED</a>;</div>
<div class="line"><span class="lineno">  142</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="error_8h.html#a0c59f7091fd2446121868635aca9e60caf5392ef1a23835f44ebfe662e3d2988c">PCILIB_ERROR_NOTSUPPORTED</a>.</p>

</div>
</div>
<a id="gafefc9d34d21fa7a971153fcbf5098917" name="gafefc9d34d21fa7a971153fcbf5098917"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafefc9d34d21fa7a971153fcbf5098917">&#9670;&#160;</a></span>pcilib_configure_rawdata_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pcilib_configure_rawdata_callback </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pcilib_8h.html#a87bb6fc2bee9bd6386fa38e1a7cdbf4c">pcilib_event_rawdata_callback_t</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Requests the streaming the rawdata from the event engine. </p>
<p >The callback will be called each time new DMA packet is received. It is the fastest way to acuqire data. No memory copies performed and DMA buffers are directly passed to the specified callback. However, to prevent data loss, no long processing is allowed is only expected to copy data into the appropriate place and return control to the event engine.</p>
<p >This function should be exectued before the grabbing is started with <a class="el" href="group__public__api__event.html#gac332a0187e8005d876393bb7332a6284" title="Analyzes current configuration, allocates necessary buffers and spawns required data processing threa...">pcilib_start()</a>. The performance can be boosted further by disabling any data processing within the event engine. This is achieved by passing the <a class="el" href="pcilib_8h.html#a3648d1d610b76a30083daf3556964d56a3f7b308f36b857b7c837c65eda1b129a" title="Do not parse data, just read raw and pass it to rawdata callback.">PCILIB_EVENT_FLAG_RAW_DATA_ONLY</a> flag to <a class="el" href="group__public__api__event.html#gac332a0187e8005d876393bb7332a6284" title="Analyzes current configuration, allocates necessary buffers and spawns required data processing threa...">pcilib_start()</a> function while starting the grabbing.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ctx</td><td>- pcilib context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">callback</td><td>- callback function to call for each event, the streaming is stopped if it return <a class="el" href="pcilib_8h.html#afbb8d495f8afac2f84ec0460d0f28bbaacace816aaa81898a81c9d8f0fb638a5b" title="stop streaming">PCILIB_STREAMING_STOP</a> or negative value indicating the error </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">user</td><td>- used data is passed through as the last parameter of callback function </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- error code or 0 on success </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  103</span>                                                                                                           {</div>
<div class="line"><span class="lineno">  104</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structpcilib__event__api__description__t.html">pcilib_event_api_description_t</a> *api;</div>
<div class="line"><span class="lineno">  105</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structpcilib__model__description__t.html">pcilib_model_description_t</a> *model_info = <a class="code hl_function" href="model_8c.html#ae7954738bb4b923ee87520c4538ba873">pcilib_get_model_description</a>(ctx);</div>
<div class="line"><span class="lineno">  106</span> </div>
<div class="line"><span class="lineno">  107</span>    api = model_info-&gt;<a class="code hl_variable" href="structpcilib__model__description__t.html#a621b57704843da1a23291324398b9cd5">api</a>;</div>
<div class="line"><span class="lineno">  108</span>    <span class="keywordflow">if</span> (!api) {</div>
<div class="line"><span class="lineno">  109</span>        <a class="code hl_define" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>(<span class="stringliteral">&quot;Event API is not supported by the selected model&quot;</span>);</div>
<div class="line"><span class="lineno">  110</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="error_8h.html#a0c59f7091fd2446121868635aca9e60caf5392ef1a23835f44ebfe662e3d2988c">PCILIB_ERROR_NOTSUPPORTED</a>;</div>
<div class="line"><span class="lineno">  111</span>    }</div>
<div class="line"><span class="lineno">  112</span> </div>
<div class="line"><span class="lineno">  113</span>    ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a887deef86e2af6248df3326302bbce00">event_ctx</a>-&gt;<a class="code hl_variable" href="structpcilib__event__context__s.html#af492686a20b9594363cb8536e927f725">params</a>.<a class="code hl_variable" href="structpcilib__event__parameters__t.html#a496db5c732ea8613aa0a7153a436bd7b">rawdata</a>.<a class="code hl_variable" href="structpcilib__rawdata__parameters__t.html#a33021301443eb0d53c88cfcdae8e18ea">callback</a> = callback;</div>
<div class="line"><span class="lineno">  114</span>    ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a887deef86e2af6248df3326302bbce00">event_ctx</a>-&gt;<a class="code hl_variable" href="structpcilib__event__context__s.html#af492686a20b9594363cb8536e927f725">params</a>.<a class="code hl_variable" href="structpcilib__event__parameters__t.html#a496db5c732ea8613aa0a7153a436bd7b">rawdata</a>.<a class="code hl_variable" href="structpcilib__rawdata__parameters__t.html#ac38807eb6167b956157fc4d7f02aef42">user</a> = user;</div>
<div class="line"><span class="lineno">  115</span>    </div>
<div class="line"><span class="lineno">  116</span>    <span class="keywordflow">return</span> 0;    </div>
<div class="line"><span class="lineno">  117</span>}</div>
<div class="ttc" id="astructpcilib__event__parameters__t_html_a496db5c732ea8613aa0a7153a436bd7b"><div class="ttname"><a href="structpcilib__event__parameters__t.html#a496db5c732ea8613aa0a7153a436bd7b">pcilib_event_parameters_t::rawdata</a></div><div class="ttdeci">pcilib_rawdata_parameters_t rawdata</div><div class="ttdef"><b>Definition:</b> event.h:26</div></div>
<div class="ttc" id="astructpcilib__rawdata__parameters__t_html_a33021301443eb0d53c88cfcdae8e18ea"><div class="ttname"><a href="structpcilib__rawdata__parameters__t.html#a33021301443eb0d53c88cfcdae8e18ea">pcilib_rawdata_parameters_t::callback</a></div><div class="ttdeci">pcilib_event_rawdata_callback_t callback</div><div class="ttdef"><b>Definition:</b> event.h:16</div></div>
<div class="ttc" id="astructpcilib__rawdata__parameters__t_html_ac38807eb6167b956157fc4d7f02aef42"><div class="ttname"><a href="structpcilib__rawdata__parameters__t.html#ac38807eb6167b956157fc4d7f02aef42">pcilib_rawdata_parameters_t::user</a></div><div class="ttdeci">void * user</div><div class="ttdef"><b>Definition:</b> event.h:17</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="structpcilib__model__description__t.html#a621b57704843da1a23291324398b9cd5">pcilib_model_description_t::api</a>, <a class="el" href="structpcilib__rawdata__parameters__t.html#a33021301443eb0d53c88cfcdae8e18ea">pcilib_rawdata_parameters_t::callback</a>, <a class="el" href="structpcilib__s.html#a887deef86e2af6248df3326302bbce00">pcilib_s::event_ctx</a>, <a class="el" href="structpcilib__event__context__s.html#af492686a20b9594363cb8536e927f725">pcilib_event_context_s::params</a>, <a class="el" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>, <a class="el" href="error_8h.html#a0c59f7091fd2446121868635aca9e60caf5392ef1a23835f44ebfe662e3d2988c">PCILIB_ERROR_NOTSUPPORTED</a>, <a class="el" href="model_8c.html#ae7954738bb4b923ee87520c4538ba873">pcilib_get_model_description()</a>, <a class="el" href="structpcilib__event__parameters__t.html#a496db5c732ea8613aa0a7153a436bd7b">pcilib_event_parameters_t::rawdata</a>, and <a class="el" href="structpcilib__rawdata__parameters__t.html#ac38807eb6167b956157fc4d7f02aef42">pcilib_rawdata_parameters_t::user</a>.</p>

</div>
</div>
<a id="ga62d0088c2c598040d6dd835bd81be036" name="ga62d0088c2c598040d6dd835bd81be036"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga62d0088c2c598040d6dd835bd81be036">&#9670;&#160;</a></span>pcilib_find_event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pcilib_8h.html#ab1b73a64ee45f84b279b5353f38e6167">pcilib_event_t</a> pcilib_find_event </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>event</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resolves the event ID based on its name. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ctx</td><td>- pcilib context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">event</td><td>- the event name </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- the event ID or PCILIB_EVENT_INVALID if event is not found </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">   40</span>                                                                   {</div>
<div class="line"><span class="lineno">   41</span>    <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno">   42</span> </div>
<div class="line"><span class="lineno">   43</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structpcilib__model__description__t.html">pcilib_model_description_t</a> *model_info = <a class="code hl_function" href="model_8c.html#ae7954738bb4b923ee87520c4538ba873">pcilib_get_model_description</a>(ctx);</div>
<div class="line"><span class="lineno">   44</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structpcilib__event__description__t.html">pcilib_event_description_t</a> *events = model_info-&gt;<a class="code hl_variable" href="structpcilib__model__description__t.html#a72c1de0614477c608bd24a4c5fcff8b3">events</a>;</div>
<div class="line"><span class="lineno">   45</span> </div>
<div class="line"><span class="lineno">   46</span>    <span class="keywordflow">for</span> (i = 0; events[i].<a class="code hl_variable" href="structpcilib__event__description__t.html#a4ecfcf4bc66af02619840abdae852ef5">name</a>; i++) {</div>
<div class="line"><span class="lineno">   47</span>        <span class="keywordflow">if</span> (!strcasecmp(events[i].name, event)) <span class="keywordflow">return</span> events[i].<a class="code hl_variable" href="structpcilib__event__description__t.html#aaa0917db0c58c50597bff1623dfee8a7">evid</a>;</div>
<div class="line"><span class="lineno">   48</span>    }</div>
<div class="line"><span class="lineno">   49</span> </div>
<div class="line"><span class="lineno">   50</span>    <span class="keywordflow">return</span> (<a class="code hl_typedef" href="pcilib_8h.html#ab1b73a64ee45f84b279b5353f38e6167">pcilib_event_t</a>)-1;</div>
<div class="line"><span class="lineno">   51</span>}</div>
<div class="ttc" id="apcilib_8h_html_ab1b73a64ee45f84b279b5353f38e6167"><div class="ttname"><a href="pcilib_8h.html#ab1b73a64ee45f84b279b5353f38e6167">pcilib_event_t</a></div><div class="ttdeci">uint32_t pcilib_event_t</div><div class="ttdef"><b>Definition:</b> pcilib.h:24</div></div>
<div class="ttc" id="astructpcilib__event__description__t_html"><div class="ttname"><a href="structpcilib__event__description__t.html">pcilib_event_description_t</a></div><div class="ttdef"><b>Definition:</b> event.h:35</div></div>
<div class="ttc" id="astructpcilib__event__description__t_html_a4ecfcf4bc66af02619840abdae852ef5"><div class="ttname"><a href="structpcilib__event__description__t.html#a4ecfcf4bc66af02619840abdae852ef5">pcilib_event_description_t::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> event.h:37</div></div>
<div class="ttc" id="astructpcilib__event__description__t_html_aaa0917db0c58c50597bff1623dfee8a7"><div class="ttname"><a href="structpcilib__event__description__t.html#aaa0917db0c58c50597bff1623dfee8a7">pcilib_event_description_t::evid</a></div><div class="ttdeci">pcilib_event_t evid</div><div class="ttdef"><b>Definition:</b> event.h:36</div></div>
<div class="ttc" id="astructpcilib__model__description__t_html_a72c1de0614477c608bd24a4c5fcff8b3"><div class="ttname"><a href="structpcilib__model__description__t.html#a72c1de0614477c608bd24a4c5fcff8b3">pcilib_model_description_t::events</a></div><div class="ttdeci">const pcilib_event_description_t * events</div><div class="ttdef"><b>Definition:</b> model.h:25</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="structpcilib__model__description__t.html#a72c1de0614477c608bd24a4c5fcff8b3">pcilib_model_description_t::events</a>, <a class="el" href="structpcilib__event__description__t.html#aaa0917db0c58c50597bff1623dfee8a7">pcilib_event_description_t::evid</a>, <a class="el" href="structpcilib__event__description__t.html#a4ecfcf4bc66af02619840abdae852ef5">pcilib_event_description_t::name</a>, and <a class="el" href="model_8c.html#ae7954738bb4b923ee87520c4538ba873">pcilib_get_model_description()</a>.</p>

</div>
</div>
<a id="ga33e1436a3237d90051fee288e4d5cc32" name="ga33e1436a3237d90051fee288e4d5cc32"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga33e1436a3237d90051fee288e4d5cc32">&#9670;&#160;</a></span>pcilib_get_event_engine()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="pcilib_8h.html#a3a20e91b3938bbd38c670f6dcbdc2ab2">pcilib_context_t</a> * pcilib_get_event_engine </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *&#160;</td>
          <td class="paramname"><em>ctx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Provides access to the context of event engine. </p>
<p >This may be required to call implementation-specific functions of event engine. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ctx</td><td>- pcilib context </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- context of event engine or NULL in the case of error. Depending on the implementation can be extension of pcilib_contex_t, it should be safe to type cast if you are running the correct engine. </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">   82</span>                                                         {</div>
<div class="line"><span class="lineno">   83</span>    <span class="keywordflow">return</span> ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a887deef86e2af6248df3326302bbce00">event_ctx</a>;</div>
<div class="line"><span class="lineno">   84</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="structpcilib__s.html#a887deef86e2af6248df3326302bbce00">pcilib_s::event_ctx</a>.</p>

</div>
</div>
<a id="gaeda387526233181379b0bb299fc87869" name="gaeda387526233181379b0bb299fc87869"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaeda387526233181379b0bb299fc87869">&#9670;&#160;</a></span>pcilib_get_next_event()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pcilib_get_next_event </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pcilib_8h.html#a1d84306119429755a7bfd73b953c01dc">pcilib_timeout_t</a>&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pcilib_8h.html#abcd8f5153b232dd18811548742390c2b">pcilib_event_id_t</a> *&#160;</td>
          <td class="paramname"><em>evid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>info_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpcilib__event__info__t.html">pcilib_event_info_t</a> *&#160;</td>
          <td class="paramname"><em>info</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Waits until the next event is available. </p>
<p >The event is only returned when all the data associated with the event is received from hardware. So, the raw data is necessarily present, but availability of alternative data formats is optional. Depending on the implementation and current configuration, the data decoding can be performed beforehand, in parallel, or only them the data is requested with <a class="el" href="group__public__api__event__data.html#gad3b04e153c6d8b8e92ac399334079deb" title="Returns pointer to the data of the specified type associated with the specified event.">pcilib_get_data()</a> or <a class="el" href="group__public__api__event__data.html#gac13f412726778027ce5db94ac80f75a3" title="Copies the data of the specified type associated with the specified event into the provided buffer.">pcilib_copy_data()</a> calls.</p>
<p >The function is thread-safe. The multiple requests to <a class="el" href="group__public__api__event.html#gaf30bc783e3c29f93656623db3a0f377d" title="Streams the incomming events to the provided callback function.">pcilib_stream()</a> and <a class="el" href="group__public__api__event.html#gaeda387526233181379b0bb299fc87869" title="Waits until the next event is available.">pcilib_get_next_event()</a> will be automatically serialized by the event engine. The client application may get hold on the data from multiple events simultaneously. However, the data could be overwritten meanwhile by the hardware. The <a class="el" href="group__public__api__event__data.html#ga008b0f404f4aaf119eeb80637a333c02">pcilib_return_data()</a> will inform if it has happened by returning <a class="el" href="error_8h.html#a0c59f7091fd2446121868635aca9e60cab6117698312a0359a40a3fa5168791ea">PCILIB_ERROR_OVERWRITTEN</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ctx</td><td>- pcilib context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>- specifies number of microseconds to wait for next event before reporting timeout, special values <a class="el" href="pcilib_8h.html#a166dd3b3c2d265ec0c88cf5ed001b511">PCILIB_TIMEOUT_IMMEDIATE</a> and <a class="el" href="pcilib_8h.html#a01c9c2fd95e634fde53208e3d27ccd84">PCILIB_TIMEOUT_INFINITE</a> are supported. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">evid</td><td>- the event ID is returned in this parameter </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">info_size</td><td>- the size of the passed event info structure (the implementation of event engine may extend the standad <a class="el" href="structpcilib__event__info__t.html">pcilib_event_info_t</a> definition and provide extra information about the event. If big enough info buffer is provided, this additional information will be copied as well. Otherwise only standard information is provided. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">info</td><td>- The information about the recorded event is written to <code>info</code> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- error code or 0 on success </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  233</span>                                                                                                                                         {</div>
<div class="line"><span class="lineno">  234</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structpcilib__event__api__description__t.html">pcilib_event_api_description_t</a> *api;</div>
<div class="line"><span class="lineno">  235</span><span class="comment">//    pcilib_return_event_callback_context_t user;</span></div>
<div class="line"><span class="lineno">  236</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structpcilib__model__description__t.html">pcilib_model_description_t</a> *model_info = <a class="code hl_function" href="model_8c.html#ae7954738bb4b923ee87520c4538ba873">pcilib_get_model_description</a>(ctx);</div>
<div class="line"><span class="lineno">  237</span> </div>
<div class="line"><span class="lineno">  238</span>    api = model_info-&gt;<a class="code hl_variable" href="structpcilib__model__description__t.html#a621b57704843da1a23291324398b9cd5">api</a>;</div>
<div class="line"><span class="lineno">  239</span>    <span class="keywordflow">if</span> (!api) {</div>
<div class="line"><span class="lineno">  240</span>        <a class="code hl_define" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>(<span class="stringliteral">&quot;Event API is not supported by the selected model&quot;</span>);</div>
<div class="line"><span class="lineno">  241</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="error_8h.html#a0c59f7091fd2446121868635aca9e60caf5392ef1a23835f44ebfe662e3d2988c">PCILIB_ERROR_NOTSUPPORTED</a>;</div>
<div class="line"><span class="lineno">  242</span>    }</div>
<div class="line"><span class="lineno">  243</span> </div>
<div class="line"><span class="lineno">  244</span>    <span class="keywordflow">if</span> (api-&gt;<a class="code hl_variable" href="structpcilib__event__api__description__t.html#aff3a64cd807ef6fd7979d96c0a0ef7e1">next_event</a>) </div>
<div class="line"><span class="lineno">  245</span>        <span class="keywordflow">return</span> api-&gt;<a class="code hl_variable" href="structpcilib__event__api__description__t.html#aff3a64cd807ef6fd7979d96c0a0ef7e1">next_event</a>(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a887deef86e2af6248df3326302bbce00">event_ctx</a>, timeout, evid, info_size, info);</div>
<div class="line"><span class="lineno">  246</span> </div>
<div class="line"><span class="lineno">  247</span><span class="comment">/*      </span></div>
<div class="line"><span class="lineno">  248</span><span class="comment">    if (api-&gt;stream) {</span></div>
<div class="line"><span class="lineno">  249</span><span class="comment">        err = api-&gt;stream(ctx-&gt;event_ctx, 1, timeout, pcilib_return_event_callback, &amp;user);</span></div>
<div class="line"><span class="lineno">  250</span><span class="comment">        if (err) return err;</span></div>
<div class="line"><span class="lineno">  251</span><span class="comment">        </span></div>
<div class="line"><span class="lineno">  252</span><span class="comment">        if (evid) *evid = user-&gt;event_id;</span></div>
<div class="line"><span class="lineno">  253</span><span class="comment">        if (info) *info = user-&gt;info;</span></div>
<div class="line"><span class="lineno">  254</span><span class="comment"></span> </div>
<div class="line"><span class="lineno">  255</span><span class="comment">        return 0;</span></div>
<div class="line"><span class="lineno">  256</span><span class="comment">    }</span></div>
<div class="line"><span class="lineno">  257</span><span class="comment">*/</span></div>
<div class="line"><span class="lineno">  258</span> </div>
<div class="line"><span class="lineno">  259</span>    <a class="code hl_define" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>(<span class="stringliteral">&quot;Event enumeration is not suppored by API&quot;</span>);</div>
<div class="line"><span class="lineno">  260</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="error_8h.html#a0c59f7091fd2446121868635aca9e60caf5392ef1a23835f44ebfe662e3d2988c">PCILIB_ERROR_NOTSUPPORTED</a>;</div>
<div class="line"><span class="lineno">  261</span>}</div>
<div class="ttc" id="astructpcilib__event__api__description__t_html_aff3a64cd807ef6fd7979d96c0a0ef7e1"><div class="ttname"><a href="structpcilib__event__api__description__t.html#aff3a64cd807ef6fd7979d96c0a0ef7e1">pcilib_event_api_description_t::next_event</a></div><div class="ttdeci">int(* next_event)(pcilib_context_t *ctx, pcilib_timeout_t timeout, pcilib_event_id_t *evid, size_t info_size, pcilib_event_info_t *info)</div><div class="ttdef"><b>Definition:</b> event.h:75</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="structpcilib__model__description__t.html#a621b57704843da1a23291324398b9cd5">pcilib_model_description_t::api</a>, <a class="el" href="structpcilib__s.html#a887deef86e2af6248df3326302bbce00">pcilib_s::event_ctx</a>, <a class="el" href="structpcilib__event__api__description__t.html#aff3a64cd807ef6fd7979d96c0a0ef7e1">pcilib_event_api_description_t::next_event</a>, <a class="el" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>, <a class="el" href="error_8h.html#a0c59f7091fd2446121868635aca9e60caf5392ef1a23835f44ebfe662e3d2988c">PCILIB_ERROR_NOTSUPPORTED</a>, and <a class="el" href="model_8c.html#ae7954738bb4b923ee87520c4538ba873">pcilib_get_model_description()</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__public__api__event__data.html#ga8f8ffb270982d787a6b5a7ce9a37fcfd">pcilib_grab()</a>.</p>

</div>
</div>
<a id="gac332a0187e8005d876393bb7332a6284" name="gac332a0187e8005d876393bb7332a6284"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac332a0187e8005d876393bb7332a6284">&#9670;&#160;</a></span>pcilib_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pcilib_start </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pcilib_8h.html#ab1b73a64ee45f84b279b5353f38e6167">pcilib_event_t</a>&#160;</td>
          <td class="paramname"><em>ev_mask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pcilib_8h.html#a3648d1d610b76a30083daf3556964d56">pcilib_event_flags_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Analyzes current configuration, allocates necessary buffers and spawns required data processing threads. </p>
<p >Depending on the implementation and the current configuration, the actual event grabbing may start already here. In this case, the preprocessed events will be storred in the temporary buffers and may be lost if <a class="el" href="group__public__api__event.html#gaabe07187e09967ce6d825d60beeabc9c" title="Stops event grabbing and optionally cleans up the used memory.">pcilib_stop()</a> is called before reading them out. Alternatively, the actual grabbing may only commend when the <a class="el" href="group__public__api__event.html#gaf30bc783e3c29f93656623db3a0f377d" title="Streams the incomming events to the provided callback function.">pcilib_stream()</a> or <a class="el" href="group__public__api__event.html#gaeda387526233181379b0bb299fc87869" title="Waits until the next event is available.">pcilib_get_next_event()</a> functions are executed. The function is non-blocking and will return immediately after allocating required memory and spawning of the preprocessing threads. It is important to call <a class="el" href="group__public__api__event.html#gaabe07187e09967ce6d825d60beeabc9c" title="Stops event grabbing and optionally cleans up the used memory.">pcilib_stop()</a> in the end.</p>
<p >The grabbing will stop automatically if conditions defined using <a class="el" href="group__public__api__event.html#ga583afaaea8a17740ac292351bd802e90" title="Configures conditions when the grabbing will be stopped automatically.">pcilib_configure_autostop()</a> function are met. It also possible to stop grabbing using <a class="el" href="group__public__api__event.html#gaabe07187e09967ce6d825d60beeabc9c" title="Stops event grabbing and optionally cleans up the used memory.">pcilib_stop()</a> call at any moment.</p>
<p >The process- and thread-safety is implementation depedent. However, normally the event engine will depend on DMA and if DMA engine is process-safe it will ensure the process-safety for event engine as well. The thread-safety is not directly ensured by currently implemented Event engines. The functions of Event engine may be called from multiple threads, but it is the user responsibility to ensure that only a single function of Event engine is running at each moment. On other hand, the Event and register APIs may be used in parallel.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ctx</td><td>- pcilib context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ev_mask</td><td>- specifies events to listen for, use <a class="el" href="pcilib_8h.html#acb21d295839c40d85bcd4a6f8868a751">PCILIB_EVENTS_ALL</a> to grab all events </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>- various implementation-specific flags controlling operation of event engine<ul>
<li><a class="el" href="pcilib_8h.html#a3648d1d610b76a30083daf3556964d56a2b0985e3d1210184bb0e120f3cfdad65" title="Enables preprocessing of the raw data (decoding frames, etc.)">PCILIB_EVENT_FLAG_PREPROCESS</a> - requires event preprocessing (i.e. event data is decoded before it is requested, this is often required for multi-threaded processing)</li>
<li><a class="el" href="pcilib_8h.html#a3648d1d610b76a30083daf3556964d56a3f7b308f36b857b7c837c65eda1b129a" title="Do not parse data, just read raw and pass it to rawdata callback.">PCILIB_EVENT_FLAG_RAW_DATA_ONLY</a> - disables data processing at all, only raw data will be provided in this case </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- error code or 0 on success </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  159</span>                                                                                       {</div>
<div class="line"><span class="lineno">  160</span>    <span class="keywordtype">int</span> err;</div>
<div class="line"><span class="lineno">  161</span>    <a class="code hl_typedef" href="pcilib_8h.html#acb54b82c4cfdb69491465e3c94dadf75">pcilib_register_value_t</a> max_threads;</div>
<div class="line"><span class="lineno">  162</span> </div>
<div class="line"><span class="lineno">  163</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structpcilib__event__api__description__t.html">pcilib_event_api_description_t</a> *api;</div>
<div class="line"><span class="lineno">  164</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structpcilib__model__description__t.html">pcilib_model_description_t</a> *model_info = <a class="code hl_function" href="model_8c.html#ae7954738bb4b923ee87520c4538ba873">pcilib_get_model_description</a>(ctx);</div>
<div class="line"><span class="lineno">  165</span> </div>
<div class="line"><span class="lineno">  166</span>    api = model_info-&gt;<a class="code hl_variable" href="structpcilib__model__description__t.html#a621b57704843da1a23291324398b9cd5">api</a>;</div>
<div class="line"><span class="lineno">  167</span>    <span class="keywordflow">if</span> (!api) {</div>
<div class="line"><span class="lineno">  168</span>        <a class="code hl_define" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>(<span class="stringliteral">&quot;Event API is not supported by the selected model&quot;</span>);</div>
<div class="line"><span class="lineno">  169</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="error_8h.html#a0c59f7091fd2446121868635aca9e60caf5392ef1a23835f44ebfe662e3d2988c">PCILIB_ERROR_NOTSUPPORTED</a>;</div>
<div class="line"><span class="lineno">  170</span>    }</div>
<div class="line"><span class="lineno">  171</span> </div>
<div class="line"><span class="lineno">  172</span>    err = <a class="code hl_function" href="group__public__api__register.html#ga33c32bd246c0215de02eacbd50035b83">pcilib_read_register</a>(ctx, <span class="stringliteral">&quot;conf&quot;</span>, <span class="stringliteral">&quot;max_threads&quot;</span>, &amp;max_threads);</div>
<div class="line"><span class="lineno">  173</span>    <span class="keywordflow">if</span> (!err) {</div>
<div class="line"><span class="lineno">  174</span>        err = <a class="code hl_function" href="event_8c.html#a5934988d0c9525f2b4b7a65fbea4ccc2">pcilib_configure_preprocessing_threads</a>(ctx, max_threads);</div>
<div class="line"><span class="lineno">  175</span>        <span class="keywordflow">if</span> (err) <a class="code hl_define" href="error_8h.html#a62fff84bc7941d1a39700b931716bbe9">pcilib_warning</a>(<span class="stringliteral">&quot;Error (%i) configuring number of preprocessing threads&quot;</span>, err);</div>
<div class="line"><span class="lineno">  176</span>    }</div>
<div class="line"><span class="lineno">  177</span> </div>
<div class="line"><span class="lineno">  178</span>    <span class="keywordflow">if</span> (api-&gt;<a class="code hl_variable" href="structpcilib__event__api__description__t.html#a60f703232fb7ec0d3a627facb2432c4e">start</a>) </div>
<div class="line"><span class="lineno">  179</span>        <span class="keywordflow">return</span> api-&gt;<a class="code hl_variable" href="structpcilib__event__api__description__t.html#a60f703232fb7ec0d3a627facb2432c4e">start</a>(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a887deef86e2af6248df3326302bbce00">event_ctx</a>, event_mask, flags);</div>
<div class="line"><span class="lineno">  180</span> </div>
<div class="line"><span class="lineno">  181</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  182</span>}</div>
<div class="ttc" id="aerror_8h_html_a62fff84bc7941d1a39700b931716bbe9"><div class="ttname"><a href="error_8h.html#a62fff84bc7941d1a39700b931716bbe9">pcilib_warning</a></div><div class="ttdeci">#define pcilib_warning(...)</div><div class="ttdef"><b>Definition:</b> error.h:69</div></div>
<div class="ttc" id="aevent_8c_html_a5934988d0c9525f2b4b7a65fbea4ccc2"><div class="ttname"><a href="event_8c.html#a5934988d0c9525f2b4b7a65fbea4ccc2">pcilib_configure_preprocessing_threads</a></div><div class="ttdeci">int pcilib_configure_preprocessing_threads(pcilib_t *ctx, size_t max_threads)</div><div class="ttdef"><b>Definition:</b> event.c:144</div></div>
<div class="ttc" id="agroup__public__api__register_html_ga33c32bd246c0215de02eacbd50035b83"><div class="ttname"><a href="group__public__api__register.html#ga33c32bd246c0215de02eacbd50035b83">pcilib_read_register</a></div><div class="ttdeci">int pcilib_read_register(pcilib_t *ctx, const char *bank, const char *regname, pcilib_register_value_t *value)</div><div class="ttdoc">Reads the specified register.</div><div class="ttdef"><b>Definition:</b> register.c:256</div></div>
<div class="ttc" id="apcilib_8h_html_acb54b82c4cfdb69491465e3c94dadf75"><div class="ttname"><a href="pcilib_8h.html#acb54b82c4cfdb69491465e3c94dadf75">pcilib_register_value_t</a></div><div class="ttdeci">uint64_t pcilib_register_value_t</div><div class="ttdoc">Type holding the register value.</div><div class="ttdef"><b>Definition:</b> pcilib.h:20</div></div>
<div class="ttc" id="astructpcilib__event__api__description__t_html_a60f703232fb7ec0d3a627facb2432c4e"><div class="ttname"><a href="structpcilib__event__api__description__t.html#a60f703232fb7ec0d3a627facb2432c4e">pcilib_event_api_description_t::start</a></div><div class="ttdeci">int(* start)(pcilib_context_t *ctx, pcilib_event_t event_mask, pcilib_event_flags_t flags)</div><div class="ttdef"><b>Definition:</b> event.h:70</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="structpcilib__model__description__t.html#a621b57704843da1a23291324398b9cd5">pcilib_model_description_t::api</a>, <a class="el" href="structpcilib__s.html#a887deef86e2af6248df3326302bbce00">pcilib_s::event_ctx</a>, <a class="el" href="event_8c.html#a5934988d0c9525f2b4b7a65fbea4ccc2">pcilib_configure_preprocessing_threads()</a>, <a class="el" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>, <a class="el" href="error_8h.html#a0c59f7091fd2446121868635aca9e60caf5392ef1a23835f44ebfe662e3d2988c">PCILIB_ERROR_NOTSUPPORTED</a>, <a class="el" href="model_8c.html#ae7954738bb4b923ee87520c4538ba873">pcilib_get_model_description()</a>, <a class="el" href="group__public__api__register.html#ga33c32bd246c0215de02eacbd50035b83">pcilib_read_register()</a>, <a class="el" href="error_8h.html#a62fff84bc7941d1a39700b931716bbe9">pcilib_warning</a>, and <a class="el" href="structpcilib__event__api__description__t.html#a60f703232fb7ec0d3a627facb2432c4e">pcilib_event_api_description_t::start</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__public__api__event__data.html#ga8f8ffb270982d787a6b5a7ce9a37fcfd">pcilib_grab()</a>.</p>

</div>
</div>
<a id="gaabe07187e09967ce6d825d60beeabc9c" name="gaabe07187e09967ce6d825d60beeabc9c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaabe07187e09967ce6d825d60beeabc9c">&#9670;&#160;</a></span>pcilib_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pcilib_stop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pcilib_8h.html#a3648d1d610b76a30083daf3556964d56">pcilib_event_flags_t</a>&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops event grabbing and optionally cleans up the used memory. </p>
<p >This function operates in two modes. If <a class="el" href="pcilib_8h.html#a3648d1d610b76a30083daf3556964d56a0119159c021682fdf87fe69017f1638a" title="Do not cleanup, just stop acquiring new frames, the cleanup should be requested afterwards.">PCILIB_EVENT_FLAG_STOP_ONLY</a> flag is specified, the event grabbing is stopped, but all memory structures are kept intact. This also forces the blocked <a class="el" href="group__public__api__event.html#gaf30bc783e3c29f93656623db3a0f377d" title="Streams the incomming events to the provided callback function.">pcilib_stream()</a> and <a class="el" href="group__public__api__event.html#gaeda387526233181379b0bb299fc87869" title="Waits until the next event is available.">pcilib_get_next_event()</a> to return after a short while.</p>
<p >Unlike DMA engine, the event engine is not persistent and is always completely stopped when application is finished. Therefore, later the <a class="el" href="group__public__api__event.html#gaabe07187e09967ce6d825d60beeabc9c" title="Stops event grabbing and optionally cleans up the used memory.">pcilib_stop()</a> should be necessarily called again without <a class="el" href="pcilib_8h.html#a3648d1d610b76a30083daf3556964d56a0119159c021682fdf87fe69017f1638a" title="Do not cleanup, just stop acquiring new frames, the cleanup should be requested afterwards.">PCILIB_EVENT_FLAG_STOP_ONLY</a> flag to commend full clean up and release all used memory. Such call may only be issued when no threads are using Event engine any more. There should be no functions waiting for next event to appear and all of the obtained event data should be already returned back to the system.</p>
<p >pcilib_stop executed with <a class="el" href="pcilib_8h.html#a3648d1d610b76a30083daf3556964d56a0119159c021682fdf87fe69017f1638a" title="Do not cleanup, just stop acquiring new frames, the cleanup should be requested afterwards.">PCILIB_EVENT_FLAG_STOP_ONLY</a> is thread safe. The full version of the function is not and should be never called in parallel with any other action of the event engine. Actually, it is thread safe in the case of ipecamera, but this is not guaranteed for other event engines.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ctx</td><td>- pcilib context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">flags</td><td>- flags specifying operation mode<ul>
<li><a class="el" href="pcilib_8h.html#a3648d1d610b76a30083daf3556964d56a0119159c021682fdf87fe69017f1638a" title="Do not cleanup, just stop acquiring new frames, the cleanup should be requested afterwards.">PCILIB_EVENT_FLAG_STOP_ONLY</a> - instructs library to keep all the data structures intact and to onlystop the data grabbing </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- error code or 0 on success </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  184</span>                                                           {</div>
<div class="line"><span class="lineno">  185</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structpcilib__event__api__description__t.html">pcilib_event_api_description_t</a> *api;</div>
<div class="line"><span class="lineno">  186</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structpcilib__model__description__t.html">pcilib_model_description_t</a> *model_info = <a class="code hl_function" href="model_8c.html#ae7954738bb4b923ee87520c4538ba873">pcilib_get_model_description</a>(ctx);</div>
<div class="line"><span class="lineno">  187</span> </div>
<div class="line"><span class="lineno">  188</span>    api = model_info-&gt;<a class="code hl_variable" href="structpcilib__model__description__t.html#a621b57704843da1a23291324398b9cd5">api</a>;</div>
<div class="line"><span class="lineno">  189</span>    <span class="keywordflow">if</span> (!api) {</div>
<div class="line"><span class="lineno">  190</span>        <a class="code hl_define" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>(<span class="stringliteral">&quot;Event API is not supported by the selected model&quot;</span>);</div>
<div class="line"><span class="lineno">  191</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="error_8h.html#a0c59f7091fd2446121868635aca9e60caf5392ef1a23835f44ebfe662e3d2988c">PCILIB_ERROR_NOTSUPPORTED</a>;</div>
<div class="line"><span class="lineno">  192</span>    }</div>
<div class="line"><span class="lineno">  193</span> </div>
<div class="line"><span class="lineno">  194</span>    <span class="keywordflow">if</span> (api-&gt;<a class="code hl_variable" href="structpcilib__event__api__description__t.html#a423180e6f175999b2f90ce73ff899a2a">stop</a>) </div>
<div class="line"><span class="lineno">  195</span>        <span class="keywordflow">return</span> api-&gt;<a class="code hl_variable" href="structpcilib__event__api__description__t.html#a423180e6f175999b2f90ce73ff899a2a">stop</a>(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a887deef86e2af6248df3326302bbce00">event_ctx</a>, flags);</div>
<div class="line"><span class="lineno">  196</span> </div>
<div class="line"><span class="lineno">  197</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  198</span>}</div>
<div class="ttc" id="astructpcilib__event__api__description__t_html_a423180e6f175999b2f90ce73ff899a2a"><div class="ttname"><a href="structpcilib__event__api__description__t.html#a423180e6f175999b2f90ce73ff899a2a">pcilib_event_api_description_t::stop</a></div><div class="ttdeci">int(* stop)(pcilib_context_t *ctx, pcilib_event_flags_t flags)</div><div class="ttdef"><b>Definition:</b> event.h:71</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="structpcilib__model__description__t.html#a621b57704843da1a23291324398b9cd5">pcilib_model_description_t::api</a>, <a class="el" href="structpcilib__s.html#a887deef86e2af6248df3326302bbce00">pcilib_s::event_ctx</a>, <a class="el" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>, <a class="el" href="error_8h.html#a0c59f7091fd2446121868635aca9e60caf5392ef1a23835f44ebfe662e3d2988c">PCILIB_ERROR_NOTSUPPORTED</a>, <a class="el" href="model_8c.html#ae7954738bb4b923ee87520c4538ba873">pcilib_get_model_description()</a>, and <a class="el" href="structpcilib__event__api__description__t.html#a423180e6f175999b2f90ce73ff899a2a">pcilib_event_api_description_t::stop</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__public__api__event__data.html#ga8f8ffb270982d787a6b5a7ce9a37fcfd">pcilib_grab()</a>.</p>

</div>
</div>
<a id="gaf30bc783e3c29f93656623db3a0f377d" name="gaf30bc783e3c29f93656623db3a0f377d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf30bc783e3c29f93656623db3a0f377d">&#9670;&#160;</a></span>pcilib_stream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pcilib_stream </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pcilib_8h.html#a1992207a2a6350e743a1d7b3785fe2f6">pcilib_event_callback_t</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Streams the incomming events to the provided callback function. </p>
<p >If Event engine is not started yet, it will be started and terminated upon the completion of the call. The streaming will continue while Event engine is started and the callback function does not return an error (negative) or <a class="el" href="pcilib_8h.html#afbb8d495f8afac2f84ec0460d0f28bbaacace816aaa81898a81c9d8f0fb638a5b" title="stop streaming">PCILIB_STREAMING_STOP</a>.</p>
<p >The callback is called only when all the data associated with the event is received from hardware. So, the raw data is necessarily present, but availability of alternative data formats is optional. Depending on the implementation and current configuration, the data decoding can be performed beforehand, in parallel with callback execution, or only them the data is requested with <a class="el" href="group__public__api__event__data.html#gad3b04e153c6d8b8e92ac399334079deb" title="Returns pointer to the data of the specified type associated with the specified event.">pcilib_get_data()</a> or <a class="el" href="group__public__api__event__data.html#gac13f412726778027ce5db94ac80f75a3" title="Copies the data of the specified type associated with the specified event into the provided buffer.">pcilib_copy_data()</a> calls.</p>
<p >The function is thread-safe. The multiple requests to <a class="el" href="group__public__api__event.html#gaf30bc783e3c29f93656623db3a0f377d" title="Streams the incomming events to the provided callback function.">pcilib_stream()</a> and <a class="el" href="group__public__api__event.html#gaeda387526233181379b0bb299fc87869" title="Waits until the next event is available.">pcilib_get_next_event()</a> will be automatically serialized by the event engine. The <a class="el" href="group__public__api__event.html#gaf30bc783e3c29f93656623db3a0f377d" title="Streams the incomming events to the provided callback function.">pcilib_stream()</a> is running in the single thread and no new calls to callback are issued until currently executed callback returns. The client application may get hold on the data from multiple events simultaneously. However, the data could be overwritten meanwhile by the hardware. The <a class="el" href="group__public__api__event__data.html#ga008b0f404f4aaf119eeb80637a333c02">pcilib_return_data()</a> will inform if it has happened by returning <a class="el" href="error_8h.html#a0c59f7091fd2446121868635aca9e60cab6117698312a0359a40a3fa5168791ea">PCILIB_ERROR_OVERWRITTEN</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ctx</td><td>- pcilib context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">callback</td><td>- callback function to call for each event, the streaming is stopped if it return <a class="el" href="pcilib_8h.html#afbb8d495f8afac2f84ec0460d0f28bbaacace816aaa81898a81c9d8f0fb638a5b" title="stop streaming">PCILIB_STREAMING_STOP</a> or negative value indicating the error </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">user</td><td>- used data is passed through as the last parameter of callback function </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- error code or 0 on success </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  200</span>                                                                               {</div>
<div class="line"><span class="lineno">  201</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structpcilib__event__api__description__t.html">pcilib_event_api_description_t</a> *api;</div>
<div class="line"><span class="lineno">  202</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structpcilib__model__description__t.html">pcilib_model_description_t</a> *model_info = <a class="code hl_function" href="model_8c.html#ae7954738bb4b923ee87520c4538ba873">pcilib_get_model_description</a>(ctx);</div>
<div class="line"><span class="lineno">  203</span> </div>
<div class="line"><span class="lineno">  204</span>    api = model_info-&gt;<a class="code hl_variable" href="structpcilib__model__description__t.html#a621b57704843da1a23291324398b9cd5">api</a>;</div>
<div class="line"><span class="lineno">  205</span>    <span class="keywordflow">if</span> (!api) {</div>
<div class="line"><span class="lineno">  206</span>        <a class="code hl_define" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>(<span class="stringliteral">&quot;Event API is not supported by the selected model&quot;</span>);</div>
<div class="line"><span class="lineno">  207</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="error_8h.html#a0c59f7091fd2446121868635aca9e60caf5392ef1a23835f44ebfe662e3d2988c">PCILIB_ERROR_NOTSUPPORTED</a>;</div>
<div class="line"><span class="lineno">  208</span>    }</div>
<div class="line"><span class="lineno">  209</span> </div>
<div class="line"><span class="lineno">  210</span>    <span class="keywordflow">if</span> (api-&gt;<a class="code hl_variable" href="structpcilib__event__api__description__t.html#a84eded4bc93387a014cd990892ad4084">stream</a>)</div>
<div class="line"><span class="lineno">  211</span>        <span class="keywordflow">return</span> api-&gt;<a class="code hl_variable" href="structpcilib__event__api__description__t.html#a84eded4bc93387a014cd990892ad4084">stream</a>(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a887deef86e2af6248df3326302bbce00">event_ctx</a>, callback, user);</div>
<div class="line"><span class="lineno">  212</span> </div>
<div class="line"><span class="lineno">  213</span>    <span class="keywordflow">if</span> (api-&gt;<a class="code hl_variable" href="structpcilib__event__api__description__t.html#aff3a64cd807ef6fd7979d96c0a0ef7e1">next_event</a>) {</div>
<div class="line"><span class="lineno">  214</span>        <a class="code hl_define" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>(<span class="stringliteral">&quot;Streaming using next_event API is not implemented yet&quot;</span>);</div>
<div class="line"><span class="lineno">  215</span>    }</div>
<div class="line"><span class="lineno">  216</span> </div>
<div class="line"><span class="lineno">  217</span>    <a class="code hl_define" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>(<span class="stringliteral">&quot;Event enumeration is not suppored by API&quot;</span>);</div>
<div class="line"><span class="lineno">  218</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="error_8h.html#a0c59f7091fd2446121868635aca9e60caf5392ef1a23835f44ebfe662e3d2988c">PCILIB_ERROR_NOTSUPPORTED</a>;</div>
<div class="line"><span class="lineno">  219</span>}</div>
<div class="ttc" id="astructpcilib__event__api__description__t_html_a84eded4bc93387a014cd990892ad4084"><div class="ttname"><a href="structpcilib__event__api__description__t.html#a84eded4bc93387a014cd990892ad4084">pcilib_event_api_description_t::stream</a></div><div class="ttdeci">int(* stream)(pcilib_context_t *ctx, pcilib_event_callback_t callback, void *user)</div><div class="ttdef"><b>Definition:</b> event.h:74</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="structpcilib__model__description__t.html#a621b57704843da1a23291324398b9cd5">pcilib_model_description_t::api</a>, <a class="el" href="structpcilib__s.html#a887deef86e2af6248df3326302bbce00">pcilib_s::event_ctx</a>, <a class="el" href="structpcilib__event__api__description__t.html#aff3a64cd807ef6fd7979d96c0a0ef7e1">pcilib_event_api_description_t::next_event</a>, <a class="el" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>, <a class="el" href="error_8h.html#a0c59f7091fd2446121868635aca9e60caf5392ef1a23835f44ebfe662e3d2988c">PCILIB_ERROR_NOTSUPPORTED</a>, <a class="el" href="model_8c.html#ae7954738bb4b923ee87520c4538ba873">pcilib_get_model_description()</a>, and <a class="el" href="structpcilib__event__api__description__t.html#a84eded4bc93387a014cd990892ad4084">pcilib_event_api_description_t::stream</a>.</p>

</div>
</div>
<a id="gad105b1a2d56e98985ce6ea61db010d60" name="gad105b1a2d56e98985ce6ea61db010d60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad105b1a2d56e98985ce6ea61db010d60">&#9670;&#160;</a></span>pcilib_trigger()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pcilib_trigger </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pcilib_8h.html#ab1b73a64ee45f84b279b5353f38e6167">pcilib_event_t</a>&#160;</td>
          <td class="paramname"><em>event</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>trigger_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>trigger_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Issues a single software trigger for the specified event. </p>
<p >No hardware support is required. The function is fully thread safe and can be called while other thread is blocked in the <a class="el" href="group__public__api__event.html#gaf30bc783e3c29f93656623db3a0f377d" title="Streams the incomming events to the provided callback function.">pcilib_stream()</a> or <a class="el" href="group__public__api__event.html#gaeda387526233181379b0bb299fc87869" title="Waits until the next event is available.">pcilib_get_next_event()</a> calls.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ctx</td><td>- pcilib context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">event</td><td>- specifies ID of the event to trigger </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">trigger_size</td><td>- specifies the size of <code>trigger</code> buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">trigger_data</td><td>- this implementation-specific buffer which will be passed through to the Event engine </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- error code or 0 on success </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">  263</span>                                                                                                 {</div>
<div class="line"><span class="lineno">  264</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structpcilib__event__api__description__t.html">pcilib_event_api_description_t</a> *api;</div>
<div class="line"><span class="lineno">  265</span>    <span class="keyword">const</span> <a class="code hl_struct" href="structpcilib__model__description__t.html">pcilib_model_description_t</a> *model_info = <a class="code hl_function" href="model_8c.html#ae7954738bb4b923ee87520c4538ba873">pcilib_get_model_description</a>(ctx);</div>
<div class="line"><span class="lineno">  266</span> </div>
<div class="line"><span class="lineno">  267</span>    api = model_info-&gt;<a class="code hl_variable" href="structpcilib__model__description__t.html#a621b57704843da1a23291324398b9cd5">api</a>;</div>
<div class="line"><span class="lineno">  268</span>    <span class="keywordflow">if</span> (!api) {</div>
<div class="line"><span class="lineno">  269</span>        <a class="code hl_define" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>(<span class="stringliteral">&quot;Event API is not supported by the selected model&quot;</span>);</div>
<div class="line"><span class="lineno">  270</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="error_8h.html#a0c59f7091fd2446121868635aca9e60caf5392ef1a23835f44ebfe662e3d2988c">PCILIB_ERROR_NOTSUPPORTED</a>;</div>
<div class="line"><span class="lineno">  271</span>    }</div>
<div class="line"><span class="lineno">  272</span> </div>
<div class="line"><span class="lineno">  273</span>    <span class="keywordflow">if</span> (api-&gt;<a class="code hl_variable" href="structpcilib__event__api__description__t.html#a3086aaf5d48cd16ff6b4600854e72ab8">trigger</a>) </div>
<div class="line"><span class="lineno">  274</span>        <span class="keywordflow">return</span> api-&gt;<a class="code hl_variable" href="structpcilib__event__api__description__t.html#a3086aaf5d48cd16ff6b4600854e72ab8">trigger</a>(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a887deef86e2af6248df3326302bbce00">event_ctx</a>, event, trigger_size, trigger_data);</div>
<div class="line"><span class="lineno">  275</span> </div>
<div class="line"><span class="lineno">  276</span>    <a class="code hl_define" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>(<span class="stringliteral">&quot;Self triggering is not supported by the selected model&quot;</span>);</div>
<div class="line"><span class="lineno">  277</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="error_8h.html#a0c59f7091fd2446121868635aca9e60caf5392ef1a23835f44ebfe662e3d2988c">PCILIB_ERROR_NOTSUPPORTED</a>;</div>
<div class="line"><span class="lineno">  278</span>}</div>
<div class="ttc" id="astructpcilib__event__api__description__t_html_a3086aaf5d48cd16ff6b4600854e72ab8"><div class="ttname"><a href="structpcilib__event__api__description__t.html#a3086aaf5d48cd16ff6b4600854e72ab8">pcilib_event_api_description_t::trigger</a></div><div class="ttdeci">int(* trigger)(pcilib_context_t *ctx, pcilib_event_t event, size_t trigger_size, void *trigger_data)</div><div class="ttdef"><b>Definition:</b> event.h:72</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="structpcilib__model__description__t.html#a621b57704843da1a23291324398b9cd5">pcilib_model_description_t::api</a>, <a class="el" href="structpcilib__s.html#a887deef86e2af6248df3326302bbce00">pcilib_s::event_ctx</a>, <a class="el" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>, <a class="el" href="error_8h.html#a0c59f7091fd2446121868635aca9e60caf5392ef1a23835f44ebfe662e3d2988c">PCILIB_ERROR_NOTSUPPORTED</a>, <a class="el" href="model_8c.html#ae7954738bb4b923ee87520c4538ba873">pcilib_get_model_description()</a>, and <a class="el" href="structpcilib__event__api__description__t.html#a3086aaf5d48cd16ff6b4600854e72ab8">pcilib_event_api_description_t::trigger</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__public__api__event__data.html#ga8f8ffb270982d787a6b5a7ce9a37fcfd">pcilib_grab()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jun 18 2024 22:02:48 for pcilib by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
