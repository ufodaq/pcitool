<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>pcilib: xml.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">pcilib
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_0b5c8f32f3013e7b96dc99509907414c.html">pcilib</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">xml.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>this file is the main source file for the implementation of dynamic registers using xml and several funtionalities for the "pci-tool" line command tool from XML files. the xml part has been implemented using libxml2  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;strings.h&gt;</code><br />
<code>#include &lt;dirent.h&gt;</code><br />
<code>#include &lt;errno.h&gt;</code><br />
<code>#include &lt;alloca.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;libxml/xmlschemastypes.h&gt;</code><br />
<code>#include &lt;libxml/tree.h&gt;</code><br />
<code>#include &lt;libxml/parser.h&gt;</code><br />
<code>#include &lt;libxml/xpath.h&gt;</code><br />
<code>#include &lt;libxml/xpathInternals.h&gt;</code><br />
<code>#include &quot;config.h&quot;</code><br />
<code>#include &quot;<a class="el" href="pci_8h_source.html">pci.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="bank_8h_source.html">bank.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="register_8h_source.html">register.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="xml_8h_source.html">xml.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="error_8h_source.html">error.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="view_8h_source.html">view.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="py_8h_source.html">py.h</a>&quot;</code><br />
<code>#include &quot;views/enum.h&quot;</code><br />
<code>#include &quot;views/transform.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structpcilib__xml__register__description__t.html">pcilib_xml_register_description_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a78c99ffd76a7bb3c8c74db76207e9ab4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xml_8c.html#a78c99ffd76a7bb3c8c74db76207e9ab4">_XOPEN_SOURCE</a>&#160;&#160;&#160;700</td></tr>
<tr class="separator:a78c99ffd76a7bb3c8c74db76207e9ab4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3d8a3bd0c0b677acef144f2c2ef6d73"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xml_8c.html#ad3d8a3bd0c0b677acef144f2c2ef6d73">_BSD_SOURCE</a></td></tr>
<tr class="separator:ad3d8a3bd0c0b677acef144f2c2ef6d73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fb447618db946a9e2a596d9ea18763f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xml_8c.html#a8fb447618db946a9e2a596d9ea18763f">_DEFAULT_SOURCE</a></td></tr>
<tr class="separator:a8fb447618db946a9e2a596d9ea18763f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98384bec832ca6ff3faee0f4cd4ffe94"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xml_8c.html#a98384bec832ca6ff3faee0f4cd4ffe94">BANKS_PATH</a>&#160;&#160;&#160;((xmlChar*)&quot;/model/bank&quot;)</td></tr>
<tr class="memdesc:a98384bec832ca6ff3faee0f4cd4ffe94"><td class="mdescLeft">&#160;</td><td class="mdescRight">path to complete nodes of banks  <a href="xml_8c.html#a98384bec832ca6ff3faee0f4cd4ffe94">More...</a><br /></td></tr>
<tr class="separator:a98384bec832ca6ff3faee0f4cd4ffe94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a671d2ff9968781b2f31127a62166f2dc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xml_8c.html#a671d2ff9968781b2f31127a62166f2dc">REGISTERS_PATH</a>&#160;&#160;&#160;((xmlChar*)&quot;./register&quot;)</td></tr>
<tr class="memdesc:a671d2ff9968781b2f31127a62166f2dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">all standard registers nodes  <a href="xml_8c.html#a671d2ff9968781b2f31127a62166f2dc">More...</a><br /></td></tr>
<tr class="separator:a671d2ff9968781b2f31127a62166f2dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b0209fea69480e6341e72c2efd0d14d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xml_8c.html#a6b0209fea69480e6341e72c2efd0d14d">BIT_REGISTERS_PATH</a>&#160;&#160;&#160;((xmlChar*)&quot;./field&quot;)</td></tr>
<tr class="memdesc:a6b0209fea69480e6341e72c2efd0d14d"><td class="mdescLeft">&#160;</td><td class="mdescRight">all bits registers nodes  <a href="xml_8c.html#a6b0209fea69480e6341e72c2efd0d14d">More...</a><br /></td></tr>
<tr class="separator:a6b0209fea69480e6341e72c2efd0d14d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a716e3c92b23fea6a1038a91139ea0cfc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xml_8c.html#a716e3c92b23fea6a1038a91139ea0cfc">REGISTER_VIEWS_PATH</a>&#160;&#160;&#160;((xmlChar*)&quot;./view&quot;)</td></tr>
<tr class="memdesc:a716e3c92b23fea6a1038a91139ea0cfc"><td class="mdescLeft">&#160;</td><td class="mdescRight">supported register &amp; field views  <a href="xml_8c.html#a716e3c92b23fea6a1038a91139ea0cfc">More...</a><br /></td></tr>
<tr class="separator:a716e3c92b23fea6a1038a91139ea0cfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48ae710fd4e63a401e45d9fd3e6c66fd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xml_8c.html#a48ae710fd4e63a401e45d9fd3e6c66fd">TRANSFORM_VIEWS_PATH</a>&#160;&#160;&#160;((xmlChar*)&quot;/model/transform&quot;)</td></tr>
<tr class="memdesc:a48ae710fd4e63a401e45d9fd3e6c66fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">path to complete nodes of views  <a href="xml_8c.html#a48ae710fd4e63a401e45d9fd3e6c66fd">More...</a><br /></td></tr>
<tr class="separator:a48ae710fd4e63a401e45d9fd3e6c66fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afea6e3066f32ee663bd2be2fa2a00988"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xml_8c.html#afea6e3066f32ee663bd2be2fa2a00988">ENUM_VIEWS_PATH</a>&#160;&#160;&#160;((xmlChar*)&quot;/model/enum&quot;)</td></tr>
<tr class="memdesc:afea6e3066f32ee663bd2be2fa2a00988"><td class="mdescLeft">&#160;</td><td class="mdescRight">path to complete nodes of views  <a href="xml_8c.html#afea6e3066f32ee663bd2be2fa2a00988">More...</a><br /></td></tr>
<tr class="separator:afea6e3066f32ee663bd2be2fa2a00988"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa51de466913ae02d3585d0b591b4dae0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xml_8c.html#aa51de466913ae02d3585d0b591b4dae0">ENUM_ELEMENTS_PATH</a>&#160;&#160;&#160;((xmlChar*)&quot;./name&quot;)</td></tr>
<tr class="memdesc:aa51de466913ae02d3585d0b591b4dae0"><td class="mdescLeft">&#160;</td><td class="mdescRight">all elements in the enum  <a href="xml_8c.html#aa51de466913ae02d3585d0b591b4dae0">More...</a><br /></td></tr>
<tr class="separator:aa51de466913ae02d3585d0b591b4dae0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a229ae1e8b6c349509f712f37c42e1040"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xml_8c.html#a229ae1e8b6c349509f712f37c42e1040">UNITS_PATH</a>&#160;&#160;&#160;((xmlChar*)&quot;/model/unit&quot;)</td></tr>
<tr class="memdesc:a229ae1e8b6c349509f712f37c42e1040"><td class="mdescLeft">&#160;</td><td class="mdescRight">path to complete nodes of units  <a href="xml_8c.html#a229ae1e8b6c349509f712f37c42e1040">More...</a><br /></td></tr>
<tr class="separator:a229ae1e8b6c349509f712f37c42e1040"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21063a1e287fca7b0458c3bed40f7bcb"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xml_8c.html#a21063a1e287fca7b0458c3bed40f7bcb">UNIT_TRANSFORMS_PATH</a>&#160;&#160;&#160;((xmlChar*)&quot;./transform&quot;)</td></tr>
<tr class="memdesc:a21063a1e287fca7b0458c3bed40f7bcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">all transforms of the unit  <a href="xml_8c.html#a21063a1e287fca7b0458c3bed40f7bcb">More...</a><br /></td></tr>
<tr class="separator:a21063a1e287fca7b0458c3bed40f7bcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a51cd7a11d09f76993c522edd3dfa6021"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xml_8c.html#a51cd7a11d09f76993c522edd3dfa6021">pcilib_get_xml_attr</a> (<a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *ctx, <a class="el" href="pcilib_8h.html#afff06160b9cb50d9163bd244416ddc59">pcilib_xml_node_t</a> *node, const char *attr, <a class="el" href="structpcilib__value__t.html">pcilib_value_t</a> *val)</td></tr>
<tr class="memdesc:a51cd7a11d09f76993c522edd3dfa6021"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is an internal function which returns a specified node attribute in the <a class="el" href="structpcilib__value__t.html">pcilib_value_t</a> structure.  <a href="xml_8c.html#a51cd7a11d09f76993c522edd3dfa6021">More...</a><br /></td></tr>
<tr class="separator:a51cd7a11d09f76993c522edd3dfa6021"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7ba18b88548dccb86b93df2d6398dda"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xml_8c.html#aa7ba18b88548dccb86b93df2d6398dda">pcilib_process_xml</a> (<a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *ctx, const char *location)</td></tr>
<tr class="memdesc:aa7ba18b88548dccb86b93df2d6398dda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Processes a bunch of XML files in the specified directory.  <a href="xml_8c.html#aa7ba18b88548dccb86b93df2d6398dda">More...</a><br /></td></tr>
<tr class="separator:aa7ba18b88548dccb86b93df2d6398dda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57b7c7b9b4dd3df0d201888b7b50ae79"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xml_8c.html#a57b7c7b9b4dd3df0d201888b7b50ae79">pcilib_init_xml</a> (<a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *ctx, const char *model)</td></tr>
<tr class="memdesc:a57b7c7b9b4dd3df0d201888b7b50ae79"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes XML stack and loads a default set of XML files.  <a href="xml_8c.html#a57b7c7b9b4dd3df0d201888b7b50ae79">More...</a><br /></td></tr>
<tr class="separator:a57b7c7b9b4dd3df0d201888b7b50ae79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ac489fe7cc07c6b9d890394faea96fa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xml_8c.html#a6ac489fe7cc07c6b9d890394faea96fa">pcilib_free_xml</a> (<a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *ctx)</td></tr>
<tr class="memdesc:a6ac489fe7cc07c6b9d890394faea96fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cleans up memory used by various XML structures.  <a href="xml_8c.html#a6ac489fe7cc07c6b9d890394faea96fa">More...</a><br /></td></tr>
<tr class="separator:a6ac489fe7cc07c6b9d890394faea96fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e414d1784f22fa9a026b424dbe0cf71"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xml_8c.html#a3e414d1784f22fa9a026b424dbe0cf71">pcilib_detect_xml_model</a> (<a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *ctx, unsigned int vendor_id, unsigned int device_id)</td></tr>
<tr class="memdesc:a3e414d1784f22fa9a026b424dbe0cf71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resolves device model from vendor and device ids using XML configuration The association of vendor/device id pairs with model are provided devices.xml under PCILIB_MODEL_DIR.  <a href="xml_8c.html#a3e414d1784f22fa9a026b424dbe0cf71">More...</a><br /></td></tr>
<tr class="separator:a3e414d1784f22fa9a026b424dbe0cf71"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >this file is the main source file for the implementation of dynamic registers using xml and several funtionalities for the "pci-tool" line command tool from XML files. the xml part has been implemented using libxml2 </p>
<dl class="section version"><dt>Version</dt><dd>1.0</dd></dl>
<p >registers and banks nodes are parsed using xpath expression, but their properties is get by recursively getting all properties nodes. In this sense, if a property changes, the algorithm has to be changed, but if it's registers or banks nodes, just the xpath expression modification should be enough.</p>
<p >Libxml2 considers blank spaces within the XML as node natively and this code as been produced considering blank spaces in the XML files. In case XML files would not contain blank spaces anymore, please change the code.</p>
<p >In case the performance is not good enough, please consider the following : hard code of formulas </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ad3d8a3bd0c0b677acef144f2c2ef6d73" name="ad3d8a3bd0c0b677acef144f2c2ef6d73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3d8a3bd0c0b677acef144f2c2ef6d73">&#9670;&#160;</a></span>_BSD_SOURCE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _BSD_SOURCE</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8fb447618db946a9e2a596d9ea18763f" name="a8fb447618db946a9e2a596d9ea18763f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fb447618db946a9e2a596d9ea18763f">&#9670;&#160;</a></span>_DEFAULT_SOURCE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _DEFAULT_SOURCE</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a78c99ffd76a7bb3c8c74db76207e9ab4" name="a78c99ffd76a7bb3c8c74db76207e9ab4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78c99ffd76a7bb3c8c74db76207e9ab4">&#9670;&#160;</a></span>_XOPEN_SOURCE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _XOPEN_SOURCE&#160;&#160;&#160;700</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a98384bec832ca6ff3faee0f4cd4ffe94" name="a98384bec832ca6ff3faee0f4cd4ffe94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98384bec832ca6ff3faee0f4cd4ffe94">&#9670;&#160;</a></span>BANKS_PATH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BANKS_PATH&#160;&#160;&#160;((xmlChar*)&quot;/model/bank&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>path to complete nodes of banks </p>

</div>
</div>
<a id="a6b0209fea69480e6341e72c2efd0d14d" name="a6b0209fea69480e6341e72c2efd0d14d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b0209fea69480e6341e72c2efd0d14d">&#9670;&#160;</a></span>BIT_REGISTERS_PATH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BIT_REGISTERS_PATH&#160;&#160;&#160;((xmlChar*)&quot;./field&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>all bits registers nodes </p>

</div>
</div>
<a id="aa51de466913ae02d3585d0b591b4dae0" name="aa51de466913ae02d3585d0b591b4dae0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa51de466913ae02d3585d0b591b4dae0">&#9670;&#160;</a></span>ENUM_ELEMENTS_PATH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ENUM_ELEMENTS_PATH&#160;&#160;&#160;((xmlChar*)&quot;./name&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>all elements in the enum </p>

</div>
</div>
<a id="afea6e3066f32ee663bd2be2fa2a00988" name="afea6e3066f32ee663bd2be2fa2a00988"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afea6e3066f32ee663bd2be2fa2a00988">&#9670;&#160;</a></span>ENUM_VIEWS_PATH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ENUM_VIEWS_PATH&#160;&#160;&#160;((xmlChar*)&quot;/model/enum&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>path to complete nodes of views </p>

</div>
</div>
<a id="a716e3c92b23fea6a1038a91139ea0cfc" name="a716e3c92b23fea6a1038a91139ea0cfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a716e3c92b23fea6a1038a91139ea0cfc">&#9670;&#160;</a></span>REGISTER_VIEWS_PATH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REGISTER_VIEWS_PATH&#160;&#160;&#160;((xmlChar*)&quot;./view&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>supported register &amp; field views </p>

</div>
</div>
<a id="a671d2ff9968781b2f31127a62166f2dc" name="a671d2ff9968781b2f31127a62166f2dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a671d2ff9968781b2f31127a62166f2dc">&#9670;&#160;</a></span>REGISTERS_PATH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define REGISTERS_PATH&#160;&#160;&#160;((xmlChar*)&quot;./register&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>all standard registers nodes </p>

</div>
</div>
<a id="a48ae710fd4e63a401e45d9fd3e6c66fd" name="a48ae710fd4e63a401e45d9fd3e6c66fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48ae710fd4e63a401e45d9fd3e6c66fd">&#9670;&#160;</a></span>TRANSFORM_VIEWS_PATH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TRANSFORM_VIEWS_PATH&#160;&#160;&#160;((xmlChar*)&quot;/model/transform&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>path to complete nodes of views </p>

</div>
</div>
<a id="a21063a1e287fca7b0458c3bed40f7bcb" name="a21063a1e287fca7b0458c3bed40f7bcb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21063a1e287fca7b0458c3bed40f7bcb">&#9670;&#160;</a></span>UNIT_TRANSFORMS_PATH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UNIT_TRANSFORMS_PATH&#160;&#160;&#160;((xmlChar*)&quot;./transform&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>all transforms of the unit </p>

</div>
</div>
<a id="a229ae1e8b6c349509f712f37c42e1040" name="a229ae1e8b6c349509f712f37c42e1040"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a229ae1e8b6c349509f712f37c42e1040">&#9670;&#160;</a></span>UNITS_PATH</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define UNITS_PATH&#160;&#160;&#160;((xmlChar*)&quot;/model/unit&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>path to complete nodes of units </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a3e414d1784f22fa9a026b424dbe0cf71" name="a3e414d1784f22fa9a026b424dbe0cf71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e414d1784f22fa9a026b424dbe0cf71">&#9670;&#160;</a></span>pcilib_detect_xml_model()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char * pcilib_detect_xml_model </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>vendor_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>device_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resolves device model from vendor and device ids using XML configuration The association of vendor/device id pairs with model are provided devices.xml under PCILIB_MODEL_DIR. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ctx</td><td>- pcilib context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">vendor_id</td><td>- the vendor id </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">device_id</td><td>- the device id </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- the name of model or NULL on an error and unknown device. It is caller responsibility to free returned string. </dd></dl>
<p >&lt; Pointer to the parsed xsd schema</p>
<p >&lt; Pointer to the XML validation context</p>
<p >&lt; Pointer to the XML parser context</p>
<div class="fragment"><div class="line"><span class="lineno"> 1281</span>                                                                                             {</div>
<div class="line"><span class="lineno"> 1282</span>    <span class="keywordtype">int</span> err;</div>
<div class="line"><span class="lineno"> 1283</span>    <span class="keywordtype">char</span> *model = NULL;</div>
<div class="line"><span class="lineno"> 1284</span>    xmlSchemaPtr schema;                                </div>
<div class="line"><span class="lineno"> 1285</span>    xmlSchemaValidCtxtPtr validator;                    </div>
<div class="line"><span class="lineno"> 1286</span>    xmlParserCtxtPtr parser;                            </div>
<div class="line"><span class="lineno"> 1288</span>    DIR *rep;</div>
<div class="line"><span class="lineno"> 1289</span>    <span class="keyword">struct </span>dirent *file = NULL;</div>
<div class="line"><span class="lineno"> 1290</span>    <span class="keyword">struct </span>stat st;</div>
<div class="line"><span class="lineno"> 1291</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *data_dir;</div>
<div class="line"><span class="lineno"> 1292</span>    <span class="keywordtype">char</span> *xsd_path, *xml_path;</div>
<div class="line"><span class="lineno"> 1293</span> </div>
<div class="line"><span class="lineno"> 1294</span>    xmlXPathObjectPtr nodes;</div>
<div class="line"><span class="lineno"> 1295</span>    xmlChar xpath_query[64];</div>
<div class="line"><span class="lineno"> 1296</span> </div>
<div class="line"><span class="lineno"> 1297</span>    xmlStrPrintf(xpath_query, <span class="keyword">sizeof</span>(xpath_query), (xmlChar*)<span class="stringliteral">&quot;/devices/device[@vendor=\&quot;%04x\&quot; and @device=\&quot;%04x\&quot;]/@model&quot;</span>, vendor_id, device_id);</div>
<div class="line"><span class="lineno"> 1298</span> </div>
<div class="line"><span class="lineno"> 1299</span>    data_dir = getenv(<span class="stringliteral">&quot;PCILIB_DATA_DIR&quot;</span>);</div>
<div class="line"><span class="lineno"> 1300</span>    <span class="keywordflow">if</span> (!data_dir) data_dir = PCILIB_DATA_DIR;</div>
<div class="line"><span class="lineno"> 1301</span> </div>
<div class="line"><span class="lineno"> 1302</span>    xsd_path = (<span class="keywordtype">char</span>*)alloca(strlen(data_dir) + 32);</div>
<div class="line"><span class="lineno"> 1303</span>    xml_path = (<span class="keywordtype">char</span>*)alloca(strlen(data_dir) + 32);</div>
<div class="line"><span class="lineno"> 1304</span>    <span class="keywordflow">if</span> ((!xsd_path)||(!xml_path)) {</div>
<div class="line"><span class="lineno"> 1305</span>        <a class="code hl_define" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>(<span class="stringliteral">&quot;Error allocating stack memory&quot;</span>);</div>
<div class="line"><span class="lineno"> 1306</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1307</span>    }</div>
<div class="line"><span class="lineno"> 1308</span> </div>
<div class="line"><span class="lineno"> 1309</span>    sprintf(xsd_path, <span class="stringliteral">&quot;%s/devices.xsd&quot;</span>, data_dir);</div>
<div class="line"><span class="lineno"> 1310</span>    sprintf(xml_path, <span class="stringliteral">&quot;%s/devices&quot;</span>, data_dir);</div>
<div class="line"><span class="lineno"> 1311</span>    <span class="keywordflow">if</span> (stat(xsd_path, &amp;st)||stat(xml_path, &amp;st)) {</div>
<div class="line"><span class="lineno"> 1312</span>        <a class="code hl_define" href="error_8h.html#a48448257d286dac45c87f5c49342155b">pcilib_info</a>(<span class="stringliteral">&quot;No XML devices are defined, missing devices schema or list&quot;</span>);</div>
<div class="line"><span class="lineno"> 1313</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1314</span>    }</div>
<div class="line"><span class="lineno"> 1315</span> </div>
<div class="line"><span class="lineno"> 1316</span>    parser = xmlNewParserCtxt();</div>
<div class="line"><span class="lineno"> 1317</span>    <span class="keywordflow">if</span> (!parser) {</div>
<div class="line"><span class="lineno"> 1318</span>        xmlErrorPtr xmlerr = xmlGetLastError();</div>
<div class="line"><span class="lineno"> 1319</span>        <span class="keywordflow">if</span> (xmlerr) <a class="code hl_define" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>(<span class="stringliteral">&quot;xmlNewParserCtxt reported error %d (%s)&quot;</span>, xmlerr-&gt;code, xmlerr-&gt;message);</div>
<div class="line"><span class="lineno"> 1320</span>        <span class="keywordflow">else</span> <a class="code hl_define" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>(<span class="stringliteral">&quot;Failed to create an XML parser context&quot;</span>);</div>
<div class="line"><span class="lineno"> 1321</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1322</span>    }</div>
<div class="line"><span class="lineno"> 1323</span> </div>
<div class="line"><span class="lineno"> 1324</span>    err = pcilib_xml_load_xsd_file(ctx, xsd_path, &amp;schema, &amp;validator);</div>
<div class="line"><span class="lineno"> 1325</span>    <span class="keywordflow">if</span> (err) {</div>
<div class="line"><span class="lineno"> 1326</span>        xmlFreeParserCtxt(parser);</div>
<div class="line"><span class="lineno"> 1327</span>        <a class="code hl_define" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>(<span class="stringliteral">&quot;Error (%i) parsing the device schema (%s)&quot;</span>, err, xsd_path);</div>
<div class="line"><span class="lineno"> 1328</span>        <span class="keywordflow">return</span> NULL;</div>
<div class="line"><span class="lineno"> 1329</span>    }</div>
<div class="line"><span class="lineno"> 1330</span> </div>
<div class="line"><span class="lineno"> 1331</span>    rep = opendir(xml_path);</div>
<div class="line"><span class="lineno"> 1332</span>    <span class="keywordflow">if</span> (!rep) <span class="keywordflow">goto</span> cleanup;</div>
<div class="line"><span class="lineno"> 1333</span> </div>
<div class="line"><span class="lineno"> 1334</span>    <span class="keywordflow">while</span> ((model == NULL)&amp;&amp;((file = readdir(rep)) != NULL)) {</div>
<div class="line"><span class="lineno"> 1335</span>        xmlDocPtr doc;</div>
<div class="line"><span class="lineno"> 1336</span>        </div>
<div class="line"><span class="lineno"> 1337</span>        <span class="keywordtype">size_t</span> len = strlen(file-&gt;d_name);</div>
<div class="line"><span class="lineno"> 1338</span>        <span class="keywordflow">if</span> ((len &lt; 4)||(strcasecmp(file-&gt;d_name + len - 4, <span class="stringliteral">&quot;.xml&quot;</span>))) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1339</span>        <span class="keywordflow">if</span> (file-&gt;d_type != DT_REG) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1340</span> </div>
<div class="line"><span class="lineno"> 1341</span>        doc = pcilib_xml_load_file(ctx, parser, validator, xml_path, file-&gt;d_name);</div>
<div class="line"><span class="lineno"> 1342</span>        <span class="keywordflow">if</span> (!doc) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1343</span> </div>
<div class="line"><span class="lineno"> 1344</span>        nodes = pcilib_xml_eval_xpath_expression(ctx, doc, xpath_query);</div>
<div class="line"><span class="lineno"> 1345</span>        <span class="keywordflow">if</span> (!nodes) {</div>
<div class="line"><span class="lineno"> 1346</span>            xmlFreeDoc(doc);</div>
<div class="line"><span class="lineno"> 1347</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1348</span>        }</div>
<div class="line"><span class="lineno"> 1349</span> </div>
<div class="line"><span class="lineno"> 1350</span>        <span class="keywordflow">if</span> (!xmlXPathNodeSetIsEmpty(nodes-&gt;nodesetval)) {</div>
<div class="line"><span class="lineno"> 1351</span>            xmlNodePtr node = nodes-&gt;nodesetval-&gt;nodeTab[0];</div>
<div class="line"><span class="lineno"> 1352</span>            model = strdup((<span class="keywordtype">char</span>*)node-&gt;children-&gt;content);</div>
<div class="line"><span class="lineno"> 1353</span>        }</div>
<div class="line"><span class="lineno"> 1354</span> </div>
<div class="line"><span class="lineno"> 1355</span>        xmlXPathFreeObject(nodes);</div>
<div class="line"><span class="lineno"> 1356</span>        xmlFreeDoc(doc);</div>
<div class="line"><span class="lineno"> 1357</span>    }</div>
<div class="line"><span class="lineno"> 1358</span>    closedir(rep);</div>
<div class="line"><span class="lineno"> 1359</span> </div>
<div class="line"><span class="lineno"> 1360</span>cleanup:    </div>
<div class="line"><span class="lineno"> 1361</span>    xmlSchemaFree(schema);</div>
<div class="line"><span class="lineno"> 1362</span>    xmlSchemaFreeValidCtxt(validator);</div>
<div class="line"><span class="lineno"> 1363</span>    xmlFreeParserCtxt(parser);</div>
<div class="line"><span class="lineno"> 1364</span> </div>
<div class="line"><span class="lineno"> 1365</span>    <span class="keywordflow">return</span> model;</div>
<div class="line"><span class="lineno"> 1366</span>}</div>
<div class="ttc" id="aerror_8h_html_a2b06064fecffd095efabb752f7b50021"><div class="ttname"><a href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a></div><div class="ttdeci">#define pcilib_error(...)</div><div class="ttdef"><b>Definition:</b> error.h:68</div></div>
<div class="ttc" id="aerror_8h_html_a48448257d286dac45c87f5c49342155b"><div class="ttname"><a href="error_8h.html#a48448257d286dac45c87f5c49342155b">pcilib_info</a></div><div class="ttdeci">#define pcilib_info(...)</div><div class="ttdef"><b>Definition:</b> error.h:70</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>, and <a class="el" href="error_8h.html#a48448257d286dac45c87f5c49342155b">pcilib_info</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__public__api.html#gaa6d33dcd1de77fa87c66276653c164a0">pcilib_open()</a>.</p>

</div>
</div>
<a id="a6ac489fe7cc07c6b9d890394faea96fa" name="a6ac489fe7cc07c6b9d890394faea96fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ac489fe7cc07c6b9d890394faea96fa">&#9670;&#160;</a></span>pcilib_free_xml()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void pcilib_free_xml </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *&#160;</td>
          <td class="paramname"><em>ctx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Cleans up memory used by various XML structures. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td>- the pcilib_t context </td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><span class="lineno"> 1223</span>                                    {</div>
<div class="line"><span class="lineno"> 1224</span>    <span class="keywordtype">int</span> i;</div>
<div class="line"><span class="lineno"> 1225</span> </div>
<div class="line"><span class="lineno"> 1226</span>    memset(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">xml</a>.<a class="code hl_variable" href="structpcilib__xml__s.html#a05d4d978d68a1b29109f6d1fa6242373">bank_nodes</a>, 0, <span class="keyword">sizeof</span>(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">xml</a>.<a class="code hl_variable" href="structpcilib__xml__s.html#a05d4d978d68a1b29109f6d1fa6242373">bank_nodes</a>));</div>
<div class="line"><span class="lineno"> 1227</span>    <span class="keywordflow">for</span> (i = 0; i &lt; ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#ad78675d0315a858f03e16cd9d50df678">num_banks</a>; i++) {</div>
<div class="line"><span class="lineno"> 1228</span>        <span class="keywordflow">if</span> (ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a53d85e0f2155263085878bd1ae4c8b6d">bank_ctx</a>[i])</div>
<div class="line"><span class="lineno"> 1229</span>            ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a53d85e0f2155263085878bd1ae4c8b6d">bank_ctx</a>[i]-&gt;<a class="code hl_variable" href="structpcilib__register__bank__context__s.html#a64fc3ef4ae6f1830e4befff8a4f703a4">xml</a> = NULL;</div>
<div class="line"><span class="lineno"> 1230</span>    }</div>
<div class="line"><span class="lineno"> 1231</span> </div>
<div class="line"><span class="lineno"> 1232</span>    <span class="keywordflow">for</span> (i = 0; i &lt; ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a5d3c8e44d590052b9112526e61b3e64b">num_reg</a>; i++) {</div>
<div class="line"><span class="lineno"> 1233</span>        ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a4b24f857efec07c254d2fa2226b59fda">register_ctx</a>[i].<a class="code hl_variable" href="structpcilib__register__context__t.html#adc3a5242c9a89825695389369e350790">xml</a> = NULL;</div>
<div class="line"><span class="lineno"> 1234</span>    }</div>
<div class="line"><span class="lineno"> 1235</span> </div>
<div class="line"><span class="lineno"> 1236</span>    <span class="keywordflow">for</span> (i = 0; i &lt; ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">xml</a>.<a class="code hl_variable" href="structpcilib__xml__s.html#a3375939ad52f76595b5a816b7c9ffc0a">num_files</a>; i++) {</div>
<div class="line"><span class="lineno"> 1237</span>        <span class="keywordflow">if</span> (ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">xml</a>.<a class="code hl_variable" href="structpcilib__xml__s.html#a1fdcbda5cebbc2825809e6109e09fdc3">docs</a>[i]) {</div>
<div class="line"><span class="lineno"> 1238</span>            xmlFreeDoc(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">xml</a>.<a class="code hl_variable" href="structpcilib__xml__s.html#a1fdcbda5cebbc2825809e6109e09fdc3">docs</a>[i]);</div>
<div class="line"><span class="lineno"> 1239</span>            ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">xml</a>.<a class="code hl_variable" href="structpcilib__xml__s.html#a1fdcbda5cebbc2825809e6109e09fdc3">docs</a>[i] = NULL;</div>
<div class="line"><span class="lineno"> 1240</span>        }</div>
<div class="line"><span class="lineno"> 1241</span>        <span class="keywordflow">if</span> (ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">xml</a>.<a class="code hl_variable" href="structpcilib__xml__s.html#abb1a046a35f9680fc836501c62e23914">xpath</a>[i]) {</div>
<div class="line"><span class="lineno"> 1242</span>            xmlXPathFreeContext(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">xml</a>.<a class="code hl_variable" href="structpcilib__xml__s.html#abb1a046a35f9680fc836501c62e23914">xpath</a>[i]);</div>
<div class="line"><span class="lineno"> 1243</span>            ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">xml</a>.<a class="code hl_variable" href="structpcilib__xml__s.html#abb1a046a35f9680fc836501c62e23914">xpath</a>[i] = NULL;</div>
<div class="line"><span class="lineno"> 1244</span>        }</div>
<div class="line"><span class="lineno"> 1245</span>    }</div>
<div class="line"><span class="lineno"> 1246</span>    ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">xml</a>.<a class="code hl_variable" href="structpcilib__xml__s.html#a3375939ad52f76595b5a816b7c9ffc0a">num_files</a> = 0;</div>
<div class="line"><span class="lineno"> 1247</span> </div>
<div class="line"><span class="lineno"> 1248</span>    <span class="keywordflow">if</span> (ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">xml</a>.<a class="code hl_variable" href="structpcilib__xml__s.html#a012aebd36fb3074858aef0ac76f12eda">validator</a>) {</div>
<div class="line"><span class="lineno"> 1249</span>        xmlSchemaFreeValidCtxt(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">xml</a>.<a class="code hl_variable" href="structpcilib__xml__s.html#a012aebd36fb3074858aef0ac76f12eda">validator</a>);</div>
<div class="line"><span class="lineno"> 1250</span>        ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">xml</a>.<a class="code hl_variable" href="structpcilib__xml__s.html#a012aebd36fb3074858aef0ac76f12eda">validator</a> = NULL;</div>
<div class="line"><span class="lineno"> 1251</span>    }</div>
<div class="line"><span class="lineno"> 1252</span> </div>
<div class="line"><span class="lineno"> 1253</span>    <span class="keywordflow">if</span> (ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">xml</a>.<a class="code hl_variable" href="structpcilib__xml__s.html#a1d334e76f5bd0740b44683ce52c4e64b">schema</a>) {</div>
<div class="line"><span class="lineno"> 1254</span>        xmlSchemaFree(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">xml</a>.<a class="code hl_variable" href="structpcilib__xml__s.html#a1d334e76f5bd0740b44683ce52c4e64b">schema</a>);</div>
<div class="line"><span class="lineno"> 1255</span>        ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">xml</a>.<a class="code hl_variable" href="structpcilib__xml__s.html#a1d334e76f5bd0740b44683ce52c4e64b">schema</a> = NULL;</div>
<div class="line"><span class="lineno"> 1256</span>    }</div>
<div class="line"><span class="lineno"> 1257</span> </div>
<div class="line"><span class="lineno"> 1258</span>    <span class="keywordflow">if</span> (ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">xml</a>.<a class="code hl_variable" href="structpcilib__xml__s.html#a85b8bc0f0a5bb7d3b1e160c628648d6d">parts_validator</a>) {</div>
<div class="line"><span class="lineno"> 1259</span>        xmlSchemaFreeValidCtxt(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">xml</a>.<a class="code hl_variable" href="structpcilib__xml__s.html#a85b8bc0f0a5bb7d3b1e160c628648d6d">parts_validator</a>);</div>
<div class="line"><span class="lineno"> 1260</span>        ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">xml</a>.<a class="code hl_variable" href="structpcilib__xml__s.html#a85b8bc0f0a5bb7d3b1e160c628648d6d">parts_validator</a> = NULL;</div>
<div class="line"><span class="lineno"> 1261</span>    }</div>
<div class="line"><span class="lineno"> 1262</span> </div>
<div class="line"><span class="lineno"> 1263</span>    <span class="keywordflow">if</span> (ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">xml</a>.<a class="code hl_variable" href="structpcilib__xml__s.html#a7862bad7527c0894045710ab97e6b5c6">parts_schema</a>) {</div>
<div class="line"><span class="lineno"> 1264</span>        xmlSchemaFree(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">xml</a>.<a class="code hl_variable" href="structpcilib__xml__s.html#a7862bad7527c0894045710ab97e6b5c6">parts_schema</a>);</div>
<div class="line"><span class="lineno"> 1265</span>        ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">xml</a>.<a class="code hl_variable" href="structpcilib__xml__s.html#a7862bad7527c0894045710ab97e6b5c6">parts_schema</a> = NULL;</div>
<div class="line"><span class="lineno"> 1266</span>    }</div>
<div class="line"><span class="lineno"> 1267</span> </div>
<div class="line"><span class="lineno"> 1268</span>    <span class="keywordflow">if</span> (ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">xml</a>.<a class="code hl_variable" href="structpcilib__xml__s.html#a866c873b8a37bb0530a1866398757b91">parser</a>) {</div>
<div class="line"><span class="lineno"> 1269</span>        xmlFreeParserCtxt(ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">xml</a>.<a class="code hl_variable" href="structpcilib__xml__s.html#a866c873b8a37bb0530a1866398757b91">parser</a>);</div>
<div class="line"><span class="lineno"> 1270</span>        ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">xml</a>.<a class="code hl_variable" href="structpcilib__xml__s.html#a866c873b8a37bb0530a1866398757b91">parser</a> = NULL;</div>
<div class="line"><span class="lineno"> 1271</span>    }</div>
<div class="line"><span class="lineno"> 1272</span> </div>
<div class="line"><span class="lineno"> 1273</span>    <span class="comment">/*</span></div>
<div class="line"><span class="lineno"> 1274</span><span class="comment">        xmlSchemaCleanupTypes();</span></div>
<div class="line"><span class="lineno"> 1275</span><span class="comment">        xmlCleanupParser();</span></div>
<div class="line"><span class="lineno"> 1276</span><span class="comment">        xmlMemoryDump();</span></div>
<div class="line"><span class="lineno"> 1277</span><span class="comment">    */</span></div>
<div class="line"><span class="lineno"> 1278</span>}</div>
<div class="ttc" id="astructpcilib__register__bank__context__s_html_a64fc3ef4ae6f1830e4befff8a4f703a4"><div class="ttname"><a href="structpcilib__register__bank__context__s.html#a64fc3ef4ae6f1830e4befff8a4f703a4">pcilib_register_bank_context_s::xml</a></div><div class="ttdeci">pcilib_xml_node_t * xml</div><div class="ttdoc">Additional XML properties.</div><div class="ttdef"><b>Definition:</b> bank.h:110</div></div>
<div class="ttc" id="astructpcilib__register__context__t_html_adc3a5242c9a89825695389369e350790"><div class="ttname"><a href="structpcilib__register__context__t.html#adc3a5242c9a89825695389369e350790">pcilib_register_context_t::xml</a></div><div class="ttdeci">pcilib_xml_node_t * xml</div><div class="ttdoc">Additional XML properties.</div><div class="ttdef"><b>Definition:</b> register.h:51</div></div>
<div class="ttc" id="astructpcilib__s_html_a4b24f857efec07c254d2fa2226b59fda"><div class="ttname"><a href="structpcilib__s.html#a4b24f857efec07c254d2fa2226b59fda">pcilib_s::register_ctx</a></div><div class="ttdeci">pcilib_register_context_t * register_ctx</div><div class="ttdoc">Contexts for registers.</div><div class="ttdef"><b>Definition:</b> pci.h:87</div></div>
<div class="ttc" id="astructpcilib__s_html_a53d85e0f2155263085878bd1ae4c8b6d"><div class="ttname"><a href="structpcilib__s.html#a53d85e0f2155263085878bd1ae4c8b6d">pcilib_s::bank_ctx</a></div><div class="ttdeci">pcilib_register_bank_context_t * bank_ctx[PCILIB_MAX_REGISTER_BANKS]</div><div class="ttdoc">Contexts for registers banks if required by register protocol.</div><div class="ttdef"><b>Definition:</b> pci.h:88</div></div>
<div class="ttc" id="astructpcilib__s_html_a5d3c8e44d590052b9112526e61b3e64b"><div class="ttname"><a href="structpcilib__s.html#a5d3c8e44d590052b9112526e61b3e64b">pcilib_s::num_reg</a></div><div class="ttdeci">size_t num_reg</div><div class="ttdef"><b>Definition:</b> pci.h:76</div></div>
<div class="ttc" id="astructpcilib__s_html_a85dfd00a79f8cab8ff1413db17851356"><div class="ttname"><a href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">pcilib_s::xml</a></div><div class="ttdeci">struct pcilib_xml_s xml</div><div class="ttdoc">XML context.</div><div class="ttdef"><b>Definition:</b> pci.h:105</div></div>
<div class="ttc" id="astructpcilib__s_html_ad78675d0315a858f03e16cd9d50df678"><div class="ttname"><a href="structpcilib__s.html#ad78675d0315a858f03e16cd9d50df678">pcilib_s::num_banks</a></div><div class="ttdeci">size_t num_banks</div><div class="ttdef"><b>Definition:</b> pci.h:77</div></div>
<div class="ttc" id="astructpcilib__xml__s_html_a012aebd36fb3074858aef0ac76f12eda"><div class="ttname"><a href="structpcilib__xml__s.html#a012aebd36fb3074858aef0ac76f12eda">pcilib_xml_s::validator</a></div><div class="ttdeci">xmlSchemaValidCtxtPtr validator</div><div class="ttdoc">Pointer to the XML validation context.</div><div class="ttdef"><b>Definition:</b> xml.h:32</div></div>
<div class="ttc" id="astructpcilib__xml__s_html_a05d4d978d68a1b29109f6d1fa6242373"><div class="ttname"><a href="structpcilib__xml__s.html#a05d4d978d68a1b29109f6d1fa6242373">pcilib_xml_s::bank_nodes</a></div><div class="ttdeci">xmlNodePtr bank_nodes[PCILIB_MAX_REGISTER_BANKS]</div><div class="ttdoc">pointer to xml nodes of banks in the xml file</div><div class="ttdef"><b>Definition:</b> xml.h:36</div></div>
<div class="ttc" id="astructpcilib__xml__s_html_a1d334e76f5bd0740b44683ce52c4e64b"><div class="ttname"><a href="structpcilib__xml__s.html#a1d334e76f5bd0740b44683ce52c4e64b">pcilib_xml_s::schema</a></div><div class="ttdeci">xmlSchemaPtr schema</div><div class="ttdoc">Pointer to the parsed xsd schema.</div><div class="ttdef"><b>Definition:</b> xml.h:31</div></div>
<div class="ttc" id="astructpcilib__xml__s_html_a1fdcbda5cebbc2825809e6109e09fdc3"><div class="ttname"><a href="structpcilib__xml__s.html#a1fdcbda5cebbc2825809e6109e09fdc3">pcilib_xml_s::docs</a></div><div class="ttdeci">xmlDocPtr docs[PCILIB_MAX_MODEL_FILES]</div><div class="ttdoc">Pointers to parsed XML documents.</div><div class="ttdef"><b>Definition:</b> xml.h:27</div></div>
<div class="ttc" id="astructpcilib__xml__s_html_a3375939ad52f76595b5a816b7c9ffc0a"><div class="ttname"><a href="structpcilib__xml__s.html#a3375939ad52f76595b5a816b7c9ffc0a">pcilib_xml_s::num_files</a></div><div class="ttdeci">size_t num_files</div><div class="ttdoc">Number of currently loaded XML documents.</div><div class="ttdef"><b>Definition:</b> xml.h:25</div></div>
<div class="ttc" id="astructpcilib__xml__s_html_a7862bad7527c0894045710ab97e6b5c6"><div class="ttname"><a href="structpcilib__xml__s.html#a7862bad7527c0894045710ab97e6b5c6">pcilib_xml_s::parts_schema</a></div><div class="ttdeci">xmlSchemaPtr parts_schema</div><div class="ttdoc">Pointer to the parsed xsd schema capable of validating individual XML files - no check for cross-refe...</div><div class="ttdef"><b>Definition:</b> xml.h:33</div></div>
<div class="ttc" id="astructpcilib__xml__s_html_a85b8bc0f0a5bb7d3b1e160c628648d6d"><div class="ttname"><a href="structpcilib__xml__s.html#a85b8bc0f0a5bb7d3b1e160c628648d6d">pcilib_xml_s::parts_validator</a></div><div class="ttdeci">xmlSchemaValidCtxtPtr parts_validator</div><div class="ttdoc">Pointer to the XML validation context capable of validating individual XML files - no check for cross...</div><div class="ttdef"><b>Definition:</b> xml.h:34</div></div>
<div class="ttc" id="astructpcilib__xml__s_html_a866c873b8a37bb0530a1866398757b91"><div class="ttname"><a href="structpcilib__xml__s.html#a866c873b8a37bb0530a1866398757b91">pcilib_xml_s::parser</a></div><div class="ttdeci">xmlParserCtxtPtr parser</div><div class="ttdoc">Pointer to the XML parser context.</div><div class="ttdef"><b>Definition:</b> xml.h:30</div></div>
<div class="ttc" id="astructpcilib__xml__s_html_abb1a046a35f9680fc836501c62e23914"><div class="ttname"><a href="structpcilib__xml__s.html#abb1a046a35f9680fc836501c62e23914">pcilib_xml_s::xpath</a></div><div class="ttdeci">xmlXPathContextPtr xpath[PCILIB_MAX_MODEL_FILES]</div><div class="ttdoc">Per-file XPath context.</div><div class="ttdef"><b>Definition:</b> xml.h:28</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="structpcilib__s.html#a53d85e0f2155263085878bd1ae4c8b6d">pcilib_s::bank_ctx</a>, <a class="el" href="structpcilib__xml__s.html#a05d4d978d68a1b29109f6d1fa6242373">pcilib_xml_s::bank_nodes</a>, <a class="el" href="structpcilib__xml__s.html#a1fdcbda5cebbc2825809e6109e09fdc3">pcilib_xml_s::docs</a>, <a class="el" href="structpcilib__s.html#ad78675d0315a858f03e16cd9d50df678">pcilib_s::num_banks</a>, <a class="el" href="structpcilib__xml__s.html#a3375939ad52f76595b5a816b7c9ffc0a">pcilib_xml_s::num_files</a>, <a class="el" href="structpcilib__s.html#a5d3c8e44d590052b9112526e61b3e64b">pcilib_s::num_reg</a>, <a class="el" href="structpcilib__xml__s.html#a866c873b8a37bb0530a1866398757b91">pcilib_xml_s::parser</a>, <a class="el" href="structpcilib__xml__s.html#a7862bad7527c0894045710ab97e6b5c6">pcilib_xml_s::parts_schema</a>, <a class="el" href="structpcilib__xml__s.html#a85b8bc0f0a5bb7d3b1e160c628648d6d">pcilib_xml_s::parts_validator</a>, <a class="el" href="structpcilib__s.html#a4b24f857efec07c254d2fa2226b59fda">pcilib_s::register_ctx</a>, <a class="el" href="structpcilib__xml__s.html#a1d334e76f5bd0740b44683ce52c4e64b">pcilib_xml_s::schema</a>, <a class="el" href="structpcilib__xml__s.html#a012aebd36fb3074858aef0ac76f12eda">pcilib_xml_s::validator</a>, <a class="el" href="structpcilib__register__bank__context__s.html#a64fc3ef4ae6f1830e4befff8a4f703a4">pcilib_register_bank_context_s::xml</a>, <a class="el" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">pcilib_s::xml</a>, <a class="el" href="structpcilib__register__context__t.html#adc3a5242c9a89825695389369e350790">pcilib_register_context_t::xml</a>, and <a class="el" href="structpcilib__xml__s.html#abb1a046a35f9680fc836501c62e23914">pcilib_xml_s::xpath</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__public__api.html#ga809b61586ed9c56a7510c607859e75e3">pcilib_close()</a>.</p>

</div>
</div>
<a id="a51cd7a11d09f76993c522edd3dfa6021" name="a51cd7a11d09f76993c522edd3dfa6021"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51cd7a11d09f76993c522edd3dfa6021">&#9670;&#160;</a></span>pcilib_get_xml_attr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pcilib_get_xml_attr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="pcilib_8h.html#afff06160b9cb50d9163bd244416ddc59">pcilib_xml_node_t</a> *&#160;</td>
          <td class="paramname"><em>node</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structpcilib__value__t.html">pcilib_value_t</a> *&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is an internal function which returns a specified node attribute in the <a class="el" href="structpcilib__value__t.html">pcilib_value_t</a> structure. </p>
<p >This function should not be used directly. Instead subsystem specific calls like pcilib_get_register_attr, pcilib_get_property_attr, ...have to be used. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td>- pcilib context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">node</td><td>- LibXML2 node </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">attr</td><td>- attribute name </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">val</td><td>- the result will be returned in this variable. Prior to first usage <a class="el" href="structpcilib__value__t.html">pcilib_value_t</a> variable should be initalized to 0. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- error or 0 on success </dd></dl>
<div class="fragment"><div class="line"><span class="lineno">   81</span>                                                                                                       {</div>
<div class="line"><span class="lineno">   82</span>    xmlAttr *prop;</div>
<div class="line"><span class="lineno">   83</span>    xmlChar *str;</div>
<div class="line"><span class="lineno">   84</span> </div>
<div class="line"><span class="lineno">   85</span>    prop = xmlHasProp(node, BAD_CAST attr);</div>
<div class="line"><span class="lineno">   86</span>    <span class="keywordflow">if</span> ((!prop)||(!prop-&gt;children)) <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="error_8h.html#a0c59f7091fd2446121868635aca9e60cad21a896d5d5aaee0682c410b9bed283c">PCILIB_ERROR_NOTFOUND</a>;</div>
<div class="line"><span class="lineno">   87</span> </div>
<div class="line"><span class="lineno">   88</span>    str = prop-&gt;children-&gt;content;</div>
<div class="line"><span class="lineno">   89</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="group__public__api__value.html#gae48748cf26ee503a4b496317e917463c">pcilib_set_value_from_static_string</a>(ctx, val, (<span class="keyword">const</span> <span class="keywordtype">char</span>*)str);</div>
<div class="line"><span class="lineno">   90</span>}</div>
<div class="ttc" id="aerror_8h_html_a0c59f7091fd2446121868635aca9e60cad21a896d5d5aaee0682c410b9bed283c"><div class="ttname"><a href="error_8h.html#a0c59f7091fd2446121868635aca9e60cad21a896d5d5aaee0682c410b9bed283c">PCILIB_ERROR_NOTFOUND</a></div><div class="ttdeci">@ PCILIB_ERROR_NOTFOUND</div><div class="ttdef"><b>Definition:</b> error.h:25</div></div>
<div class="ttc" id="agroup__public__api__value_html_gae48748cf26ee503a4b496317e917463c"><div class="ttname"><a href="group__public__api__value.html#gae48748cf26ee503a4b496317e917463c">pcilib_set_value_from_static_string</a></div><div class="ttdeci">int pcilib_set_value_from_static_string(pcilib_t *ctx, pcilib_value_t *val, const char *str)</div><div class="ttdoc">Initializes the polymorphic value from the static string.</div><div class="ttdef"><b>Definition:</b> value.c:66</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="error_8h.html#a0c59f7091fd2446121868635aca9e60cad21a896d5d5aaee0682c410b9bed283c">PCILIB_ERROR_NOTFOUND</a>, and <a class="el" href="group__public__api__value.html#gae48748cf26ee503a4b496317e917463c">pcilib_set_value_from_static_string()</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__public__api__property.html#ga012ebc113645081902b4461c9deef3fd">pcilib_get_property_attr()</a>, <a class="el" href="group__public__api__register.html#ga7ff53596a2599f9f0c3fd3ab6e22a3ca">pcilib_get_register_attr_by_id()</a>, and <a class="el" href="bank_8c.html#a1618f888b4b8f27159734761ffc1099d">pcilib_get_register_bank_attr_by_id()</a>.</p>

</div>
</div>
<a id="a57b7c7b9b4dd3df0d201888b7b50ae79" name="a57b7c7b9b4dd3df0d201888b7b50ae79"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57b7c7b9b4dd3df0d201888b7b50ae79">&#9670;&#160;</a></span>pcilib_init_xml()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pcilib_init_xml </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>model</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes XML stack and loads a default set of XML files. </p>
<p >The default location for XML files is /usr/local/share/pcilib/models/<b>model</b>. This can be altered using CMake PCILIB_MODEL_DIR variable while building or using PCILIB_MODEL_DIR environmental variable dynamicly. More XML files can be added later using <a class="el" href="xml_8h.html#aa7ba18b88548dccb86b93df2d6398dda" title="Processes a bunch of XML files in the specified directory.">pcilib_process_xml()</a> call.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ctx</td><td>- pcilib context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">model</td><td>- the name of the model </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- error or 0 on success </dd></dl>
<div class="fragment"><div class="line"><span class="lineno"> 1201</span>                                                      {</div>
<div class="line"><span class="lineno"> 1202</span>    <span class="keywordtype">int</span> err;</div>
<div class="line"><span class="lineno"> 1203</span> </div>
<div class="line"><span class="lineno"> 1204</span>    <span class="keywordtype">char</span> *model_dir;</div>
<div class="line"><span class="lineno"> 1205</span> </div>
<div class="line"><span class="lineno"> 1206</span>    model_dir = getenv(<span class="stringliteral">&quot;PCILIB_MODEL_DIR&quot;</span>);</div>
<div class="line"><span class="lineno"> 1207</span>    <span class="keywordflow">if</span> (!model_dir) model_dir = PCILIB_MODEL_DIR;</div>
<div class="line"><span class="lineno"> 1208</span> </div>
<div class="line"><span class="lineno"> 1209</span>    ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">xml</a>.<a class="code hl_variable" href="structpcilib__xml__s.html#a866c873b8a37bb0530a1866398757b91">parser</a> = xmlNewParserCtxt();</div>
<div class="line"><span class="lineno"> 1210</span>    <span class="keywordflow">if</span> (!ctx-&gt;<a class="code hl_variable" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">xml</a>.<a class="code hl_variable" href="structpcilib__xml__s.html#a866c873b8a37bb0530a1866398757b91">parser</a>) {</div>
<div class="line"><span class="lineno"> 1211</span>        xmlErrorPtr xmlerr = xmlGetLastError();</div>
<div class="line"><span class="lineno"> 1212</span>        <span class="keywordflow">if</span> (xmlerr) <a class="code hl_define" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>(<span class="stringliteral">&quot;xmlNewParserCtxt reported error %d (%s)&quot;</span>, xmlerr-&gt;code, xmlerr-&gt;message);</div>
<div class="line"><span class="lineno"> 1213</span>        <span class="keywordflow">else</span> <a class="code hl_define" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>(<span class="stringliteral">&quot;Failed to create an XML parser context&quot;</span>);</div>
<div class="line"><span class="lineno"> 1214</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="error_8h.html#a0c59f7091fd2446121868635aca9e60ca8a1b45502224b7b2659e0014d9acf50c">PCILIB_ERROR_FAILED</a>;</div>
<div class="line"><span class="lineno"> 1215</span>    }</div>
<div class="line"><span class="lineno"> 1216</span> </div>
<div class="line"><span class="lineno"> 1217</span>    err = pcilib_xml_load_xsd(ctx, model_dir);</div>
<div class="line"><span class="lineno"> 1218</span>    <span class="keywordflow">if</span> (err) <span class="keywordflow">return</span> err;</div>
<div class="line"><span class="lineno"> 1219</span> </div>
<div class="line"><span class="lineno"> 1220</span>    <span class="keywordflow">return</span> pcilib_process_xml_internal(ctx, model, NULL);</div>
<div class="line"><span class="lineno"> 1221</span>}</div>
<div class="ttc" id="aerror_8h_html_a0c59f7091fd2446121868635aca9e60ca8a1b45502224b7b2659e0014d9acf50c"><div class="ttname"><a href="error_8h.html#a0c59f7091fd2446121868635aca9e60ca8a1b45502224b7b2659e0014d9acf50c">PCILIB_ERROR_FAILED</a></div><div class="ttdeci">@ PCILIB_ERROR_FAILED</div><div class="ttdef"><b>Definition:</b> error.h:22</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="structpcilib__xml__s.html#a866c873b8a37bb0530a1866398757b91">pcilib_xml_s::parser</a>, <a class="el" href="error_8h.html#a2b06064fecffd095efabb752f7b50021">pcilib_error</a>, <a class="el" href="error_8h.html#a0c59f7091fd2446121868635aca9e60ca8a1b45502224b7b2659e0014d9acf50c">PCILIB_ERROR_FAILED</a>, and <a class="el" href="structpcilib__s.html#a85dfd00a79f8cab8ff1413db17851356">pcilib_s::xml</a>.</p>

<p class="reference">Referenced by <a class="el" href="group__public__api.html#gaa6d33dcd1de77fa87c66276653c164a0">pcilib_open()</a>.</p>

</div>
</div>
<a id="aa7ba18b88548dccb86b93df2d6398dda" name="aa7ba18b88548dccb86b93df2d6398dda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7ba18b88548dccb86b93df2d6398dda">&#9670;&#160;</a></span>pcilib_process_xml()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int pcilib_process_xml </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="kmem_8h.html#a51f63ba035402ca9a2ddd1b11152d7f5">pcilib_t</a> *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>location</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Processes a bunch of XML files in the specified directory. </p>
<p >During the initialization, all XML files in the corresponding model directory will be loaded. This function allows to additionally load XML files from the specified subdirectories of the model directory. I.e. the XML files from the /usr/local/share/pcilib/models/<b>current_model/<b>location</b> will</b> be loaded. As with pcilib_init_xml, the directory can be adjusted using CMake build configuration or PCILIB_MODEL_DIR environmental variable. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">ctx</td><td>- pcilib context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">location</td><td>- Specifies sub-directory with XML files relative to the model directory. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>- error or 0 on success </dd></dl>
<div class="fragment"><div class="line"><span class="lineno"> 1197</span>                                                            {</div>
<div class="line"><span class="lineno"> 1198</span>    <span class="keywordflow">return</span> pcilib_process_xml_internal(ctx, NULL, location);</div>
<div class="line"><span class="lineno"> 1199</span>}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jun 18 2024 22:02:48 for pcilib by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
